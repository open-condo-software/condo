// auto generated by kmigrator
// KMIGRATOR:0336_invoice_paymenttype_invoicehistoryrecord_paymenttype:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMi40IG9uIDIwMjMtMTAtMjYgMDg6NDcKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAzMzVfbWFya2V0cHJpY2VzY29wZWhpc3RvcnlyZWNvcmRfYW5kX21vcmUnKSwKICAgIF0KCiAgICBvcGVyYXRpb25zID0gWwogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2ludm9pY2UnLAogICAgICAgICAgICBuYW1lPSdwYXltZW50VHlwZScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5UZXh0RmllbGQoZGVmYXVsdD0nb25saW5lJyksCiAgICAgICAgICAgIHByZXNlcnZlX2RlZmF1bHQ9RmFsc2UsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdpbnZvaWNlaGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J3BheW1lbnRUeXBlJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field paymentType to invoice
--
ALTER TABLE "Invoice" ADD COLUMN "paymentType" text DEFAULT 'online' NOT NULL;
ALTER TABLE "Invoice" ALTER COLUMN "paymentType" DROP DEFAULT;
--
-- Add field paymentType to invoicehistoryrecord
--
ALTER TABLE "InvoiceHistoryRecord" ADD COLUMN "paymentType" text NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field paymentType to invoicehistoryrecord
--
ALTER TABLE "InvoiceHistoryRecord" DROP COLUMN "paymentType" CASCADE;
--
-- Add field paymentType to invoice
--
ALTER TABLE "Invoice" DROP COLUMN "paymentType" CASCADE;
COMMIT;

    `)
}
