// auto generated by kmigrator
// KMIGRATOR:0278_auto_20230606_0604:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMSBvbiAyMDIzLTA2LTA2IDA2OjA0Cgpmcm9tIGRqYW5nby5kYiBpbXBvcnQgbWlncmF0aW9ucwoKCmNsYXNzIE1pZ3JhdGlvbihtaWdyYXRpb25zLk1pZ3JhdGlvbik6CgogICAgZGVwZW5kZW5jaWVzID0gWwogICAgICAgICgnX2RqYW5nb19zY2hlbWEnLCAnMDI3N19wcm9wZXJ0eW1ldGVyX3Byb3BlcnR5bWV0ZXJoaXN0b3J5cmVjb3JkX2FuZF9tb3JlJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
        BEGIN;

            --
            -- [CUSTOM] Set Statement Timeout to some large amount - 25 min (25 * 60 => 1500 sec)
            --
            SET statement_timeout = '1500s';
            
            --
            -- Alter field type on meterreadingsource
            --
            INSERT INTO "MeterReadingSource" (dv, sender, type, name, id, v, "createdAt", "updatedAt", "deletedAt", "newId", "createdBy", "updatedBy") VALUES (1, '{"dv": 1, "fingerprint": "initial"}', 'crm', 'meterReadingSource.crm.name', 'b09fec04-5bc2-4c58-a364-04b1ea505503', 1, '2023-06-05 00:00:00.000000', '2023-06-05 00:00:00.000000', null, null, null, null)
            ON CONFLICT (id) DO NOTHING;;
            
            --
            -- [CUSTOM] Revert Statement Timeout to default amount - 10 secs
            --
            SET statement_timeout = '10s';
            
        COMMIT;
    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    
    `)
}
