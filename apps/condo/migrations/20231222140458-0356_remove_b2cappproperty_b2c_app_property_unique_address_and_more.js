// auto generated by kmigrator
// KMIGRATOR:0356_remove_b2cappproperty_b2c_app_property_unique_address_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMS41IG9uIDIwMjMtMTItMjIgMDk6MDUKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAzNTVfYmlsbGluZ3JlY2VpcHRoaXN0b3J5cmVjb3JkX2FjcXVpcmluZ2hvc3R1cmxfYW5kX21vcmUnKSwKICAgIF0KCiAgICBvcGVyYXRpb25zID0gWwogICAgICAgIG1pZ3JhdGlvbnMuUmVtb3ZlQ29uc3RyYWludCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYjJjYXBwcHJvcGVydHknLAogICAgICAgICAgICBuYW1lPSdiMmNfYXBwX3Byb3BlcnR5X3VuaXF1ZV9hZGRyZXNzJywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkQ29uc3RyYWludCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYjJjYXBwcHJvcGVydHknLAogICAgICAgICAgICBjb25zdHJhaW50PW1vZGVscy5VbmlxdWVDb25zdHJhaW50KGNvbmRpdGlvbj1tb2RlbHMuUSgoJ2RlbGV0ZWRBdF9faXNudWxsJywgVHJ1ZSkpLCBmaWVsZHM9KCdhZGRyZXNzS2V5JywgJ2FwcCcpLCBuYW1lPSdiMmNfYXBwX3Byb3BlcnR5X3VuaXF1ZV9hZGRyZXNzS2V5JyksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Remove constraint b2c_app_property_unique_address from model b2cappproperty
--
DROP INDEX IF EXISTS "b2c_app_property_unique_address";
--
-- Create constraint b2c_app_property_unique_addressKey on model b2cappproperty
--
CREATE UNIQUE INDEX "b2c_app_property_unique_addressKey" ON "B2CAppProperty" ("addressKey", "app") WHERE "deletedAt" IS NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Create constraint b2c_app_property_unique_addressKey on model b2cappproperty
--
DROP INDEX IF EXISTS "b2c_app_property_unique_addressKey";
--
-- Remove constraint b2c_app_property_unique_address from model b2cappproperty
--
CREATE UNIQUE INDEX "b2c_app_property_unique_address" ON "B2CAppProperty" ("address", "app") WHERE "deletedAt" IS NULL;
COMMIT;

    `)
}
