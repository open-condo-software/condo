// auto generated by kmigrator
// KMIGRATOR:0064_meter_meter_unique_organization_and_number:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi41IG9uIDIwMjEtMDktMjkgMDc6MzgKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAwNjNfYXV0b18yMDIxMDkyN18xMTUxJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLkFkZENvbnN0cmFpbnQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J21ldGVyJywKICAgICAgICAgICAgY29uc3RyYWludD1tb2RlbHMuVW5pcXVlQ29uc3RyYWludChjb25kaXRpb249bW9kZWxzLlEoKCdkZWxldGVkQXRfX2lzbnVsbCcsIFRydWUpKSwgZmllbGRzPSgnb3JnYW5pemF0aW9uJywgJ251bWJlcicsICdyZXNvdXJjZScpLCBuYW1lPSdtZXRlcl91bmlxdWVfb3JnYW5pemF0aW9uX2FuZF9udW1iZXInKSwKICAgICAgICApLAogICAgXQo=

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Create constraint meter_unique_organization_and_number on model meter
--
CREATE UNIQUE INDEX "meter_unique_organization_and_number" ON "Meter" ("organization", "number", "resource") WHERE "deletedAt" IS NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Create constraint meter_unique_organization_and_number on model meter
--
DROP INDEX IF EXISTS "meter_unique_organization_and_number";
COMMIT;

    `)
}
