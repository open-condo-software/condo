// auto generated by kmigrator
// KMIGRATOR:0029_alter_organizationemployeerole_description:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi41IG9uIDIwMjEtMDctMjMgMTA6MTgNCg0KZnJvbSBkamFuZ28uZGIgaW1wb3J0IG1pZ3JhdGlvbnMsIG1vZGVscw0KDQoNCmNsYXNzIE1pZ3JhdGlvbihtaWdyYXRpb25zLk1pZ3JhdGlvbik6DQoNCiAgICBkZXBlbmRlbmNpZXMgPSBbDQogICAgICAgICgnX2RqYW5nb19zY2hlbWEnLCAnMDAyOF9hdXRvXzIwMjEwNzIzXzE0NDEnKSwNCiAgICBdDQoNCiAgICBvcGVyYXRpb25zID0gWw0KICAgICAgICBtaWdyYXRpb25zLkFsdGVyRmllbGQoDQogICAgICAgICAgICBtb2RlbF9uYW1lPSdvcmdhbml6YXRpb25lbXBsb3llZXJvbGUnLA0KICAgICAgICAgICAgbmFtZT0nZGVzY3JpcHRpb24nLA0KICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChkZWZhdWx0PSdlbXBsb3llZS5yb2xlLkFkbWluaXN0cmF0b3IuZGVzY3JpcHRpb24nKSwNCiAgICAgICAgICAgIHByZXNlcnZlX2RlZmF1bHQ9RmFsc2UsDQogICAgICAgICksDQogICAgXQ0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field description on organizationemployeerole
--
ALTER TABLE "OrganizationEmployeeRole" ALTER COLUMN "description" SET DEFAULT 'employee.role.Administrator.description';
UPDATE "OrganizationEmployeeRole" SET "description" = 'employee.role.Administrator.description' WHERE "description" IS NULL;
ALTER TABLE "OrganizationEmployeeRole" ALTER COLUMN "description" SET NOT NULL;
ALTER TABLE "OrganizationEmployeeRole" ALTER COLUMN "description" DROP DEFAULT;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field description on organizationemployeerole
--
ALTER TABLE "OrganizationEmployeeRole" ALTER COLUMN "description" DROP NOT NULL;
COMMIT;

    `)
}
