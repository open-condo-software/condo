// auto generated by kmigrator
// KMIGRATOR:0146_b2bapp_isglobal_b2bapphistoryrecord_isglobal:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMC4yIG9uIDIwMjItMDctMTIgMTA6NDIKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAxNDVfYWx0ZXJfY29udGFjdF91bml0dHlwZScpLAogICAgXQoKICAgIG9wZXJhdGlvbnMgPSBbCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYjJiYXBwJywKICAgICAgICAgICAgbmFtZT0naXNHbG9iYWwnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuQm9vbGVhbkZpZWxkKGRlZmF1bHQ9RmFsc2UpLAogICAgICAgICAgICBwcmVzZXJ2ZV9kZWZhdWx0PUZhbHNlLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYjJiYXBwaGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J2lzR2xvYmFsJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkJvb2xlYW5GaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field isGlobal to b2bapp
--
ALTER TABLE "B2BApp" ADD COLUMN "isGlobal" boolean DEFAULT false NOT NULL;
ALTER TABLE "B2BApp" ALTER COLUMN "isGlobal" DROP DEFAULT;
--
-- Add field isGlobal to b2bapphistoryrecord
--
ALTER TABLE "B2BAppHistoryRecord" ADD COLUMN "isGlobal" boolean NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field isGlobal to b2bapphistoryrecord
--
ALTER TABLE "B2BAppHistoryRecord" DROP COLUMN "isGlobal" CASCADE;
--
-- Add field isGlobal to b2bapp
--
ALTER TABLE "B2BApp" DROP COLUMN "isGlobal" CASCADE;
COMMIT;

    `)
}
