// auto generated by kmigrator
// KMIGRATOR:0172_organizationemployeerole_ticketvisibilitytype_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMSBvbiAyMDIyLTA5LTIwIDA2OjM4Cgpmcm9tIGRqYW5nby5kYiBpbXBvcnQgbWlncmF0aW9ucywgbW9kZWxzCgoKY2xhc3MgTWlncmF0aW9uKG1pZ3JhdGlvbnMuTWlncmF0aW9uKToKCiAgICBkZXBlbmRlbmNpZXMgPSBbCiAgICAgICAgKCdfZGphbmdvX3NjaGVtYScsICcwMTcxX21lc3NhZ2ViYXRjaF9tZXNzYWdlYmF0Y2hoaXN0b3J5cmVjb3JkJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdvcmdhbml6YXRpb25lbXBsb3llZXJvbGUnLAogICAgICAgICAgICBuYW1lPSd0aWNrZXRWaXNpYmlsaXR5VHlwZScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5UZXh0RmllbGQoZGVmYXVsdD0nb3JnYW5pemF0aW9uJyksCiAgICAgICAgICAgIHByZXNlcnZlX2RlZmF1bHQ9RmFsc2UsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdvcmdhbml6YXRpb25lbXBsb3llZXJvbGVoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0ndGlja2V0VmlzaWJpbGl0eVR5cGUnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field ticketVisibilityType to organizationemployeerole
--
ALTER TABLE "OrganizationEmployeeRole" ADD COLUMN "ticketVisibilityType" text DEFAULT 'organization' NOT NULL;
ALTER TABLE "OrganizationEmployeeRole" ALTER COLUMN "ticketVisibilityType" DROP DEFAULT;
--
-- Add field ticketVisibilityType to organizationemployeerolehistoryrecord
--
ALTER TABLE "OrganizationEmployeeRoleHistoryRecord" ADD COLUMN "ticketVisibilityType" text NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field ticketVisibilityType to organizationemployeerolehistoryrecord
--
ALTER TABLE "OrganizationEmployeeRoleHistoryRecord" DROP COLUMN "ticketVisibilityType" CASCADE;
--
-- Add field ticketVisibilityType to organizationemployeerole
--
ALTER TABLE "OrganizationEmployeeRole" DROP COLUMN "ticketVisibilityType" CASCADE;
COMMIT;

    `)
}
