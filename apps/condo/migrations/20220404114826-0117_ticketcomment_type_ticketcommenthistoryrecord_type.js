// auto generated by kmigrator
// KMIGRATOR:0117_ticketcomment_type_ticketcommenthistoryrecord_type:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMCBvbiAyMDIyLTA0LTA0IDA2OjQ4Cgpmcm9tIGRqYW5nby5kYiBpbXBvcnQgbWlncmF0aW9ucywgbW9kZWxzCgoKY2xhc3MgTWlncmF0aW9uKG1pZ3JhdGlvbnMuTWlncmF0aW9uKToKCiAgICBkZXBlbmRlbmNpZXMgPSBbCiAgICAgICAgKCdfZGphbmdvX3NjaGVtYScsICcwMTE2X3RpY2tldF9yZXZpZXdjb21tZW50X3RpY2tldF9yZXZpZXd2YWx1ZV9hbmRfbW9yZScpLAogICAgXQoKICAgIG9wZXJhdGlvbnMgPSBbCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y29tbWVudCcsCiAgICAgICAgICAgIG5hbWU9J3R5cGUnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGRlZmF1bHQ9J29yZ2FuaXphdGlvbicpLAogICAgICAgICAgICBwcmVzZXJ2ZV9kZWZhdWx0PUZhbHNlLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y29tbWVudGhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSd0eXBlJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field type to ticketcomment
--
ALTER TABLE "TicketComment" ADD COLUMN "type" text DEFAULT 'organization' NOT NULL;
ALTER TABLE "TicketComment" ALTER COLUMN "type" DROP DEFAULT;
--
-- Add field type to ticketcommenthistoryrecord
--
ALTER TABLE "TicketCommentHistoryRecord" ADD COLUMN "type" text NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field type to ticketcommenthistoryrecord
--
ALTER TABLE "TicketCommentHistoryRecord" DROP COLUMN "type" CASCADE;
--
-- Add field type to ticketcomment
--
ALTER TABLE "TicketComment" DROP COLUMN "type" CASCADE;
COMMIT;

    `)
}
