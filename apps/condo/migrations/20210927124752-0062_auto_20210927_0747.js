// auto generated by kmigrator and updated by @toplenboren
// KMIGRATOR:0062_auto_20210927_0747:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi40IG9uIDIwMjEtMDktMjcgMDc6NDcKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAwNjFfcHJvcGVydHlfcHJvcGVydHlfdW5pcXVlX29yZ2FuaXphdGlvbl9hbmRfYWRkcmVzcycpLAogICAgXQoKICAgIG9wZXJhdGlvbnMgPSBbCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiaWxsaW5nYWNjb3VudCcsCiAgICAgICAgICAgIG5hbWU9J2dsb2JhbElkJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiaWxsaW5ncHJvcGVydHknLAogICAgICAgICAgICBuYW1lPSdnbG9iYWxJZCcsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5UZXh0RmllbGQoKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkQ29uc3RyYWludCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYmlsbGluZ2FjY291bnQnLAogICAgICAgICAgICBjb25zdHJhaW50PW1vZGVscy5VbmlxdWVDb25zdHJhaW50KGZpZWxkcz0oJ2NvbnRleHQnLCAnZ2xvYmFsSWQnKSwgbmFtZT0nYmlsbGluZ0FjY291bnRfdW5pcXVlX2NvbnRleHRfZ2xvYmFsSWQnKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkQ29uc3RyYWludCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYmlsbGluZ3Byb3BlcnR5JywKICAgICAgICAgICAgY29uc3RyYWludD1tb2RlbHMuVW5pcXVlQ29uc3RyYWludChmaWVsZHM9KCdjb250ZXh0JywgJ2dsb2JhbElkJyksIG5hbWU9J2JpbGxpbmdQcm9wZXJ0eV91bmlxdWVfY29udGV4dF9nbG9iYWxJZCcpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field globalId on billingaccount
--
DROP INDEX IF EXISTS "BillingAccount_globalId_e29b5e61_like";
DROP INDEX IF EXISTS "BillingAccount_bindingId_e1c2fc88_like";
ALTER TABLE "BillingAccount" DROP CONSTRAINT IF EXISTS "BillingAccount_globalId_e29b5e61_uniq";
ALTER TABLE "BillingAccount" DROP CONSTRAINT IF EXISTS "BillingAccount_bindingId_key";
--
-- Alter field globalId on billingproperty
--
DROP INDEX IF EXISTS "BillingProperty_globalId_31075b81_like";
DROP INDEX IF EXISTS "BillingProperty_bindingId_16f29413_like";
ALTER TABLE "BillingProperty" DROP CONSTRAINT IF EXISTS "BillingProperty_globalId_31075b81_uniq";
ALTER TABLE "BillingProperty" DROP CONSTRAINT IF EXISTS "BillingProperty_bindingId_key";
--
-- Create constraint billingAccount_unique_context_globalId on model billingaccount
--
ALTER TABLE "BillingAccount" ADD CONSTRAINT "billingAccount_unique_context_globalId" UNIQUE ("context", "globalId");
--
-- Create constraint billingProperty_unique_context_globalId on model billingproperty
--
ALTER TABLE "BillingProperty" ADD CONSTRAINT "billingProperty_unique_context_globalId" UNIQUE ("context", "globalId");
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Create constraint billingProperty_unique_context_globalId on model billingproperty
--
ALTER TABLE "BillingProperty" DROP CONSTRAINT "billingProperty_unique_context_globalId";
--
-- Create constraint billingAccount_unique_context_globalId on model billingaccount
--
ALTER TABLE "BillingAccount" DROP CONSTRAINT "billingAccount_unique_context_globalId";
--
-- Alter field globalId on billingproperty
--
ALTER TABLE "BillingProperty" ADD CONSTRAINT "BillingProperty_globalId_31075b81_uniq" UNIQUE ("globalId");
CREATE INDEX "BillingProperty_globalId_31075b81_like" ON "BillingProperty" ("globalId" text_pattern_ops);
--
-- Alter field globalId on billingaccount
--
ALTER TABLE "BillingAccount" ADD CONSTRAINT "BillingAccount_globalId_e29b5e61_uniq" UNIQUE ("globalId");
CREATE INDEX "BillingAccount_globalId_e29b5e61_like" ON "BillingAccount" ("globalId" text_pattern_ops);
COMMIT;

    `)
}
