// auto generated by kmigrator
// KMIGRATOR:0434_remove_externalreport_createdby_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDUuMC43IG9uIDIwMjQtMTAtMjIgMTg6MTcKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zCgoKY2xhc3MgTWlncmF0aW9uKG1pZ3JhdGlvbnMuTWlncmF0aW9uKToKCiAgICBkZXBlbmRlbmNpZXMgPSBbCiAgICAgICAgKCdfZGphbmdvX3NjaGVtYScsICcwNDMzX3BheW1lbnRfcmF3YWRkcmVzc19wYXltZW50X3JlY2lwaWVudF9hbmRfbW9yZScpLAogICAgXQoKICAgIG9wZXJhdGlvbnMgPSBbCiMgICAgICAgIG1pZ3JhdGlvbnMuUmVtb3ZlRmllbGQoCiMgICAgICAgICAgICBtb2RlbF9uYW1lPSdleHRlcm5hbHJlcG9ydCcsCiMgICAgICAgICAgICBuYW1lPSdjcmVhdGVkQnknLAojICAgICAgICApLAojICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAojICAgICAgICAgICAgbW9kZWxfbmFtZT0nZXh0ZXJuYWxyZXBvcnQnLAojICAgICAgICAgICAgbmFtZT0nb3JnYW5pemF0aW9uJywKIyAgICAgICAgKSwKIyAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKIyAgICAgICAgICAgIG1vZGVsX25hbWU9J2V4dGVybmFscmVwb3J0JywKIyAgICAgICAgICAgIG5hbWU9J3VwZGF0ZWRCeScsCiMgICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5EZWxldGVNb2RlbCgKICAgICAgICAgICAgbmFtZT0nZXh0ZXJuYWxyZXBvcnQnLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5EZWxldGVNb2RlbCgKICAgICAgICAgICAgbmFtZT0nZXh0ZXJuYWxyZXBvcnRoaXN0b3J5cmVjb3JkJywKICAgICAgICApLAogICAgXQo=

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Delete model externalreport
--
-- DROP TABLE "ExternalReport" CASCADE;
--
-- Delete model externalreporthistoryrecord
--
-- DROP TABLE "ExternalReportHistoryRecord" CASCADE;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Delete model externalreporthistoryrecord
--
CREATE TABLE IF NOT EXISTS "ExternalReportHistoryRecord" ("type" text NULL, "title" text NULL, "description" text NULL, "meta" jsonb NULL, "organization" uuid NULL, "isHidden" boolean NULL, "id" uuid NOT NULL PRIMARY KEY, "v" integer NULL, "createdAt" timestamp with time zone NULL, "updatedAt" timestamp with time zone NULL, "createdBy" uuid NULL, "updatedBy" uuid NULL, "deletedAt" timestamp with time zone NULL, "newId" jsonb NULL, "dv" integer NULL, "sender" jsonb NULL, "history_date" timestamp with time zone NOT NULL, "history_action" varchar(50) NOT NULL, "history_id" uuid NOT NULL);
--
-- Delete model externalreport
--
CREATE TABLE IF NOT EXISTS "ExternalReport" ("type" varchar(50) NOT NULL, "title" text NOT NULL, "description" text NULL, "meta" jsonb NULL, "isHidden" boolean NOT NULL, "id" uuid NOT NULL PRIMARY KEY, "v" integer NOT NULL, "createdAt" timestamp with time zone NULL, "updatedAt" timestamp with time zone NULL, "deletedAt" timestamp with time zone NULL, "newId" uuid NULL, "dv" integer NOT NULL, "sender" jsonb NOT NULL, "createdBy" uuid NULL, "organization" uuid NULL, "updatedBy" uuid NULL);
CREATE INDEX IF NOT EXISTS "ExternalReportHistoryRecord_history_id_3e040763" ON "ExternalReportHistoryRecord" ("history_id");

ALTER TABLE "ExternalReport" DROP CONSTRAINT IF EXISTS "ExternalReport_createdBy_9471f31c_fk_User_id";
ALTER TABLE "ExternalReport" ADD CONSTRAINT "ExternalReport_createdBy_9471f31c_fk_User_id" FOREIGN KEY ("createdBy") REFERENCES "User" ("id") DEFERRABLE INITIALLY DEFERRED;

ALTER TABLE "ExternalReport" DROP CONSTRAINT IF EXISTS "ExternalReport_organization_33248cd9_fk_Organization_id";
ALTER TABLE "ExternalReport" ADD CONSTRAINT "ExternalReport_organization_33248cd9_fk_Organization_id" FOREIGN KEY ("organization") REFERENCES "Organization" ("id") DEFERRABLE INITIALLY DEFERRED;

ALTER TABLE "ExternalReport" DROP CONSTRAINT IF EXISTS "ExternalReport_updatedBy_da2b945f_fk_User_id";
ALTER TABLE "ExternalReport" ADD CONSTRAINT "ExternalReport_updatedBy_da2b945f_fk_User_id" FOREIGN KEY ("updatedBy") REFERENCES "User" ("id") DEFERRABLE INITIALLY DEFERRED;

CREATE INDEX IF NOT EXISTS "ExternalReport_createdAt_c70831b6" ON "ExternalReport" ("createdAt");
CREATE INDEX IF NOT EXISTS "ExternalReport_updatedAt_40a14aa7" ON "ExternalReport" ("updatedAt");
CREATE INDEX IF NOT EXISTS "ExternalReport_deletedAt_97fbe18d" ON "ExternalReport" ("deletedAt");
CREATE INDEX IF NOT EXISTS "ExternalReport_createdBy_9471f31c" ON "ExternalReport" ("createdBy");
CREATE INDEX IF NOT EXISTS "ExternalReport_organization_33248cd9" ON "ExternalReport" ("organization");
CREATE INDEX IF NOT EXISTS "ExternalReport_updatedBy_da2b945f" ON "ExternalReport" ("updatedBy");
COMMIT;

    `)
}
