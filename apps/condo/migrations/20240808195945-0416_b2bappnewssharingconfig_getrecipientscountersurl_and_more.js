// auto generated by kmigrator
// KMIGRATOR:0416_b2bappnewssharingconfig_getrecipientscountersurl_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDUuMC43IG9uIDIwMjQtMDgtMDggMTU6MDAKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzA0MTVfcmVtb3ZlX2ZvcmdvdHBhc3N3b3JkYWN0aW9uX2NyZWF0ZWRieV9hbmRfbW9yZScpLAogICAgXQoKICAgIG9wZXJhdGlvbnMgPSBbCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYjJiYXBwbmV3c3NoYXJpbmdjb25maWcnLAogICAgICAgICAgICBuYW1lPSdnZXRSZWNpcGllbnRzQ291bnRlcnNVcmwnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiMmJhcHBuZXdzc2hhcmluZ2NvbmZpZycsCiAgICAgICAgICAgIG5hbWU9J3B1c2hOb3RpZmljYXRpb25TZXR0aW5ncycsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5DaGFyRmllbGQoY2hvaWNlcz1bKCdPTkxZX0VNRVJHRU5DWScsICdPTkxZX0VNRVJHRU5DWScpLCAoJ0VOQUJMRUQnLCAnRU5BQkxFRCcpLCAoJ0RJU0FCTEVEJywgJ0RJU0FCTEVEJyldLCBkZWZhdWx0PSdESVNBQkxFRCcsIG1heF9sZW5ndGg9NTApLAogICAgICAgICAgICBwcmVzZXJ2ZV9kZWZhdWx0PUZhbHNlLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYjJiYXBwbmV3c3NoYXJpbmdjb25maWdoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nZ2V0UmVjaXBpZW50c0NvdW50ZXJzVXJsJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYjJiYXBwbmV3c3NoYXJpbmdjb25maWdoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0ncHVzaE5vdGlmaWNhdGlvblNldHRpbmdzJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiMmJhcHBuZXdzc2hhcmluZ2NvbmZpZycsCiAgICAgICAgICAgIG5hbWU9J2dldFJlY2lwaWVudHNVcmwnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field getRecipientsCountersUrl to b2bappnewssharingconfig
--
ALTER TABLE "B2BAppNewsSharingConfig" ADD COLUMN "getRecipientsCountersUrl" text NULL;
--
-- Add field pushNotificationSettings to b2bappnewssharingconfig
--
ALTER TABLE "B2BAppNewsSharingConfig" ADD COLUMN "pushNotificationSettings" varchar(50) DEFAULT 'DISABLED' NOT NULL;
ALTER TABLE "B2BAppNewsSharingConfig" ALTER COLUMN "pushNotificationSettings" DROP DEFAULT;
--
-- Add field getRecipientsCountersUrl to b2bappnewssharingconfighistoryrecord
--
ALTER TABLE "B2BAppNewsSharingConfigHistoryRecord" ADD COLUMN "getRecipientsCountersUrl" text NULL;
--
-- Add field pushNotificationSettings to b2bappnewssharingconfighistoryrecord
--
ALTER TABLE "B2BAppNewsSharingConfigHistoryRecord" ADD COLUMN "pushNotificationSettings" text NULL;
--
-- Alter field getRecipientsUrl on b2bappnewssharingconfig
--
ALTER TABLE "B2BAppNewsSharingConfig" ALTER COLUMN "getRecipientsUrl" DROP NOT NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field getRecipientsUrl on b2bappnewssharingconfig
--
ALTER TABLE "B2BAppNewsSharingConfig" ALTER COLUMN "getRecipientsUrl" SET NOT NULL;
--
-- Add field pushNotificationSettings to b2bappnewssharingconfighistoryrecord
--
ALTER TABLE "B2BAppNewsSharingConfigHistoryRecord" DROP COLUMN "pushNotificationSettings" CASCADE;
--
-- Add field getRecipientsCountersUrl to b2bappnewssharingconfighistoryrecord
--
ALTER TABLE "B2BAppNewsSharingConfigHistoryRecord" DROP COLUMN "getRecipientsCountersUrl" CASCADE;
--
-- Add field pushNotificationSettings to b2bappnewssharingconfig
--
ALTER TABLE "B2BAppNewsSharingConfig" DROP COLUMN "pushNotificationSettings" CASCADE;
--
-- Add field getRecipientsCountersUrl to b2bappnewssharingconfig
--
ALTER TABLE "B2BAppNewsSharingConfig" DROP COLUMN "getRecipientsCountersUrl" CASCADE;
COMMIT;

    `)
}
