// auto generated by kmigrator
// KMIGRATOR:0155_organizationemployee_unique_user_and_organization:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMCBvbiAyMDIyLTA3LTI3IDA2OjA2Cgpmcm9tIGRqYW5nby5kYiBpbXBvcnQgbWlncmF0aW9ucywgbW9kZWxzCgoKY2xhc3MgTWlncmF0aW9uKG1pZ3JhdGlvbnMuTWlncmF0aW9uKToKCiAgICBkZXBlbmRlbmNpZXMgPSBbCiAgICAgICAgKCdfZGphbmdvX3NjaGVtYScsICcwMTU0X3RpY2tldGV4cG9ydHRhc2tfdGlja2V0ZXhwb3J0dGFza2hpc3RvcnlyZWNvcmQnKSwKICAgIF0KCiAgICBvcGVyYXRpb25zID0gWwogICAgICAgIG1pZ3JhdGlvbnMuQWRkQ29uc3RyYWludCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nb3JnYW5pemF0aW9uZW1wbG95ZWUnLAogICAgICAgICAgICBjb25zdHJhaW50PW1vZGVscy5VbmlxdWVDb25zdHJhaW50KGNvbmRpdGlvbj1tb2RlbHMuUSgoJ2RlbGV0ZWRBdF9faXNudWxsJywgVHJ1ZSkpLCBmaWVsZHM9KCd1c2VyJywgJ29yZ2FuaXphdGlvbicpLCBuYW1lPSd1bmlxdWVfdXNlcl9hbmRfb3JnYW5pemF0aW9uJyksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Create constraint unique_user_and_organization on model organizationemployee
--
CREATE UNIQUE INDEX "unique_user_and_organization" ON "OrganizationEmployee" ("user", "organization") WHERE "deletedAt" IS NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Create constraint unique_user_and_organization on model organizationemployee
--
DROP INDEX IF EXISTS "unique_user_and_organization";
COMMIT;

    `)
}
