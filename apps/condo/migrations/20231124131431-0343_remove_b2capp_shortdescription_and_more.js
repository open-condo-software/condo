// auto generated by kmigrator
// KMIGRATOR:0343_remove_b2capp_shortdescription_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMS41IG9uIDIwMjMtMTEtMjQgMDg6MTQKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAzNDJfYXV0b18yMDIzMTExNF8wNzIwJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiMmNhcHAnLAogICAgICAgICAgICBuYW1lPSdzaG9ydERlc2NyaXB0aW9uJywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuUmVtb3ZlRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2IyY2FwcGhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdzaG9ydERlc2NyaXB0aW9uJywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2IyY2FwcCcsCiAgICAgICAgICAgIG5hbWU9J2ltcG9ydElkJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYjJjYXBwJywKICAgICAgICAgICAgbmFtZT0naW1wb3J0UmVtb3RlU3lzdGVtJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYjJjYXBwYnVpbGQnLAogICAgICAgICAgICBuYW1lPSdpbXBvcnRJZCcsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5UZXh0RmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2IyY2FwcGJ1aWxkJywKICAgICAgICAgICAgbmFtZT0naW1wb3J0UmVtb3RlU3lzdGVtJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYjJjYXBwYnVpbGRoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0naW1wb3J0SWQnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiMmNhcHBidWlsZGhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdpbXBvcnRSZW1vdGVTeXN0ZW0nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiMmNhcHBoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0naW1wb3J0SWQnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiMmNhcHBoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0naW1wb3J0UmVtb3RlU3lzdGVtJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Remove field shortDescription from b2capp
--
-- ALTER TABLE "B2CApp" DROP COLUMN "shortDescription" CASCADE;
ALTER TABLE "B2CApp" ALTER COLUMN "shortDescription" DROP NOT NULL;
--
-- Remove field shortDescription from b2capphistoryrecord
--
-- ALTER TABLE "B2CAppHistoryRecord" DROP COLUMN "shortDescription" CASCADE;
ALTER TABLE "B2CAppHistoryRecord" ALTER COLUMN "shortDescription" DROP NOT NULL;
--
-- Add field importId to b2capp
--
ALTER TABLE "B2CApp" ADD COLUMN "importId" text NULL;
--
-- Add field importRemoteSystem to b2capp
--
ALTER TABLE "B2CApp" ADD COLUMN "importRemoteSystem" text NULL;
--
-- Add field importId to b2cappbuild
--
ALTER TABLE "B2CAppBuild" ADD COLUMN "importId" text NULL;
--
-- Add field importRemoteSystem to b2cappbuild
--
ALTER TABLE "B2CAppBuild" ADD COLUMN "importRemoteSystem" text NULL;
--
-- Add field importId to b2cappbuildhistoryrecord
--
ALTER TABLE "B2CAppBuildHistoryRecord" ADD COLUMN "importId" text NULL;
--
-- Add field importRemoteSystem to b2cappbuildhistoryrecord
--
ALTER TABLE "B2CAppBuildHistoryRecord" ADD COLUMN "importRemoteSystem" text NULL;
--
-- Add field importId to b2capphistoryrecord
--
ALTER TABLE "B2CAppHistoryRecord" ADD COLUMN "importId" text NULL;
--
-- Add field importRemoteSystem to b2capphistoryrecord
--
ALTER TABLE "B2CAppHistoryRecord" ADD COLUMN "importRemoteSystem" text NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field importRemoteSystem to b2capphistoryrecord
--
ALTER TABLE "B2CAppHistoryRecord" DROP COLUMN "importRemoteSystem" CASCADE;
--
-- Add field importId to b2capphistoryrecord
--
ALTER TABLE "B2CAppHistoryRecord" DROP COLUMN "importId" CASCADE;
--
-- Add field importRemoteSystem to b2cappbuildhistoryrecord
--
ALTER TABLE "B2CAppBuildHistoryRecord" DROP COLUMN "importRemoteSystem" CASCADE;
--
-- Add field importId to b2cappbuildhistoryrecord
--
ALTER TABLE "B2CAppBuildHistoryRecord" DROP COLUMN "importId" CASCADE;
--
-- Add field importRemoteSystem to b2cappbuild
--
ALTER TABLE "B2CAppBuild" DROP COLUMN "importRemoteSystem" CASCADE;
--
-- Add field importId to b2cappbuild
--
ALTER TABLE "B2CAppBuild" DROP COLUMN "importId" CASCADE;
--
-- Add field importRemoteSystem to b2capp
--
ALTER TABLE "B2CApp" DROP COLUMN "importRemoteSystem" CASCADE;
--
-- Add field importId to b2capp
--
ALTER TABLE "B2CApp" DROP COLUMN "importId" CASCADE;
--
-- Remove field shortDescription from b2capphistoryrecord
--
ALTER TABLE "B2CAppHistoryRecord" ADD COLUMN IF NOT EXISTS "shortDescription" text NULL;
--
-- Remove field shortDescription from b2capp
--
ALTER TABLE "B2CApp" ADD COLUMN IF NOT EXISTS "shortDescription" text NOT NULL;
COMMIT;

    `)
}
