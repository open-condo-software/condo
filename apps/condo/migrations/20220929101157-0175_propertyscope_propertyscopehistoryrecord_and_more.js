// auto generated by kmigrator
// KMIGRATOR:0175_propertyscope_propertyscopehistoryrecord_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMSBvbiAyMDIyLTA5LTI5IDA1OjEyCgpmcm9tIGRqYW5nby5kYiBpbXBvcnQgbWlncmF0aW9ucywgbW9kZWxzCmltcG9ydCBkamFuZ28uZGIubW9kZWxzLmRlbGV0aW9uCgoKY2xhc3MgTWlncmF0aW9uKG1pZ3JhdGlvbnMuTWlncmF0aW9uKToKCiAgICBkZXBlbmRlbmNpZXMgPSBbCiAgICAgICAgKCdfZGphbmdvX3NjaGVtYScsICcwMTc0X2IyYmFwcF9mZWF0dXJlc19iMmJhcHBoaXN0b3J5cmVjb3JkX2ZlYXR1cmVzJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLkNyZWF0ZU1vZGVsKAogICAgICAgICAgICBuYW1lPSdwcm9wZXJ0eXNjb3BlJywKICAgICAgICAgICAgZmllbGRzPVsKICAgICAgICAgICAgICAgICgnbmFtZScsIG1vZGVscy5UZXh0RmllbGQoKSksCiAgICAgICAgICAgICAgICAoJ2hhc0FsbFByb3BlcnRpZXMnLCBtb2RlbHMuQm9vbGVhbkZpZWxkKCkpLAogICAgICAgICAgICAgICAgKCdoYXNBbGxFbXBsb3llZXMnLCBtb2RlbHMuQm9vbGVhbkZpZWxkKCkpLAogICAgICAgICAgICAgICAgKCdpZCcsIG1vZGVscy5VVUlERmllbGQocHJpbWFyeV9rZXk9VHJ1ZSwgc2VyaWFsaXplPUZhbHNlKSksCiAgICAgICAgICAgICAgICAoJ3YnLCBtb2RlbHMuSW50ZWdlckZpZWxkKGRlZmF1bHQ9MSkpLAogICAgICAgICAgICAgICAgKCdjcmVhdGVkQXQnLCBtb2RlbHMuRGF0ZVRpbWVGaWVsZChibGFuaz1UcnVlLCBkYl9pbmRleD1UcnVlLCBudWxsPVRydWUpKSwKICAgICAgICAgICAgICAgICgndXBkYXRlZEF0JywgbW9kZWxzLkRhdGVUaW1lRmllbGQoYmxhbms9VHJ1ZSwgZGJfaW5kZXg9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ2RlbGV0ZWRBdCcsIG1vZGVscy5EYXRlVGltZUZpZWxkKGJsYW5rPVRydWUsIGRiX2luZGV4PVRydWUsIG51bGw9VHJ1ZSkpLAogICAgICAgICAgICAgICAgKCduZXdJZCcsIG1vZGVscy5VVUlERmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ2R2JywgbW9kZWxzLkludGVnZXJGaWVsZCgpKSwKICAgICAgICAgICAgICAgICgnc2VuZGVyJywgbW9kZWxzLkpTT05GaWVsZCgpKSwKICAgICAgICAgICAgICAgICgnY3JlYXRlZEJ5JywgbW9kZWxzLkZvcmVpZ25LZXkoYmxhbms9VHJ1ZSwgZGJfY29sdW1uPSdjcmVhdGVkQnknLCBudWxsPVRydWUsIG9uX2RlbGV0ZT1kamFuZ28uZGIubW9kZWxzLmRlbGV0aW9uLlNFVF9OVUxMLCByZWxhdGVkX25hbWU9JysnLCB0bz0nX2RqYW5nb19zY2hlbWEudXNlcicpKSwKICAgICAgICAgICAgICAgICgnb3JnYW5pemF0aW9uJywgbW9kZWxzLkZvcmVpZ25LZXkoZGJfY29sdW1uPSdvcmdhbml6YXRpb24nLCBvbl9kZWxldGU9ZGphbmdvLmRiLm1vZGVscy5kZWxldGlvbi5DQVNDQURFLCByZWxhdGVkX25hbWU9JysnLCB0bz0nX2RqYW5nb19zY2hlbWEub3JnYW5pemF0aW9uJykpLAogICAgICAgICAgICAgICAgKCd1cGRhdGVkQnknLCBtb2RlbHMuRm9yZWlnbktleShibGFuaz1UcnVlLCBkYl9jb2x1bW49J3VwZGF0ZWRCeScsIG51bGw9VHJ1ZSwgb25fZGVsZXRlPWRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24uU0VUX05VTEwsIHJlbGF0ZWRfbmFtZT0nKycsIHRvPSdfZGphbmdvX3NjaGVtYS51c2VyJykpLAogICAgICAgICAgICBdLAogICAgICAgICAgICBvcHRpb25zPXsKICAgICAgICAgICAgICAgICdkYl90YWJsZSc6ICdQcm9wZXJ0eVNjb3BlJywKICAgICAgICAgICAgfSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQ3JlYXRlTW9kZWwoCiAgICAgICAgICAgIG5hbWU9J3Byb3BlcnR5c2NvcGVoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgZmllbGRzPVsKICAgICAgICAgICAgICAgICgnbmFtZScsIG1vZGVscy5UZXh0RmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ29yZ2FuaXphdGlvbicsIG1vZGVscy5VVUlERmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ2hhc0FsbFByb3BlcnRpZXMnLCBtb2RlbHMuQm9vbGVhbkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSkpLAogICAgICAgICAgICAgICAgKCdoYXNBbGxFbXBsb3llZXMnLCBtb2RlbHMuQm9vbGVhbkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSkpLAogICAgICAgICAgICAgICAgKCdpZCcsIG1vZGVscy5VVUlERmllbGQocHJpbWFyeV9rZXk9VHJ1ZSwgc2VyaWFsaXplPUZhbHNlKSksCiAgICAgICAgICAgICAgICAoJ3YnLCBtb2RlbHMuSW50ZWdlckZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSkpLAogICAgICAgICAgICAgICAgKCdjcmVhdGVkQXQnLCBtb2RlbHMuRGF0ZVRpbWVGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpKSwKICAgICAgICAgICAgICAgICgndXBkYXRlZEF0JywgbW9kZWxzLkRhdGVUaW1lRmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ2NyZWF0ZWRCeScsIG1vZGVscy5VVUlERmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ3VwZGF0ZWRCeScsIG1vZGVscy5VVUlERmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ2RlbGV0ZWRBdCcsIG1vZGVscy5EYXRlVGltZUZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSkpLAogICAgICAgICAgICAgICAgKCduZXdJZCcsIG1vZGVscy5KU09ORmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ2R2JywgbW9kZWxzLkludGVnZXJGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpKSwKICAgICAgICAgICAgICAgICgnc2VuZGVyJywgbW9kZWxzLkpTT05GaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpKSwKICAgICAgICAgICAgICAgICgnaGlzdG9yeV9kYXRlJywgbW9kZWxzLkRhdGVUaW1lRmllbGQoKSksCiAgICAgICAgICAgICAgICAoJ2hpc3RvcnlfYWN0aW9uJywgbW9kZWxzLkNoYXJGaWVsZChjaG9pY2VzPVsoJ2MnLCAnYycpLCAoJ3UnLCAndScpLCAoJ2QnLCAnZCcpXSwgbWF4X2xlbmd0aD01MCkpLAogICAgICAgICAgICAgICAgKCdoaXN0b3J5X2lkJywgbW9kZWxzLlVVSURGaWVsZChkYl9pbmRleD1UcnVlKSksCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIG9wdGlvbnM9ewogICAgICAgICAgICAgICAgJ2RiX3RhYmxlJzogJ1Byb3BlcnR5U2NvcGVIaXN0b3J5UmVjb3JkJywKICAgICAgICAgICAgfSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQ3JlYXRlTW9kZWwoCiAgICAgICAgICAgIG5hbWU9J3Byb3BlcnR5c2NvcGVvcmdhbml6YXRpb25lbXBsb3llZScsCiAgICAgICAgICAgIGZpZWxkcz1bCiAgICAgICAgICAgICAgICAoJ2lkJywgbW9kZWxzLlVVSURGaWVsZChwcmltYXJ5X2tleT1UcnVlLCBzZXJpYWxpemU9RmFsc2UpKSwKICAgICAgICAgICAgICAgICgndicsIG1vZGVscy5JbnRlZ2VyRmllbGQoZGVmYXVsdD0xKSksCiAgICAgICAgICAgICAgICAoJ2NyZWF0ZWRBdCcsIG1vZGVscy5EYXRlVGltZUZpZWxkKGJsYW5rPVRydWUsIGRiX2luZGV4PVRydWUsIG51bGw9VHJ1ZSkpLAogICAgICAgICAgICAgICAgKCd1cGRhdGVkQXQnLCBtb2RlbHMuRGF0ZVRpbWVGaWVsZChibGFuaz1UcnVlLCBkYl9pbmRleD1UcnVlLCBudWxsPVRydWUpKSwKICAgICAgICAgICAgICAgICgnZGVsZXRlZEF0JywgbW9kZWxzLkRhdGVUaW1lRmllbGQoYmxhbms9VHJ1ZSwgZGJfaW5kZXg9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ25ld0lkJywgbW9kZWxzLlVVSURGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpKSwKICAgICAgICAgICAgICAgICgnZHYnLCBtb2RlbHMuSW50ZWdlckZpZWxkKCkpLAogICAgICAgICAgICAgICAgKCdzZW5kZXInLCBtb2RlbHMuSlNPTkZpZWxkKCkpLAogICAgICAgICAgICAgICAgKCdjcmVhdGVkQnknLCBtb2RlbHMuRm9yZWlnbktleShibGFuaz1UcnVlLCBkYl9jb2x1bW49J2NyZWF0ZWRCeScsIG51bGw9VHJ1ZSwgb25fZGVsZXRlPWRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24uU0VUX05VTEwsIHJlbGF0ZWRfbmFtZT0nKycsIHRvPSdfZGphbmdvX3NjaGVtYS51c2VyJykpLAogICAgICAgICAgICBdLAogICAgICAgICAgICBvcHRpb25zPXsKICAgICAgICAgICAgICAgICdkYl90YWJsZSc6ICdQcm9wZXJ0eVNjb3BlT3JnYW5pemF0aW9uRW1wbG95ZWUnLAogICAgICAgICAgICB9LAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5DcmVhdGVNb2RlbCgKICAgICAgICAgICAgbmFtZT0ncHJvcGVydHlzY29wZW9yZ2FuaXphdGlvbmVtcGxveWVlaGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIGZpZWxkcz1bCiAgICAgICAgICAgICAgICAoJ3Byb3BlcnR5U2NvcGUnLCBtb2RlbHMuVVVJREZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSkpLAogICAgICAgICAgICAgICAgKCdlbXBsb3llZScsIG1vZGVscy5VVUlERmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ2lkJywgbW9kZWxzLlVVSURGaWVsZChwcmltYXJ5X2tleT1UcnVlLCBzZXJpYWxpemU9RmFsc2UpKSwKICAgICAgICAgICAgICAgICgndicsIG1vZGVscy5JbnRlZ2VyRmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ2NyZWF0ZWRBdCcsIG1vZGVscy5EYXRlVGltZUZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSkpLAogICAgICAgICAgICAgICAgKCd1cGRhdGVkQXQnLCBtb2RlbHMuRGF0ZVRpbWVGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpKSwKICAgICAgICAgICAgICAgICgnY3JlYXRlZEJ5JywgbW9kZWxzLlVVSURGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpKSwKICAgICAgICAgICAgICAgICgndXBkYXRlZEJ5JywgbW9kZWxzLlVVSURGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpKSwKICAgICAgICAgICAgICAgICgnZGVsZXRlZEF0JywgbW9kZWxzLkRhdGVUaW1lRmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ25ld0lkJywgbW9kZWxzLkpTT05GaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpKSwKICAgICAgICAgICAgICAgICgnZHYnLCBtb2RlbHMuSW50ZWdlckZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSkpLAogICAgICAgICAgICAgICAgKCdzZW5kZXInLCBtb2RlbHMuSlNPTkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSkpLAogICAgICAgICAgICAgICAgKCdoaXN0b3J5X2RhdGUnLCBtb2RlbHMuRGF0ZVRpbWVGaWVsZCgpKSwKICAgICAgICAgICAgICAgICgnaGlzdG9yeV9hY3Rpb24nLCBtb2RlbHMuQ2hhckZpZWxkKGNob2ljZXM9WygnYycsICdjJyksICgndScsICd1JyksICgnZCcsICdkJyldLCBtYXhfbGVuZ3RoPTUwKSksCiAgICAgICAgICAgICAgICAoJ2hpc3RvcnlfaWQnLCBtb2RlbHMuVVVJREZpZWxkKGRiX2luZGV4PVRydWUpKSwKICAgICAgICAgICAgXSwKICAgICAgICAgICAgb3B0aW9ucz17CiAgICAgICAgICAgICAgICAnZGJfdGFibGUnOiAnUHJvcGVydHlTY29wZU9yZ2FuaXphdGlvbkVtcGxveWVlSGlzdG9yeVJlY29yZCcsCiAgICAgICAgICAgIH0sCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkNyZWF0ZU1vZGVsKAogICAgICAgICAgICBuYW1lPSdwcm9wZXJ0eXNjb3BlcHJvcGVydHknLAogICAgICAgICAgICBmaWVsZHM9WwogICAgICAgICAgICAgICAgKCdpZCcsIG1vZGVscy5VVUlERmllbGQocHJpbWFyeV9rZXk9VHJ1ZSwgc2VyaWFsaXplPUZhbHNlKSksCiAgICAgICAgICAgICAgICAoJ3YnLCBtb2RlbHMuSW50ZWdlckZpZWxkKGRlZmF1bHQ9MSkpLAogICAgICAgICAgICAgICAgKCdjcmVhdGVkQXQnLCBtb2RlbHMuRGF0ZVRpbWVGaWVsZChibGFuaz1UcnVlLCBkYl9pbmRleD1UcnVlLCBudWxsPVRydWUpKSwKICAgICAgICAgICAgICAgICgndXBkYXRlZEF0JywgbW9kZWxzLkRhdGVUaW1lRmllbGQoYmxhbms9VHJ1ZSwgZGJfaW5kZXg9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ2RlbGV0ZWRBdCcsIG1vZGVscy5EYXRlVGltZUZpZWxkKGJsYW5rPVRydWUsIGRiX2luZGV4PVRydWUsIG51bGw9VHJ1ZSkpLAogICAgICAgICAgICAgICAgKCduZXdJZCcsIG1vZGVscy5VVUlERmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ2R2JywgbW9kZWxzLkludGVnZXJGaWVsZCgpKSwKICAgICAgICAgICAgICAgICgnc2VuZGVyJywgbW9kZWxzLkpTT05GaWVsZCgpKSwKICAgICAgICAgICAgICAgICgnY3JlYXRlZEJ5JywgbW9kZWxzLkZvcmVpZ25LZXkoYmxhbms9VHJ1ZSwgZGJfY29sdW1uPSdjcmVhdGVkQnknLCBudWxsPVRydWUsIG9uX2RlbGV0ZT1kamFuZ28uZGIubW9kZWxzLmRlbGV0aW9uLlNFVF9OVUxMLCByZWxhdGVkX25hbWU9JysnLCB0bz0nX2RqYW5nb19zY2hlbWEudXNlcicpKSwKICAgICAgICAgICAgICAgICgncHJvcGVydHknLCBtb2RlbHMuRm9yZWlnbktleShkYl9jb2x1bW49J3Byb3BlcnR5Jywgb25fZGVsZXRlPWRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24uQ0FTQ0FERSwgcmVsYXRlZF9uYW1lPScrJywgdG89J19kamFuZ29fc2NoZW1hLnByb3BlcnR5JykpLAogICAgICAgICAgICAgICAgKCdwcm9wZXJ0eVNjb3BlJywgbW9kZWxzLkZvcmVpZ25LZXkoZGJfY29sdW1uPSdwcm9wZXJ0eVNjb3BlJywgb25fZGVsZXRlPWRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24uQ0FTQ0FERSwgcmVsYXRlZF9uYW1lPScrJywgdG89J19kamFuZ29fc2NoZW1hLnByb3BlcnR5c2NvcGUnKSksCiAgICAgICAgICAgICAgICAoJ3VwZGF0ZWRCeScsIG1vZGVscy5Gb3JlaWduS2V5KGJsYW5rPVRydWUsIGRiX2NvbHVtbj0ndXBkYXRlZEJ5JywgbnVsbD1UcnVlLCBvbl9kZWxldGU9ZGphbmdvLmRiLm1vZGVscy5kZWxldGlvbi5TRVRfTlVMTCwgcmVsYXRlZF9uYW1lPScrJywgdG89J19kamFuZ29fc2NoZW1hLnVzZXInKSksCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIG9wdGlvbnM9ewogICAgICAgICAgICAgICAgJ2RiX3RhYmxlJzogJ1Byb3BlcnR5U2NvcGVQcm9wZXJ0eScsCiAgICAgICAgICAgIH0sCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkNyZWF0ZU1vZGVsKAogICAgICAgICAgICBuYW1lPSdwcm9wZXJ0eXNjb3BlcHJvcGVydHloaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgZmllbGRzPVsKICAgICAgICAgICAgICAgICgncHJvcGVydHlTY29wZScsIG1vZGVscy5VVUlERmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ3Byb3BlcnR5JywgbW9kZWxzLlVVSURGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpKSwKICAgICAgICAgICAgICAgICgnaWQnLCBtb2RlbHMuVVVJREZpZWxkKHByaW1hcnlfa2V5PVRydWUsIHNlcmlhbGl6ZT1GYWxzZSkpLAogICAgICAgICAgICAgICAgKCd2JywgbW9kZWxzLkludGVnZXJGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpKSwKICAgICAgICAgICAgICAgICgnY3JlYXRlZEF0JywgbW9kZWxzLkRhdGVUaW1lRmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ3VwZGF0ZWRBdCcsIG1vZGVscy5EYXRlVGltZUZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSkpLAogICAgICAgICAgICAgICAgKCdjcmVhdGVkQnknLCBtb2RlbHMuVVVJREZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSkpLAogICAgICAgICAgICAgICAgKCd1cGRhdGVkQnknLCBtb2RlbHMuVVVJREZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSkpLAogICAgICAgICAgICAgICAgKCdkZWxldGVkQXQnLCBtb2RlbHMuRGF0ZVRpbWVGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpKSwKICAgICAgICAgICAgICAgICgnbmV3SWQnLCBtb2RlbHMuSlNPTkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSkpLAogICAgICAgICAgICAgICAgKCdkdicsIG1vZGVscy5JbnRlZ2VyRmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ3NlbmRlcicsIG1vZGVscy5KU09ORmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ2hpc3RvcnlfZGF0ZScsIG1vZGVscy5EYXRlVGltZUZpZWxkKCkpLAogICAgICAgICAgICAgICAgKCdoaXN0b3J5X2FjdGlvbicsIG1vZGVscy5DaGFyRmllbGQoY2hvaWNlcz1bKCdjJywgJ2MnKSwgKCd1JywgJ3UnKSwgKCdkJywgJ2QnKV0sIG1heF9sZW5ndGg9NTApKSwKICAgICAgICAgICAgICAgICgnaGlzdG9yeV9pZCcsIG1vZGVscy5VVUlERmllbGQoZGJfaW5kZXg9VHJ1ZSkpLAogICAgICAgICAgICBdLAogICAgICAgICAgICBvcHRpb25zPXsKICAgICAgICAgICAgICAgICdkYl90YWJsZSc6ICdQcm9wZXJ0eVNjb3BlUHJvcGVydHlIaXN0b3J5UmVjb3JkJywKICAgICAgICAgICAgfSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQ3JlYXRlTW9kZWwoCiAgICAgICAgICAgIG5hbWU9J3NwZWNpYWxpemF0aW9uc2NvcGUnLAogICAgICAgICAgICBmaWVsZHM9WwogICAgICAgICAgICAgICAgKCdpZCcsIG1vZGVscy5VVUlERmllbGQocHJpbWFyeV9rZXk9VHJ1ZSwgc2VyaWFsaXplPUZhbHNlKSksCiAgICAgICAgICAgICAgICAoJ3YnLCBtb2RlbHMuSW50ZWdlckZpZWxkKGRlZmF1bHQ9MSkpLAogICAgICAgICAgICAgICAgKCdjcmVhdGVkQXQnLCBtb2RlbHMuRGF0ZVRpbWVGaWVsZChibGFuaz1UcnVlLCBkYl9pbmRleD1UcnVlLCBudWxsPVRydWUpKSwKICAgICAgICAgICAgICAgICgndXBkYXRlZEF0JywgbW9kZWxzLkRhdGVUaW1lRmllbGQoYmxhbms9VHJ1ZSwgZGJfaW5kZXg9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ2RlbGV0ZWRBdCcsIG1vZGVscy5EYXRlVGltZUZpZWxkKGJsYW5rPVRydWUsIGRiX2luZGV4PVRydWUsIG51bGw9VHJ1ZSkpLAogICAgICAgICAgICAgICAgKCduZXdJZCcsIG1vZGVscy5VVUlERmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ2R2JywgbW9kZWxzLkludGVnZXJGaWVsZCgpKSwKICAgICAgICAgICAgICAgICgnc2VuZGVyJywgbW9kZWxzLkpTT05GaWVsZCgpKSwKICAgICAgICAgICAgICAgICgnY3JlYXRlZEJ5JywgbW9kZWxzLkZvcmVpZ25LZXkoYmxhbms9VHJ1ZSwgZGJfY29sdW1uPSdjcmVhdGVkQnknLCBudWxsPVRydWUsIG9uX2RlbGV0ZT1kamFuZ28uZGIubW9kZWxzLmRlbGV0aW9uLlNFVF9OVUxMLCByZWxhdGVkX25hbWU9JysnLCB0bz0nX2RqYW5nb19zY2hlbWEudXNlcicpKSwKICAgICAgICAgICAgXSwKICAgICAgICAgICAgb3B0aW9ucz17CiAgICAgICAgICAgICAgICAnZGJfdGFibGUnOiAnU3BlY2lhbGl6YXRpb25TY29wZScsCiAgICAgICAgICAgIH0sCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkNyZWF0ZU1vZGVsKAogICAgICAgICAgICBuYW1lPSdzcGVjaWFsaXphdGlvbnNjb3BlaGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIGZpZWxkcz1bCiAgICAgICAgICAgICAgICAoJ2VtcGxveWVlJywgbW9kZWxzLlVVSURGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpKSwKICAgICAgICAgICAgICAgICgnc3BlY2lhbGl6YXRpb24nLCBtb2RlbHMuVVVJREZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSkpLAogICAgICAgICAgICAgICAgKCdpZCcsIG1vZGVscy5VVUlERmllbGQocHJpbWFyeV9rZXk9VHJ1ZSwgc2VyaWFsaXplPUZhbHNlKSksCiAgICAgICAgICAgICAgICAoJ3YnLCBtb2RlbHMuSW50ZWdlckZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSkpLAogICAgICAgICAgICAgICAgKCdjcmVhdGVkQXQnLCBtb2RlbHMuRGF0ZVRpbWVGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpKSwKICAgICAgICAgICAgICAgICgndXBkYXRlZEF0JywgbW9kZWxzLkRhdGVUaW1lRmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ2NyZWF0ZWRCeScsIG1vZGVscy5VVUlERmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ3VwZGF0ZWRCeScsIG1vZGVscy5VVUlERmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ2RlbGV0ZWRBdCcsIG1vZGVscy5EYXRlVGltZUZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSkpLAogICAgICAgICAgICAgICAgKCduZXdJZCcsIG1vZGVscy5KU09ORmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ2R2JywgbW9kZWxzLkludGVnZXJGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpKSwKICAgICAgICAgICAgICAgICgnc2VuZGVyJywgbW9kZWxzLkpTT05GaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpKSwKICAgICAgICAgICAgICAgICgnaGlzdG9yeV9kYXRlJywgbW9kZWxzLkRhdGVUaW1lRmllbGQoKSksCiAgICAgICAgICAgICAgICAoJ2hpc3RvcnlfYWN0aW9uJywgbW9kZWxzLkNoYXJGaWVsZChjaG9pY2VzPVsoJ2MnLCAnYycpLCAoJ3UnLCAndScpLCAoJ2QnLCAnZCcpXSwgbWF4X2xlbmd0aD01MCkpLAogICAgICAgICAgICAgICAgKCdoaXN0b3J5X2lkJywgbW9kZWxzLlVVSURGaWVsZChkYl9pbmRleD1UcnVlKSksCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIG9wdGlvbnM9ewogICAgICAgICAgICAgICAgJ2RiX3RhYmxlJzogJ1NwZWNpYWxpemF0aW9uU2NvcGVIaXN0b3J5UmVjb3JkJywKICAgICAgICAgICAgfSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J29yZ2FuaXphdGlvbmVtcGxveWVlJywKICAgICAgICAgICAgbmFtZT0naGFzQWxsU3BlY2lhbGl6YXRpb25zJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkJvb2xlYW5GaWVsZChkZWZhdWx0PUZhbHNlKSwKICAgICAgICAgICAgcHJlc2VydmVfZGVmYXVsdD1GYWxzZSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J29yZ2FuaXphdGlvbmVtcGxveWVlaGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J2hhc0FsbFNwZWNpYWxpemF0aW9ucycsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5Cb29sZWFuRmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J29yZ2FuaXphdGlvbmVtcGxveWVlcm9sZScsCiAgICAgICAgICAgIG5hbWU9J2Nhbk1hbmFnZVByb3BlcnR5U2NvcGVzJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkJvb2xlYW5GaWVsZChkZWZhdWx0PUZhbHNlKSwKICAgICAgICAgICAgcHJlc2VydmVfZGVmYXVsdD1GYWxzZSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J29yZ2FuaXphdGlvbmVtcGxveWVlcm9sZScsCiAgICAgICAgICAgIG5hbWU9J3RpY2tldFZpc2liaWxpdHlUeXBlJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChkZWZhdWx0PSdvcmdhbml6YXRpb24nKSwKICAgICAgICAgICAgcHJlc2VydmVfZGVmYXVsdD1GYWxzZSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J29yZ2FuaXphdGlvbmVtcGxveWVlcm9sZWhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdjYW5NYW5hZ2VQcm9wZXJ0eVNjb3BlcycsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5Cb29sZWFuRmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J29yZ2FuaXphdGlvbmVtcGxveWVlcm9sZWhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSd0aWNrZXRWaXNpYmlsaXR5VHlwZScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5UZXh0RmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3NwZWNpYWxpemF0aW9uc2NvcGUnLAogICAgICAgICAgICBuYW1lPSdlbXBsb3llZScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5Gb3JlaWduS2V5KGRiX2NvbHVtbj0nZW1wbG95ZWUnLCBvbl9kZWxldGU9ZGphbmdvLmRiLm1vZGVscy5kZWxldGlvbi5DQVNDQURFLCByZWxhdGVkX25hbWU9JysnLCB0bz0nX2RqYW5nb19zY2hlbWEub3JnYW5pemF0aW9uZW1wbG95ZWUnKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3NwZWNpYWxpemF0aW9uc2NvcGUnLAogICAgICAgICAgICBuYW1lPSdzcGVjaWFsaXphdGlvbicsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5Gb3JlaWduS2V5KGRiX2NvbHVtbj0nc3BlY2lhbGl6YXRpb24nLCBvbl9kZWxldGU9ZGphbmdvLmRiLm1vZGVscy5kZWxldGlvbi5DQVNDQURFLCByZWxhdGVkX25hbWU9JysnLCB0bz0nX2RqYW5nb19zY2hlbWEudGlja2V0Y2F0ZWdvcnljbGFzc2lmaWVyJyksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdzcGVjaWFsaXphdGlvbnNjb3BlJywKICAgICAgICAgICAgbmFtZT0ndXBkYXRlZEJ5JywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkZvcmVpZ25LZXkoYmxhbms9VHJ1ZSwgZGJfY29sdW1uPSd1cGRhdGVkQnknLCBudWxsPVRydWUsIG9uX2RlbGV0ZT1kamFuZ28uZGIubW9kZWxzLmRlbGV0aW9uLlNFVF9OVUxMLCByZWxhdGVkX25hbWU9JysnLCB0bz0nX2RqYW5nb19zY2hlbWEudXNlcicpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ncHJvcGVydHlzY29wZW9yZ2FuaXphdGlvbmVtcGxveWVlJywKICAgICAgICAgICAgbmFtZT0nZW1wbG95ZWUnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRm9yZWlnbktleShkYl9jb2x1bW49J2VtcGxveWVlJywgb25fZGVsZXRlPWRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24uQ0FTQ0FERSwgcmVsYXRlZF9uYW1lPScrJywgdG89J19kamFuZ29fc2NoZW1hLm9yZ2FuaXphdGlvbmVtcGxveWVlJyksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdwcm9wZXJ0eXNjb3Blb3JnYW5pemF0aW9uZW1wbG95ZWUnLAogICAgICAgICAgICBuYW1lPSdwcm9wZXJ0eVNjb3BlJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkZvcmVpZ25LZXkoZGJfY29sdW1uPSdwcm9wZXJ0eVNjb3BlJywgb25fZGVsZXRlPWRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24uQ0FTQ0FERSwgcmVsYXRlZF9uYW1lPScrJywgdG89J19kamFuZ29fc2NoZW1hLnByb3BlcnR5c2NvcGUnKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3Byb3BlcnR5c2NvcGVvcmdhbml6YXRpb25lbXBsb3llZScsCiAgICAgICAgICAgIG5hbWU9J3VwZGF0ZWRCeScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5Gb3JlaWduS2V5KGJsYW5rPVRydWUsIGRiX2NvbHVtbj0ndXBkYXRlZEJ5JywgbnVsbD1UcnVlLCBvbl9kZWxldGU9ZGphbmdvLmRiLm1vZGVscy5kZWxldGlvbi5TRVRfTlVMTCwgcmVsYXRlZF9uYW1lPScrJywgdG89J19kamFuZ29fc2NoZW1hLnVzZXInKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkQ29uc3RyYWludCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nc3BlY2lhbGl6YXRpb25zY29wZScsCiAgICAgICAgICAgIGNvbnN0cmFpbnQ9bW9kZWxzLlVuaXF1ZUNvbnN0cmFpbnQoY29uZGl0aW9uPW1vZGVscy5RKCgnZGVsZXRlZEF0X19pc251bGwnLCBUcnVlKSksIGZpZWxkcz0oJ2VtcGxveWVlJywgJ3NwZWNpYWxpemF0aW9uJyksIG5hbWU9J3NwZWNpYWxpemF0aW9uX3Njb3BlX3VuaXF1ZV9lbXBsb3llZV9hbmRfc3BlY2lhbGl6YXRpb24nKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkQ29uc3RyYWludCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ncHJvcGVydHlzY29wZXByb3BlcnR5JywKICAgICAgICAgICAgY29uc3RyYWludD1tb2RlbHMuVW5pcXVlQ29uc3RyYWludChjb25kaXRpb249bW9kZWxzLlEoKCdkZWxldGVkQXRfX2lzbnVsbCcsIFRydWUpKSwgZmllbGRzPSgncHJvcGVydHlTY29wZScsICdwcm9wZXJ0eScpLCBuYW1lPSdwcm9wZXJ0eV9zY29wZV9wcm9wZXJ0eV91bmlxdWVfcHJvcGVydHlTY29wZV9hbmRfcHJvcGVydHknKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkQ29uc3RyYWludCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ncHJvcGVydHlzY29wZW9yZ2FuaXphdGlvbmVtcGxveWVlJywKICAgICAgICAgICAgY29uc3RyYWludD1tb2RlbHMuVW5pcXVlQ29uc3RyYWludChjb25kaXRpb249bW9kZWxzLlEoKCdkZWxldGVkQXRfX2lzbnVsbCcsIFRydWUpKSwgZmllbGRzPSgncHJvcGVydHlTY29wZScsICdlbXBsb3llZScpLCBuYW1lPSdwcm9wZXJ0eV9zY29wZV9vcmdhbml6YXRpb25fZW1wbG95ZWVfdW5pcXVlX3Byb3BlcnR5U2NvcGVfYW5kX2VtcGxveWVlJyksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkRlbGV0ZU1vZGVsKAogICAgICAgICAgICBuYW1lPSdvcmdhbml6YXRpb25lbXBsb3llZV9zcGVjaWFsaXphdGlvbnNfbWFueScsCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Create model propertyscope
--
CREATE TABLE "PropertyScope" ("name" text NOT NULL, "hasAllProperties" boolean NOT NULL, "hasAllEmployees" boolean NOT NULL, "id" uuid NOT NULL PRIMARY KEY, "v" integer NOT NULL, "createdAt" timestamp with time zone NULL, "updatedAt" timestamp with time zone NULL, "deletedAt" timestamp with time zone NULL, "newId" uuid NULL, "dv" integer NOT NULL, "sender" jsonb NOT NULL, "createdBy" uuid NULL, "organization" uuid NOT NULL, "updatedBy" uuid NULL);
--
-- Create model propertyscopehistoryrecord
--
CREATE TABLE "PropertyScopeHistoryRecord" ("name" text NULL, "organization" uuid NULL, "hasAllProperties" boolean NULL, "hasAllEmployees" boolean NULL, "id" uuid NOT NULL PRIMARY KEY, "v" integer NULL, "createdAt" timestamp with time zone NULL, "updatedAt" timestamp with time zone NULL, "createdBy" uuid NULL, "updatedBy" uuid NULL, "deletedAt" timestamp with time zone NULL, "newId" jsonb NULL, "dv" integer NULL, "sender" jsonb NULL, "history_date" timestamp with time zone NOT NULL, "history_action" varchar(50) NOT NULL, "history_id" uuid NOT NULL);
--
-- Create model propertyscopeorganizationemployee
--
CREATE TABLE "PropertyScopeOrganizationEmployee" ("id" uuid NOT NULL PRIMARY KEY, "v" integer NOT NULL, "createdAt" timestamp with time zone NULL, "updatedAt" timestamp with time zone NULL, "deletedAt" timestamp with time zone NULL, "newId" uuid NULL, "dv" integer NOT NULL, "sender" jsonb NOT NULL, "createdBy" uuid NULL);
--
-- Create model propertyscopeorganizationemployeehistoryrecord
--
CREATE TABLE "PropertyScopeOrganizationEmployeeHistoryRecord" ("propertyScope" uuid NULL, "employee" uuid NULL, "id" uuid NOT NULL PRIMARY KEY, "v" integer NULL, "createdAt" timestamp with time zone NULL, "updatedAt" timestamp with time zone NULL, "createdBy" uuid NULL, "updatedBy" uuid NULL, "deletedAt" timestamp with time zone NULL, "newId" jsonb NULL, "dv" integer NULL, "sender" jsonb NULL, "history_date" timestamp with time zone NOT NULL, "history_action" varchar(50) NOT NULL, "history_id" uuid NOT NULL);
--
-- Create model propertyscopeproperty
--
CREATE TABLE "PropertyScopeProperty" ("id" uuid NOT NULL PRIMARY KEY, "v" integer NOT NULL, "createdAt" timestamp with time zone NULL, "updatedAt" timestamp with time zone NULL, "deletedAt" timestamp with time zone NULL, "newId" uuid NULL, "dv" integer NOT NULL, "sender" jsonb NOT NULL, "createdBy" uuid NULL, "property" uuid NOT NULL, "propertyScope" uuid NOT NULL, "updatedBy" uuid NULL);
--
-- Create model propertyscopepropertyhistoryrecord
--
CREATE TABLE "PropertyScopePropertyHistoryRecord" ("propertyScope" uuid NULL, "property" uuid NULL, "id" uuid NOT NULL PRIMARY KEY, "v" integer NULL, "createdAt" timestamp with time zone NULL, "updatedAt" timestamp with time zone NULL, "createdBy" uuid NULL, "updatedBy" uuid NULL, "deletedAt" timestamp with time zone NULL, "newId" jsonb NULL, "dv" integer NULL, "sender" jsonb NULL, "history_date" timestamp with time zone NOT NULL, "history_action" varchar(50) NOT NULL, "history_id" uuid NOT NULL);
--
-- Create model specializationscope
--
CREATE TABLE "SpecializationScope" ("id" uuid NOT NULL PRIMARY KEY, "v" integer NOT NULL, "createdAt" timestamp with time zone NULL, "updatedAt" timestamp with time zone NULL, "deletedAt" timestamp with time zone NULL, "newId" uuid NULL, "dv" integer NOT NULL, "sender" jsonb NOT NULL, "createdBy" uuid NULL);
--
-- Create model specializationscopehistoryrecord
--
CREATE TABLE "SpecializationScopeHistoryRecord" ("employee" uuid NULL, "specialization" uuid NULL, "id" uuid NOT NULL PRIMARY KEY, "v" integer NULL, "createdAt" timestamp with time zone NULL, "updatedAt" timestamp with time zone NULL, "createdBy" uuid NULL, "updatedBy" uuid NULL, "deletedAt" timestamp with time zone NULL, "newId" jsonb NULL, "dv" integer NULL, "sender" jsonb NULL, "history_date" timestamp with time zone NOT NULL, "history_action" varchar(50) NOT NULL, "history_id" uuid NOT NULL);
--
-- Add field hasAllSpecializations to organizationemployee
--
ALTER TABLE "OrganizationEmployee" ADD COLUMN "hasAllSpecializations" boolean DEFAULT false NOT NULL;
ALTER TABLE "OrganizationEmployee" ALTER COLUMN "hasAllSpecializations" DROP DEFAULT;
--
-- Add field hasAllSpecializations to organizationemployeehistoryrecord
--
ALTER TABLE "OrganizationEmployeeHistoryRecord" ADD COLUMN "hasAllSpecializations" boolean NULL;
--
-- Add field canManagePropertyScopes to organizationemployeerole
--
ALTER TABLE "OrganizationEmployeeRole" ADD COLUMN "canManagePropertyScopes" boolean DEFAULT false NOT NULL;
ALTER TABLE "OrganizationEmployeeRole" ALTER COLUMN "canManagePropertyScopes" DROP DEFAULT;
--
-- Add field ticketVisibilityType to organizationemployeerole
--
ALTER TABLE "OrganizationEmployeeRole" ADD COLUMN "ticketVisibilityType" text DEFAULT 'organization' NOT NULL;
ALTER TABLE "OrganizationEmployeeRole" ALTER COLUMN "ticketVisibilityType" DROP DEFAULT;
--
-- Add field canManagePropertyScopes to organizationemployeerolehistoryrecord
--
ALTER TABLE "OrganizationEmployeeRoleHistoryRecord" ADD COLUMN "canManagePropertyScopes" boolean NULL;
--
-- Add field ticketVisibilityType to organizationemployeerolehistoryrecord
--
ALTER TABLE "OrganizationEmployeeRoleHistoryRecord" ADD COLUMN "ticketVisibilityType" text NULL;
--
-- Add field employee to specializationscope
--
ALTER TABLE "SpecializationScope" ADD COLUMN "employee" uuid NOT NULL CONSTRAINT "SpecializationScope_employee_e6435628_fk_Organizat" REFERENCES "OrganizationEmployee"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "SpecializationScope_employee_e6435628_fk_Organizat" IMMEDIATE;
--
-- Add field specialization to specializationscope
--
ALTER TABLE "SpecializationScope" ADD COLUMN "specialization" uuid NOT NULL CONSTRAINT "SpecializationScope_specialization_7cdc188b_fk_TicketCat" REFERENCES "TicketCategoryClassifier"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "SpecializationScope_specialization_7cdc188b_fk_TicketCat" IMMEDIATE;
--
-- Add field updatedBy to specializationscope
--
ALTER TABLE "SpecializationScope" ADD COLUMN "updatedBy" uuid NULL CONSTRAINT "SpecializationScope_updatedBy_7f085533_fk_User_id" REFERENCES "User"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "SpecializationScope_updatedBy_7f085533_fk_User_id" IMMEDIATE;
--
-- Add field employee to propertyscopeorganizationemployee
--
ALTER TABLE "PropertyScopeOrganizationEmployee" ADD COLUMN "employee" uuid NOT NULL CONSTRAINT "PropertyScopeOrganiz_employee_118907dc_fk_Organizat" REFERENCES "OrganizationEmployee"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "PropertyScopeOrganiz_employee_118907dc_fk_Organizat" IMMEDIATE;
--
-- Add field propertyScope to propertyscopeorganizationemployee
--
ALTER TABLE "PropertyScopeOrganizationEmployee" ADD COLUMN "propertyScope" uuid NOT NULL CONSTRAINT "PropertyScopeOrganiz_propertyScope_076ec80d_fk_PropertyS" REFERENCES "PropertyScope"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "PropertyScopeOrganiz_propertyScope_076ec80d_fk_PropertyS" IMMEDIATE;
--
-- Add field updatedBy to propertyscopeorganizationemployee
--
ALTER TABLE "PropertyScopeOrganizationEmployee" ADD COLUMN "updatedBy" uuid NULL CONSTRAINT "PropertyScopeOrganizationEmployee_updatedBy_6914815c_fk_User_id" REFERENCES "User"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "PropertyScopeOrganizationEmployee_updatedBy_6914815c_fk_User_id" IMMEDIATE;
--
-- Create constraint specialization_scope_unique_employee_and_specialization on model specializationscope
--
CREATE UNIQUE INDEX "specialization_scope_unique_employee_and_specialization" ON "SpecializationScope" ("employee", "specialization") WHERE "deletedAt" IS NULL;
--
-- Create constraint property_scope_property_unique_propertyScope_and_property on model propertyscopeproperty
--
CREATE UNIQUE INDEX "property_scope_property_unique_propertyScope_and_property" ON "PropertyScopeProperty" ("propertyScope", "property") WHERE "deletedAt" IS NULL;
--
-- Create constraint property_scope_organization_employee_unique_propertyScope_and_employee on model propertyscopeorganizationemployee
--
CREATE UNIQUE INDEX "property_scope_organization_employee_unique_propertyScope_and_employee" ON "PropertyScopeOrganizationEmployee" ("propertyScope", "employee") WHERE "deletedAt" IS NULL;

-- it's required for gen_random_uuid() function!
CREATE EXTENSION if not exists pgcrypto;
--
-- Move data from "OrganizationEmployee_specializations_many" to "SpecializationScope"
INSERT INTO "SpecializationScope" ("id", "dv", "v", "sender", "createdAt", "updatedAt", "employee", "specialization")
SELECT gen_random_uuid(), 1, 1, '{"dv": 1, "fingerprint": "migration"}'::json, now(), now(), specs."OrganizationEmployee_left_id", specs."TicketCategoryClassifier_right_id"
FROM "OrganizationEmployee_specializations_many" as specs;


--
-- Delete model organizationemployee_specializations_many
--
DROP TABLE "OrganizationEmployee_specializations_many" CASCADE;


ALTER TABLE "PropertyScope" ADD CONSTRAINT "PropertyScope_createdBy_3fb69231_fk_User_id" FOREIGN KEY ("createdBy") REFERENCES "User" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "PropertyScope" ADD CONSTRAINT "PropertyScope_organization_329d9730_fk_Organization_id" FOREIGN KEY ("organization") REFERENCES "Organization" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "PropertyScope" ADD CONSTRAINT "PropertyScope_updatedBy_1b952ecf_fk_User_id" FOREIGN KEY ("updatedBy") REFERENCES "User" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "PropertyScope_createdAt_16cb5372" ON "PropertyScope" ("createdAt");
CREATE INDEX "PropertyScope_updatedAt_56f8ae59" ON "PropertyScope" ("updatedAt");
CREATE INDEX "PropertyScope_deletedAt_a961c518" ON "PropertyScope" ("deletedAt");
CREATE INDEX "PropertyScope_createdBy_3fb69231" ON "PropertyScope" ("createdBy");
CREATE INDEX "PropertyScope_organization_329d9730" ON "PropertyScope" ("organization");
CREATE INDEX "PropertyScope_updatedBy_1b952ecf" ON "PropertyScope" ("updatedBy");
CREATE INDEX "PropertyScopeHistoryRecord_history_id_ed94ad04" ON "PropertyScopeHistoryRecord" ("history_id");
ALTER TABLE "PropertyScopeOrganizationEmployee" ADD CONSTRAINT "PropertyScopeOrganizationEmployee_createdBy_c1b8bfe8_fk_User_id" FOREIGN KEY ("createdBy") REFERENCES "User" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "PropertyScopeOrganizationEmployee_createdAt_c7985f5b" ON "PropertyScopeOrganizationEmployee" ("createdAt");
CREATE INDEX "PropertyScopeOrganizationEmployee_updatedAt_e953bf13" ON "PropertyScopeOrganizationEmployee" ("updatedAt");
CREATE INDEX "PropertyScopeOrganizationEmployee_deletedAt_4276a425" ON "PropertyScopeOrganizationEmployee" ("deletedAt");
CREATE INDEX "PropertyScopeOrganizationEmployee_createdBy_c1b8bfe8" ON "PropertyScopeOrganizationEmployee" ("createdBy");
CREATE INDEX "PropertyScopeOrganizationE_history_id_16e45b61" ON "PropertyScopeOrganizationEmployeeHistoryRecord" ("history_id");
ALTER TABLE "PropertyScopeProperty" ADD CONSTRAINT "PropertyScopeProperty_createdBy_ce29b95a_fk_User_id" FOREIGN KEY ("createdBy") REFERENCES "User" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "PropertyScopeProperty" ADD CONSTRAINT "PropertyScopeProperty_property_74dbfc06_fk_Property_id" FOREIGN KEY ("property") REFERENCES "Property" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "PropertyScopeProperty" ADD CONSTRAINT "PropertyScopePropert_propertyScope_0938a3e1_fk_PropertyS" FOREIGN KEY ("propertyScope") REFERENCES "PropertyScope" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "PropertyScopeProperty" ADD CONSTRAINT "PropertyScopeProperty_updatedBy_91fcf616_fk_User_id" FOREIGN KEY ("updatedBy") REFERENCES "User" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "PropertyScopeProperty_createdAt_bbb39a06" ON "PropertyScopeProperty" ("createdAt");
CREATE INDEX "PropertyScopeProperty_updatedAt_904a0d96" ON "PropertyScopeProperty" ("updatedAt");
CREATE INDEX "PropertyScopeProperty_deletedAt_07315922" ON "PropertyScopeProperty" ("deletedAt");
CREATE INDEX "PropertyScopeProperty_createdBy_ce29b95a" ON "PropertyScopeProperty" ("createdBy");
CREATE INDEX "PropertyScopeProperty_property_74dbfc06" ON "PropertyScopeProperty" ("property");
CREATE INDEX "PropertyScopeProperty_propertyScope_0938a3e1" ON "PropertyScopeProperty" ("propertyScope");
CREATE INDEX "PropertyScopeProperty_updatedBy_91fcf616" ON "PropertyScopeProperty" ("updatedBy");
CREATE INDEX "PropertyScopePropertyHistoryRecord_history_id_cdae15fe" ON "PropertyScopePropertyHistoryRecord" ("history_id");
ALTER TABLE "SpecializationScope" ADD CONSTRAINT "SpecializationScope_createdBy_3be1ca3d_fk_User_id" FOREIGN KEY ("createdBy") REFERENCES "User" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "SpecializationScope_createdAt_d13f0edf" ON "SpecializationScope" ("createdAt");
CREATE INDEX "SpecializationScope_updatedAt_92422ea1" ON "SpecializationScope" ("updatedAt");
CREATE INDEX "SpecializationScope_deletedAt_00b6301c" ON "SpecializationScope" ("deletedAt");
CREATE INDEX "SpecializationScope_createdBy_3be1ca3d" ON "SpecializationScope" ("createdBy");
CREATE INDEX "SpecializationScopeHistoryRecord_history_id_e0252a65" ON "SpecializationScopeHistoryRecord" ("history_id");
CREATE INDEX "SpecializationScope_employee_e6435628" ON "SpecializationScope" ("employee");
CREATE INDEX "SpecializationScope_specialization_7cdc188b" ON "SpecializationScope" ("specialization");
CREATE INDEX "SpecializationScope_updatedBy_7f085533" ON "SpecializationScope" ("updatedBy");
CREATE INDEX "PropertyScopeOrganizationEmployee_employee_118907dc" ON "PropertyScopeOrganizationEmployee" ("employee");
CREATE INDEX "PropertyScopeOrganizationEmployee_propertyScope_076ec80d" ON "PropertyScopeOrganizationEmployee" ("propertyScope");
CREATE INDEX "PropertyScopeOrganizationEmployee_updatedBy_6914815c" ON "PropertyScopeOrganizationEmployee" ("updatedBy");
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Delete model organizationemployee_specializations_many
--
CREATE TABLE "OrganizationEmployee_specializations_many" ("id" integer NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "OrganizationEmployee_left_id" uuid NOT NULL, "TicketCategoryClassifier_right_id" uuid NOT NULL);
--
-- Create constraint property_scope_organization_employee_unique_propertyScope_and_employee on model propertyscopeorganizationemployee
--
DROP INDEX IF EXISTS "property_scope_organization_employee_unique_propertyScope_and_employee";
--
-- Create constraint property_scope_property_unique_propertyScope_and_property on model propertyscopeproperty
--
DROP INDEX IF EXISTS "property_scope_property_unique_propertyScope_and_property";
--
-- Create constraint specialization_scope_unique_employee_and_specialization on model specializationscope
--
DROP INDEX IF EXISTS "specialization_scope_unique_employee_and_specialization";
--
-- Add field updatedBy to propertyscopeorganizationemployee
--
ALTER TABLE "PropertyScopeOrganizationEmployee" DROP COLUMN "updatedBy" CASCADE;
--
-- Add field propertyScope to propertyscopeorganizationemployee
--
ALTER TABLE "PropertyScopeOrganizationEmployee" DROP COLUMN "propertyScope" CASCADE;
--
-- Add field employee to propertyscopeorganizationemployee
--
ALTER TABLE "PropertyScopeOrganizationEmployee" DROP COLUMN "employee" CASCADE;
--
-- Add field updatedBy to specializationscope
--
ALTER TABLE "SpecializationScope" DROP COLUMN "updatedBy" CASCADE;
--
-- Add field specialization to specializationscope
--
ALTER TABLE "SpecializationScope" DROP COLUMN "specialization" CASCADE;
--
-- Add field employee to specializationscope
--
ALTER TABLE "SpecializationScope" DROP COLUMN "employee" CASCADE;
--
-- Add field ticketVisibilityType to organizationemployeerolehistoryrecord
--
ALTER TABLE "OrganizationEmployeeRoleHistoryRecord" DROP COLUMN "ticketVisibilityType" CASCADE;
--
-- Add field canManagePropertyScopes to organizationemployeerolehistoryrecord
--
ALTER TABLE "OrganizationEmployeeRoleHistoryRecord" DROP COLUMN "canManagePropertyScopes" CASCADE;
--
-- Add field ticketVisibilityType to organizationemployeerole
--
ALTER TABLE "OrganizationEmployeeRole" DROP COLUMN "ticketVisibilityType" CASCADE;
--
-- Add field canManagePropertyScopes to organizationemployeerole
--
ALTER TABLE "OrganizationEmployeeRole" DROP COLUMN "canManagePropertyScopes" CASCADE;
--
-- Add field hasAllSpecializations to organizationemployeehistoryrecord
--
ALTER TABLE "OrganizationEmployeeHistoryRecord" DROP COLUMN "hasAllSpecializations" CASCADE;
--
-- Add field hasAllSpecializations to organizationemployee
--
ALTER TABLE "OrganizationEmployee" DROP COLUMN "hasAllSpecializations" CASCADE;
--
-- Create model specializationscopehistoryrecord
--
DROP TABLE "SpecializationScopeHistoryRecord" CASCADE;
--
-- Create model specializationscope
--
DROP TABLE "SpecializationScope" CASCADE;
--
-- Create model propertyscopepropertyhistoryrecord
--
DROP TABLE "PropertyScopePropertyHistoryRecord" CASCADE;
--
-- Create model propertyscopeproperty
--
DROP TABLE "PropertyScopeProperty" CASCADE;
--
-- Create model propertyscopeorganizationemployeehistoryrecord
--
DROP TABLE "PropertyScopeOrganizationEmployeeHistoryRecord" CASCADE;
--
-- Create model propertyscopeorganizationemployee
--
DROP TABLE "PropertyScopeOrganizationEmployee" CASCADE;
--
-- Create model propertyscopehistoryrecord
--
DROP TABLE "PropertyScopeHistoryRecord" CASCADE;
--
-- Create model propertyscope
--
DROP TABLE "PropertyScope" CASCADE;
ALTER TABLE "OrganizationEmployee_specializations_many" ADD CONSTRAINT "OrganizationEmployee_OrganizationEmployee_cb80e37b_fk_Organizat" FOREIGN KEY ("OrganizationEmployee_left_id") REFERENCES "OrganizationEmployee" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "OrganizationEmployee_specializations_many" ADD CONSTRAINT "OrganizationEmployee_TicketCategoryClassi_ee1eb7bd_fk_TicketCat" FOREIGN KEY ("TicketCategoryClassifier_right_id") REFERENCES "TicketCategoryClassifier" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "OrganizationEmployee_speci_OrganizationEmployee_left__cb80e37b" ON "OrganizationEmployee_specializations_many" ("OrganizationEmployee_left_id");
CREATE INDEX "OrganizationEmployee_speci_TicketCategoryClassifier_r_ee1eb7bd" ON "OrganizationEmployee_specializations_many" ("TicketCategoryClassifier_right_id");
COMMIT;

    `)
}
