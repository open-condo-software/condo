// auto generated by kmigrator
// KMIGRATOR:0104_auto_20220224_0851:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi4xMCBvbiAyMDIyLTAyLTI0IDA4OjUxCgpmcm9tIGRqYW5nby5kYiBpbXBvcnQgbWlncmF0aW9ucywgbW9kZWxzCgoKY2xhc3MgTWlncmF0aW9uKG1pZ3JhdGlvbnMuTWlncmF0aW9uKToKCiAgICBkZXBlbmRlbmNpZXMgPSBbCiAgICAgICAgKCdfZGphbmdvX3NjaGVtYScsICcwMTAzX211bHRpcGF5bWVudF9leHBsaWNpdHNlcnZpY2VjaGFyZ2VfYW5kX21vcmUnKSwKICAgIF0KCiAgICBvcGVyYXRpb25zID0gWwogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldCcsCiAgICAgICAgICAgIG5hbWU9J3VuaXRUeXBlJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChkZWZhdWx0PSdmbGF0JyksCiAgICAgICAgICAgIHByZXNlcnZlX2RlZmF1bHQ9RmFsc2UsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBuYW1lPSd1bml0VHlwZUZyb20nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBuYW1lPSd1bml0VHlwZVRvJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J3VuaXRUeXBlJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field unitType to ticket
--
ALTER TABLE "Ticket" ADD COLUMN "unitType" text DEFAULT 'flat' NOT NULL;
ALTER TABLE "Ticket" ALTER COLUMN "unitType" DROP DEFAULT;
--
-- Add field unitTypeFrom to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "unitTypeFrom" text NULL;
--
-- Add field unitTypeTo to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "unitTypeTo" text NULL;
--
-- Add field unitType to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "unitType" text NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field unitType to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "unitType" CASCADE;
--
-- Add field unitTypeTo to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "unitTypeTo" CASCADE;
--
-- Add field unitTypeFrom to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "unitTypeFrom" CASCADE;
--
-- Add field unitType to ticket
--
ALTER TABLE "Ticket" DROP COLUMN "unitType" CASCADE;
COMMIT;

    `)
}
