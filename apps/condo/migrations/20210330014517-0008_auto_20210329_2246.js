// auto generated by kmigrator
// KMIGRATOR:0008_auto_20210329_2246:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMS4yIG9uIDIwMjEtMDMtMjkgMjI6NDYKCmltcG9ydCBkamFuZ28uY29udHJpYi5wb3N0Z3Jlcy5maWVsZHMuanNvbmIKZnJvbSBkamFuZ28uZGIgaW1wb3J0IG1pZ3JhdGlvbnMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAwMDdfYXV0b18yMDIxMDMxOF8wOTQ5JyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLlJlbmFtZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiaWxsaW5nYWNjb3VudCcsCiAgICAgICAgICAgIG9sZF9uYW1lPSdiaW5kaW5nSWQnLAogICAgICAgICAgICBuZXdfbmFtZT0nZ2xvYmFsSWQnLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW5hbWVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYmlsbGluZ2FjY291bnQnLAogICAgICAgICAgICBvbGRfbmFtZT0ndW5pdCcsCiAgICAgICAgICAgIG5ld19uYW1lPSd1bml0TmFtZScsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLlJlbmFtZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiaWxsaW5nYWNjb3VudGhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBvbGRfbmFtZT0nYmluZGluZ0lkJywKICAgICAgICAgICAgbmV3X25hbWU9J2dsb2JhbElkJywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuUmVuYW1lRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2JpbGxpbmdhY2NvdW50aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG9sZF9uYW1lPSd1bml0JywKICAgICAgICAgICAgbmV3X25hbWU9J3VuaXROYW1lJywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuUmVuYW1lRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2JpbGxpbmdwcm9wZXJ0eScsCiAgICAgICAgICAgIG9sZF9uYW1lPSdiaW5kaW5nSWQnLAogICAgICAgICAgICBuZXdfbmFtZT0nZ2xvYmFsSWQnLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW5hbWVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYmlsbGluZ3Byb3BlcnR5aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG9sZF9uYW1lPSdiaW5kaW5nSWQnLAogICAgICAgICAgICBuZXdfbmFtZT0nZ2xvYmFsSWQnLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndXNlcicsCiAgICAgICAgICAgIG5hbWU9J2RvYicsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd1c2VyaGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J2RvYicsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiaWxsaW5naW50ZWdyYXRpb24nLAogICAgICAgICAgICBuYW1lPSdzZW5kZXInLAogICAgICAgICAgICBmaWVsZD1kamFuZ28uY29udHJpYi5wb3N0Z3Jlcy5maWVsZHMuanNvbmIuSlNPTkZpZWxkKGRlZmF1bHQ9eydkdic6IDF9KSwKICAgICAgICAgICAgcHJlc2VydmVfZGVmYXVsdD1GYWxzZSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2JpbGxpbmdpbnRlZ3JhdGlvbmFjY2Vzc3JpZ2h0JywKICAgICAgICAgICAgbmFtZT0nc2VuZGVyJywKICAgICAgICAgICAgZmllbGQ9ZGphbmdvLmNvbnRyaWIucG9zdGdyZXMuZmllbGRzLmpzb25iLkpTT05GaWVsZChkZWZhdWx0PXsnZHYnOiAxfSksCiAgICAgICAgICAgIHByZXNlcnZlX2RlZmF1bHQ9RmFsc2UsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiaWxsaW5naW50ZWdyYXRpb25hY2Nlc3NyaWdodGhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdzZW5kZXInLAogICAgICAgICAgICBmaWVsZD1kamFuZ28uY29udHJpYi5wb3N0Z3Jlcy5maWVsZHMuanNvbmIuSlNPTkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiaWxsaW5naW50ZWdyYXRpb25oaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nc2VuZGVyJywKICAgICAgICAgICAgZmllbGQ9ZGphbmdvLmNvbnRyaWIucG9zdGdyZXMuZmllbGRzLmpzb25iLkpTT05GaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYmlsbGluZ21ldGVycmVzb3VyY2UnLAogICAgICAgICAgICBuYW1lPSdzZW5kZXInLAogICAgICAgICAgICBmaWVsZD1kamFuZ28uY29udHJpYi5wb3N0Z3Jlcy5maWVsZHMuanNvbmIuSlNPTkZpZWxkKGRlZmF1bHQ9eydkdic6IDF9KSwKICAgICAgICAgICAgcHJlc2VydmVfZGVmYXVsdD1GYWxzZSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2JpbGxpbmdtZXRlcnJlc291cmNlaGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J3NlbmRlcicsCiAgICAgICAgICAgIGZpZWxkPWRqYW5nby5jb250cmliLnBvc3RncmVzLmZpZWxkcy5qc29uYi5KU09ORmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgXQo=

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Rename field bindingId on billingaccount to globalId
--
ALTER TABLE "BillingAccount" RENAME COLUMN "bindingId" TO "globalId";
--
-- Rename field unit on billingaccount to unitName
--
ALTER TABLE "BillingAccount" RENAME COLUMN "unit" TO "unitName";
--
-- Rename field bindingId on billingaccounthistoryrecord to globalId
--
ALTER TABLE "BillingAccountHistoryRecord" RENAME COLUMN "bindingId" TO "globalId";
--
-- Rename field unit on billingaccounthistoryrecord to unitName
--
ALTER TABLE "BillingAccountHistoryRecord" RENAME COLUMN "unit" TO "unitName";
--
-- Rename field bindingId on billingproperty to globalId
--
ALTER TABLE "BillingProperty" RENAME COLUMN "bindingId" TO "globalId";
--
-- Rename field bindingId on billingpropertyhistoryrecord to globalId
--
ALTER TABLE "BillingPropertyHistoryRecord" RENAME COLUMN "bindingId" TO "globalId";
--
-- Remove field dob from user
--
ALTER TABLE "User" DROP COLUMN "dob" CASCADE;
--
-- Remove field dob from userhistoryrecord
--
ALTER TABLE "UserHistoryRecord" DROP COLUMN "dob" CASCADE;
--
-- Add field sender to billingintegration
--
ALTER TABLE "BillingIntegration" ADD COLUMN "sender" jsonb DEFAULT '{"dv": 1}' NOT NULL;
ALTER TABLE "BillingIntegration" ALTER COLUMN "sender" DROP DEFAULT;
--
-- Add field sender to billingintegrationaccessright
--
ALTER TABLE "BillingIntegrationAccessRight" ADD COLUMN "sender" jsonb DEFAULT '{"dv": 1}' NOT NULL;
ALTER TABLE "BillingIntegrationAccessRight" ALTER COLUMN "sender" DROP DEFAULT;
--
-- Add field sender to billingintegrationaccessrighthistoryrecord
--
ALTER TABLE "BillingIntegrationAccessRightHistoryRecord" ADD COLUMN "sender" jsonb NULL;
--
-- Add field sender to billingintegrationhistoryrecord
--
ALTER TABLE "BillingIntegrationHistoryRecord" ADD COLUMN "sender" jsonb NULL;
--
-- Add field sender to billingmeterresource
--
ALTER TABLE "BillingMeterResource" ADD COLUMN "sender" jsonb DEFAULT '{"dv": 1}' NOT NULL;
ALTER TABLE "BillingMeterResource" ALTER COLUMN "sender" DROP DEFAULT;
--
-- Add field sender to billingmeterresourcehistoryrecord
--
ALTER TABLE "BillingMeterResourceHistoryRecord" ADD COLUMN "sender" jsonb NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field sender to billingmeterresourcehistoryrecord
--
ALTER TABLE "BillingMeterResourceHistoryRecord" DROP COLUMN "sender" CASCADE;
--
-- Add field sender to billingmeterresource
--
ALTER TABLE "BillingMeterResource" DROP COLUMN "sender" CASCADE;
--
-- Add field sender to billingintegrationhistoryrecord
--
ALTER TABLE "BillingIntegrationHistoryRecord" DROP COLUMN "sender" CASCADE;
--
-- Add field sender to billingintegrationaccessrighthistoryrecord
--
ALTER TABLE "BillingIntegrationAccessRightHistoryRecord" DROP COLUMN "sender" CASCADE;
--
-- Add field sender to billingintegrationaccessright
--
ALTER TABLE "BillingIntegrationAccessRight" DROP COLUMN "sender" CASCADE;
--
-- Add field sender to billingintegration
--
ALTER TABLE "BillingIntegration" DROP COLUMN "sender" CASCADE;
--
-- Remove field dob from userhistoryrecord
--
ALTER TABLE "UserHistoryRecord" ADD COLUMN "dob" date NULL;
--
-- Remove field dob from user
--
ALTER TABLE "User" ADD COLUMN "dob" date NULL;
--
-- Rename field bindingId on billingpropertyhistoryrecord to globalId
--
ALTER TABLE "BillingPropertyHistoryRecord" RENAME COLUMN "globalId" TO "bindingId";
--
-- Rename field bindingId on billingproperty to globalId
--
ALTER TABLE "BillingProperty" RENAME COLUMN "globalId" TO "bindingId";
--
-- Rename field unit on billingaccounthistoryrecord to unitName
--
ALTER TABLE "BillingAccountHistoryRecord" RENAME COLUMN "unitName" TO "unit";
--
-- Rename field bindingId on billingaccounthistoryrecord to globalId
--
ALTER TABLE "BillingAccountHistoryRecord" RENAME COLUMN "globalId" TO "bindingId";
--
-- Rename field unit on billingaccount to unitName
--
ALTER TABLE "BillingAccount" RENAME COLUMN "unitName" TO "unit";
--
-- Rename field bindingId on billingaccount to globalId
--
ALTER TABLE "BillingAccount" RENAME COLUMN "globalId" TO "bindingId";
COMMIT;

    `)
}
