// auto generated by kmigrator
// KMIGRATOR:0453_contact_meta_contact_note_contacthistoryrecord_meta_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDUuMS40IG9uIDIwMjUtMDMtMDcgMTE6MDIKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzA0NTJfY29udGFjdF9jb21tdW5pdHlmZWVfYW5kX21vcmUnKSwKICAgIF0KCiAgICBvcGVyYXRpb25zID0gWwogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2NvbnRhY3QnLAogICAgICAgICAgICBuYW1lPSdtZXRhJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkpTT05GaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nY29udGFjdCcsCiAgICAgICAgICAgIG5hbWU9J25vdGUnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdjb250YWN0aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J21ldGEnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuSlNPTkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdjb250YWN0aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J25vdGUnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdkb2N1bWVudCcsCiAgICAgICAgICAgIG5hbWU9J21ldGEnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuSlNPTkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdkb2N1bWVudGhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdtZXRhJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkpTT05GaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field meta to contact
--
ALTER TABLE "Contact" ADD COLUMN "meta" jsonb NULL;
--
-- Add field note to contact
--
ALTER TABLE "Contact" ADD COLUMN "note" text NULL;
--
-- Add field meta to contacthistoryrecord
--
ALTER TABLE "ContactHistoryRecord" ADD COLUMN "meta" jsonb NULL;
--
-- Add field note to contacthistoryrecord
--
ALTER TABLE "ContactHistoryRecord" ADD COLUMN "note" text NULL;
--
-- Add field meta to document
--
ALTER TABLE "Document" ADD COLUMN "meta" jsonb NULL;
--
-- Add field meta to documenthistoryrecord
--
ALTER TABLE "DocumentHistoryRecord" ADD COLUMN "meta" jsonb NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field meta to documenthistoryrecord
--
ALTER TABLE "DocumentHistoryRecord" DROP COLUMN "meta" CASCADE;
--
-- Add field meta to document
--
ALTER TABLE "Document" DROP COLUMN "meta" CASCADE;
--
-- Add field note to contacthistoryrecord
--
ALTER TABLE "ContactHistoryRecord" DROP COLUMN "note" CASCADE;
--
-- Add field meta to contacthistoryrecord
--
ALTER TABLE "ContactHistoryRecord" DROP COLUMN "meta" CASCADE;
--
-- Add field note to contact
--
ALTER TABLE "Contact" DROP COLUMN "note" CASCADE;
--
-- Add field meta to contact
--
ALTER TABLE "Contact" DROP COLUMN "meta" CASCADE;
COMMIT;

    `)
}
