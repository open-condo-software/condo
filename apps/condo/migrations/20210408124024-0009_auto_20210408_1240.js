// auto generated by kmigrator
// KMIGRATOR:0009_auto_20210408_1240:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMS43IG9uIDIwMjEtMDQtMDggMTI6NDAKCmltcG9ydCBkamFuZ28uY29udHJpYi5wb3N0Z3Jlcy5maWVsZHMuanNvbmIKZnJvbSBkamFuZ28uZGIgaW1wb3J0IG1pZ3JhdGlvbnMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAwMDhfYXV0b18yMDIxMDMyOV8yMjQ2JyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdvcmdhbml6YXRpb24nLAogICAgICAgICAgICBuYW1lPSdkZWZhdWx0RW1wbG95ZWVSb2xlU3RhdHVzVHJhbnNpdGlvbnMnLAogICAgICAgICAgICBmaWVsZD1kamFuZ28uY29udHJpYi5wb3N0Z3Jlcy5maWVsZHMuanNvbmIuSlNPTkZpZWxkKGRlZmF1bHQ9eyc1YjlkZWNkNy03OTJjLTQyYmItYjE2ZC04MjIxNDJmZDJkNjknOiBbJzZlZjNhYmM0LTAyMmYtNDgxYi05MGZiLTg0MzAzNDVlYmZjMiddLCAnNmVmM2FiYzQtMDIyZi00ODFiLTkwZmItODQzMDM0NWViZmMyJzogWydhYTVlZDljMi05MGNhLTQwNDItODE5NC1kM2VkMjNjYjc5MTknLCAnZjBmYTAwOTMtOGQ4Ni00ZTY5LWFlMWEtNzBhMjkxNGRhODJmJ10sICdhYTVlZDljMi05MGNhLTQwNDItODE5NC1kM2VkMjNjYjc5MTknOiBbJ2MxNGE1OGUwLTZiNWQtNGVjMi1iOTFjLTk4MGE5MDUwOWM3ZicsICc1YjlkZWNkNy03OTJjLTQyYmItYjE2ZC04MjIxNDJmZDJkNjknLCAnNmVmM2FiYzQtMDIyZi00ODFiLTkwZmItODQzMDM0NWViZmMyJ10sICdjMTRhNThlMC02YjVkLTRlYzItYjkxYy05ODBhOTA1MDljN2YnOiBbJzZlZjNhYmM0LTAyMmYtNDgxYi05MGZiLTg0MzAzNDVlYmZjMiddLCAnZHYnOiAxLCAnZjBmYTAwOTMtOGQ4Ni00ZTY5LWFlMWEtNzBhMjkxNGRhODJmJzogW119KSwKICAgICAgICAgICAgcHJlc2VydmVfZGVmYXVsdD1GYWxzZSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J29yZ2FuaXphdGlvbicsCiAgICAgICAgICAgIG5hbWU9J3N0YXR1c1RyYW5zaXRpb25zJywKICAgICAgICAgICAgZmllbGQ9ZGphbmdvLmNvbnRyaWIucG9zdGdyZXMuZmllbGRzLmpzb25iLkpTT05GaWVsZChkZWZhdWx0PXsnNWI5ZGVjZDctNzkyYy00MmJiLWIxNmQtODIyMTQyZmQyZDY5JzogWyc2ZWYzYWJjNC0wMjJmLTQ4MWItOTBmYi04NDMwMzQ1ZWJmYzInXSwgJzZlZjNhYmM0LTAyMmYtNDgxYi05MGZiLTg0MzAzNDVlYmZjMic6IFsnYWE1ZWQ5YzItOTBjYS00MDQyLTgxOTQtZDNlZDIzY2I3OTE5JywgJ2YwZmEwMDkzLThkODYtNGU2OS1hZTFhLTcwYTI5MTRkYTgyZiddLCAnYWE1ZWQ5YzItOTBjYS00MDQyLTgxOTQtZDNlZDIzY2I3OTE5JzogWydjMTRhNThlMC02YjVkLTRlYzItYjkxYy05ODBhOTA1MDljN2YnLCAnNWI5ZGVjZDctNzkyYy00MmJiLWIxNmQtODIyMTQyZmQyZDY5JywgJzZlZjNhYmM0LTAyMmYtNDgxYi05MGZiLTg0MzAzNDVlYmZjMiddLCAnYzE0YTU4ZTAtNmI1ZC00ZWMyLWI5MWMtOTgwYTkwNTA5YzdmJzogWyc2ZWYzYWJjNC0wMjJmLTQ4MWItOTBmYi04NDMwMzQ1ZWJmYzInXSwgJ2R2JzogMSwgJ2YwZmEwMDkzLThkODYtNGU2OS1hZTFhLTcwYTI5MTRkYTgyZic6IFtdfSksCiAgICAgICAgICAgIHByZXNlcnZlX2RlZmF1bHQ9RmFsc2UsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdvcmdhbml6YXRpb25lbXBsb3llZXJvbGUnLAogICAgICAgICAgICBuYW1lPSdzdGF0dXNUcmFuc2l0aW9ucycsCiAgICAgICAgICAgIGZpZWxkPWRqYW5nby5jb250cmliLnBvc3RncmVzLmZpZWxkcy5qc29uYi5KU09ORmllbGQoZGVmYXVsdD17JzViOWRlY2Q3LTc5MmMtNDJiYi1iMTZkLTgyMjE0MmZkMmQ2OSc6IFsnNmVmM2FiYzQtMDIyZi00ODFiLTkwZmItODQzMDM0NWViZmMyJ10sICc2ZWYzYWJjNC0wMjJmLTQ4MWItOTBmYi04NDMwMzQ1ZWJmYzInOiBbJ2FhNWVkOWMyLTkwY2EtNDA0Mi04MTk0LWQzZWQyM2NiNzkxOScsICdmMGZhMDA5My04ZDg2LTRlNjktYWUxYS03MGEyOTE0ZGE4MmYnXSwgJ2FhNWVkOWMyLTkwY2EtNDA0Mi04MTk0LWQzZWQyM2NiNzkxOSc6IFsnYzE0YTU4ZTAtNmI1ZC00ZWMyLWI5MWMtOTgwYTkwNTA5YzdmJywgJzViOWRlY2Q3LTc5MmMtNDJiYi1iMTZkLTgyMjE0MmZkMmQ2OScsICc2ZWYzYWJjNC0wMjJmLTQ4MWItOTBmYi04NDMwMzQ1ZWJmYzInXSwgJ2MxNGE1OGUwLTZiNWQtNGVjMi1iOTFjLTk4MGE5MDUwOWM3Zic6IFsnNmVmM2FiYzQtMDIyZi00ODFiLTkwZmItODQzMDM0NWViZmMyJ10sICdkdic6IDEsICdmMGZhMDA5My04ZDg2LTRlNjktYWUxYS03MGEyOTE0ZGE4MmYnOiBbXX0pLAogICAgICAgICAgICBwcmVzZXJ2ZV9kZWZhdWx0PUZhbHNlLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nb3JnYW5pemF0aW9uZW1wbG95ZWVyb2xlaGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J3N0YXR1c1RyYW5zaXRpb25zJywKICAgICAgICAgICAgZmllbGQ9ZGphbmdvLmNvbnRyaWIucG9zdGdyZXMuZmllbGRzLmpzb25iLkpTT05GaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nb3JnYW5pemF0aW9uaGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J2RlZmF1bHRFbXBsb3llZVJvbGVTdGF0dXNUcmFuc2l0aW9ucycsCiAgICAgICAgICAgIGZpZWxkPWRqYW5nby5jb250cmliLnBvc3RncmVzLmZpZWxkcy5qc29uYi5KU09ORmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J29yZ2FuaXphdGlvbmhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdzdGF0dXNUcmFuc2l0aW9ucycsCiAgICAgICAgICAgIGZpZWxkPWRqYW5nby5jb250cmliLnBvc3RncmVzLmZpZWxkcy5qc29uYi5KU09ORmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgXQo=

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field defaultEmployeeRoleStatusTransitions to organization
--
ALTER TABLE "Organization" ADD COLUMN "defaultEmployeeRoleStatusTransitions" jsonb DEFAULT '{"5b9decd7-792c-42bb-b16d-822142fd2d69": ["6ef3abc4-022f-481b-90fb-8430345ebfc2"], "6ef3abc4-022f-481b-90fb-8430345ebfc2": ["aa5ed9c2-90ca-4042-8194-d3ed23cb7919", "f0fa0093-8d86-4e69-ae1a-70a2914da82f"], "aa5ed9c2-90ca-4042-8194-d3ed23cb7919": ["c14a58e0-6b5d-4ec2-b91c-980a90509c7f", "5b9decd7-792c-42bb-b16d-822142fd2d69", "6ef3abc4-022f-481b-90fb-8430345ebfc2"], "c14a58e0-6b5d-4ec2-b91c-980a90509c7f": ["6ef3abc4-022f-481b-90fb-8430345ebfc2"], "dv": 1, "f0fa0093-8d86-4e69-ae1a-70a2914da82f": []}' NOT NULL;
ALTER TABLE "Organization" ALTER COLUMN "defaultEmployeeRoleStatusTransitions" DROP DEFAULT;
--
-- Add field statusTransitions to organization
--
ALTER TABLE "Organization" ADD COLUMN "statusTransitions" jsonb DEFAULT '{"5b9decd7-792c-42bb-b16d-822142fd2d69": ["6ef3abc4-022f-481b-90fb-8430345ebfc2"], "6ef3abc4-022f-481b-90fb-8430345ebfc2": ["aa5ed9c2-90ca-4042-8194-d3ed23cb7919", "f0fa0093-8d86-4e69-ae1a-70a2914da82f"], "aa5ed9c2-90ca-4042-8194-d3ed23cb7919": ["c14a58e0-6b5d-4ec2-b91c-980a90509c7f", "5b9decd7-792c-42bb-b16d-822142fd2d69", "6ef3abc4-022f-481b-90fb-8430345ebfc2"], "c14a58e0-6b5d-4ec2-b91c-980a90509c7f": ["6ef3abc4-022f-481b-90fb-8430345ebfc2"], "dv": 1, "f0fa0093-8d86-4e69-ae1a-70a2914da82f": []}' NOT NULL;
ALTER TABLE "Organization" ALTER COLUMN "statusTransitions" DROP DEFAULT;
--
-- Add field statusTransitions to organizationemployeerole
--
ALTER TABLE "OrganizationEmployeeRole" ADD COLUMN "statusTransitions" jsonb DEFAULT '{"5b9decd7-792c-42bb-b16d-822142fd2d69": ["6ef3abc4-022f-481b-90fb-8430345ebfc2"], "6ef3abc4-022f-481b-90fb-8430345ebfc2": ["aa5ed9c2-90ca-4042-8194-d3ed23cb7919", "f0fa0093-8d86-4e69-ae1a-70a2914da82f"], "aa5ed9c2-90ca-4042-8194-d3ed23cb7919": ["c14a58e0-6b5d-4ec2-b91c-980a90509c7f", "5b9decd7-792c-42bb-b16d-822142fd2d69", "6ef3abc4-022f-481b-90fb-8430345ebfc2"], "c14a58e0-6b5d-4ec2-b91c-980a90509c7f": ["6ef3abc4-022f-481b-90fb-8430345ebfc2"], "dv": 1, "f0fa0093-8d86-4e69-ae1a-70a2914da82f": []}' NOT NULL;
ALTER TABLE "OrganizationEmployeeRole" ALTER COLUMN "statusTransitions" DROP DEFAULT;
--
-- Add field statusTransitions to organizationemployeerolehistoryrecord
--
ALTER TABLE "OrganizationEmployeeRoleHistoryRecord" ADD COLUMN "statusTransitions" jsonb NULL;
--
-- Add field defaultEmployeeRoleStatusTransitions to organizationhistoryrecord
--
ALTER TABLE "OrganizationHistoryRecord" ADD COLUMN "defaultEmployeeRoleStatusTransitions" jsonb NULL;
--
-- Add field statusTransitions to organizationhistoryrecord
--
ALTER TABLE "OrganizationHistoryRecord" ADD COLUMN "statusTransitions" jsonb NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field statusTransitions to organizationhistoryrecord
--
ALTER TABLE "OrganizationHistoryRecord" DROP COLUMN "statusTransitions" CASCADE;
--
-- Add field defaultEmployeeRoleStatusTransitions to organizationhistoryrecord
--
ALTER TABLE "OrganizationHistoryRecord" DROP COLUMN "defaultEmployeeRoleStatusTransitions" CASCADE;
--
-- Add field statusTransitions to organizationemployeerolehistoryrecord
--
ALTER TABLE "OrganizationEmployeeRoleHistoryRecord" DROP COLUMN "statusTransitions" CASCADE;
--
-- Add field statusTransitions to organizationemployeerole
--
ALTER TABLE "OrganizationEmployeeRole" DROP COLUMN "statusTransitions" CASCADE;
--
-- Add field statusTransitions to organization
--
ALTER TABLE "Organization" DROP COLUMN "statusTransitions" CASCADE;
--
-- Add field defaultEmployeeRoleStatusTransitions to organization
--
ALTER TABLE "Organization" DROP COLUMN "defaultEmployeeRoleStatusTransitions" CASCADE;
COMMIT;

    `)
}
