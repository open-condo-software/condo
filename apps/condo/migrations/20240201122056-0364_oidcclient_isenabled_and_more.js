// auto generated by kmigrator
// KMIGRATOR:0364_oidcclient_isenabled_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMS41IG9uIDIwMjQtMDItMDEgMDc6MjEKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAzNjNfYXV0b18yMDI0MDEyOV8wNTI4JyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdvaWRjY2xpZW50JywKICAgICAgICAgICAgbmFtZT0naXNFbmFibGVkJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkJvb2xlYW5GaWVsZChkZWZhdWx0PVRydWUpLAogICAgICAgICAgICBwcmVzZXJ2ZV9kZWZhdWx0PUZhbHNlLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nb2lkY2NsaWVudGhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdpc0VuYWJsZWQnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuQm9vbGVhbkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field isEnabled to oidcclient
--
ALTER TABLE "OidcClient" ADD COLUMN "isEnabled" boolean DEFAULT true NOT NULL;
ALTER TABLE "OidcClient" ALTER COLUMN "isEnabled" DROP DEFAULT;
--
-- Add field isEnabled to oidcclienthistoryrecord
--
ALTER TABLE "OidcClientHistoryRecord" ADD COLUMN "isEnabled" boolean NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field isEnabled to oidcclienthistoryrecord
--
ALTER TABLE "OidcClientHistoryRecord" DROP COLUMN "isEnabled" CASCADE;
--
-- Add field isEnabled to oidcclient
--
ALTER TABLE "OidcClient" DROP COLUMN "isEnabled" CASCADE;
COMMIT;

    `)
}
