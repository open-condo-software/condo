// auto generated by kmigrator
// KMIGRATOR:0350_alter_marketitemfile_marketitem:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi41IG9uIDIwMjMtMTItMDQgMDk6NDYKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKaW1wb3J0IGRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24KCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAzNDlfYmlsbGluZ3JlY2VpcHRoaXN0b3J5cmVjb3JkX2lzcGF5YWJsZScpLAogICAgXQoKICAgIG9wZXJhdGlvbnMgPSBbCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdtYXJrZXRpdGVtZmlsZScsCiAgICAgICAgICAgIG5hbWU9J21hcmtldEl0ZW0nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRm9yZWlnbktleShibGFuaz1UcnVlLCBkYl9jb2x1bW49J21hcmtldEl0ZW0nLCBudWxsPVRydWUsIG9uX2RlbGV0ZT1kamFuZ28uZGIubW9kZWxzLmRlbGV0aW9uLlNFVF9OVUxMLCByZWxhdGVkX25hbWU9JysnLCB0bz0nX2RqYW5nb19zY2hlbWEubWFya2V0aXRlbScpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field marketItem on marketitemfile
--
SET CONSTRAINTS "MarketItemFile_marketItem_064e20ca_fk_MarketItem_id" IMMEDIATE; ALTER TABLE "MarketItemFile" DROP CONSTRAINT "MarketItemFile_marketItem_064e20ca_fk_MarketItem_id";
ALTER TABLE "MarketItemFile" ALTER COLUMN "marketItem" DROP NOT NULL;
ALTER TABLE "MarketItemFile" ADD CONSTRAINT "MarketItemFile_marketItem_064e20ca_fk_MarketItem_id" FOREIGN KEY ("marketItem") REFERENCES "MarketItem" ("id") DEFERRABLE INITIALLY DEFERRED;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field marketItem on marketitemfile
--
SET CONSTRAINTS "MarketItemFile_marketItem_064e20ca_fk_MarketItem_id" IMMEDIATE; ALTER TABLE "MarketItemFile" DROP CONSTRAINT "MarketItemFile_marketItem_064e20ca_fk_MarketItem_id";
ALTER TABLE "MarketItemFile" ALTER COLUMN "marketItem" SET NOT NULL;
ALTER TABLE "MarketItemFile" ADD CONSTRAINT "MarketItemFile_marketItem_064e20ca_fk_MarketItem_id" FOREIGN KEY ("marketItem") REFERENCES "MarketItem" ("id") DEFERRABLE INITIALLY DEFERRED;
COMMIT;

    `)
}
