// auto generated by kmigrator
// KMIGRATOR:0423_billingaccount_billingaccount_number_deletedat:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMi4xMyBvbiAyMDI0LTA5LTE5IDA4OjU5CgppbXBvcnQgZGphbmdvLmNvbnRyaWIucG9zdGdyZXMuaW5kZXhlcwpmcm9tIGRqYW5nby5kYiBpbXBvcnQgbWlncmF0aW9ucwoKCmNsYXNzIE1pZ3JhdGlvbihtaWdyYXRpb25zLk1pZ3JhdGlvbik6CgogICAgZGVwZW5kZW5jaWVzID0gWwogICAgICAgICgnX2RqYW5nb19zY2hlbWEnLCAnMDQyMl9tZXRlcnJlYWRpbmdfYmlsbGluZ3N0YXR1c19hbmRfbW9yZScpLAogICAgXQoKICAgIG9wZXJhdGlvbnMgPSBbCiAgICAgICAgbWlncmF0aW9ucy5BZGRJbmRleCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYmlsbGluZ2FjY291bnQnLAogICAgICAgICAgICBpbmRleD1kamFuZ28uY29udHJpYi5wb3N0Z3Jlcy5pbmRleGVzLkJUcmVlSW5kZXgoZmllbGRzPVsnbnVtYmVyJywgJ2RlbGV0ZWRBdCddLCBuYW1lPSdiaWxsaW5nQWNjb3VudF9udW1iZXJfZGVsZXRlZEF0JyksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- [CUSTOM] Set Statement Timeout to some large amount - 25 min (25 * 60 => 1500 sec)
--
SET statement_timeout = '1500s';    
--
-- Create index billingAccount_number_deletedAt on field(s) number, deletedAt of model billingaccount
--
CREATE INDEX IF NOT EXISTS "billingAccount_number_deletedAt" ON "BillingAccount" USING btree ("number", "deletedAt");
--
-- [CUSTOM] Revert Statement Timeout to default amount - 10 secs
--
SET statement_timeout = '10s';
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- [CUSTOM] Set Statement Timeout to some large amount - 25 min (25 * 60 => 1500 sec)
--
SET statement_timeout = '1500s';
--
-- Create index billingAccount_number_deletedAt on field(s) number, deletedAt of model billingaccount
--
DROP INDEX IF EXISTS "billingAccount_number_deletedAt";
--
-- [CUSTOM] Revert Statement Timeout to default amount - 10 secs
--
SET statement_timeout = '10s';
COMMIT;

    `)
}
