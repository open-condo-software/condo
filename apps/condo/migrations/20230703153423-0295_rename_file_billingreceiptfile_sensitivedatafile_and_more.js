// auto generated by kmigrator
// KMIGRATOR:0295_rename_file_billingreceiptfile_sensitivedatafile_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMS4zIG9uIDIwMjMtMDctMDMgMTA6MzQKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAyOTRfYjJiYXBwX2ljb25fYjJiYXBwX21lbnVjYXRlZ29yeV9hbmRfbW9yZScpLAogICAgXQoKICAgIG9wZXJhdGlvbnMgPSBbCiAgICAgICAgbWlncmF0aW9ucy5SZW5hbWVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYmlsbGluZ3JlY2VpcHRmaWxlJywKICAgICAgICAgICAgb2xkX25hbWU9J2ZpbGUnLAogICAgICAgICAgICBuZXdfbmFtZT0nc2Vuc2l0aXZlRGF0YUZpbGUnLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYmlsbGluZ3JlY2VpcHRmaWxlJywKICAgICAgICAgICAgbmFtZT0ncHVibGljRGF0YUZpbGUnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuSlNPTkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiaWxsaW5ncmVjZWlwdGZpbGVoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0ncHVibGljRGF0YUZpbGUnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuSlNPTkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiaWxsaW5ncmVjZWlwdGZpbGVoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nc2Vuc2l0aXZlRGF0YUZpbGUnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuSlNPTkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Rename field file on billingreceiptfile to sensitiveDataFile
--
ALTER TABLE "BillingReceiptFile" RENAME COLUMN "file" TO "sensitiveDataFile";
--
-- Add field publicDataFile to billingreceiptfile
--
ALTER TABLE "BillingReceiptFile" ADD COLUMN "publicDataFile" jsonb NULL;
--
-- Add field publicDataFile to billingreceiptfilehistoryrecord
--
ALTER TABLE "BillingReceiptFileHistoryRecord" ADD COLUMN "publicDataFile" jsonb NULL;
--
-- Add field sensitiveDataFile to billingreceiptfilehistoryrecord
--
ALTER TABLE "BillingReceiptFileHistoryRecord" ADD COLUMN "sensitiveDataFile" jsonb NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field sensitiveDataFile to billingreceiptfilehistoryrecord
--
ALTER TABLE "BillingReceiptFileHistoryRecord" DROP COLUMN "sensitiveDataFile" CASCADE;
--
-- Add field publicDataFile to billingreceiptfilehistoryrecord
--
ALTER TABLE "BillingReceiptFileHistoryRecord" DROP COLUMN "publicDataFile" CASCADE;
--
-- Add field publicDataFile to billingreceiptfile
--
ALTER TABLE "BillingReceiptFile" DROP COLUMN "publicDataFile" CASCADE;
--
-- Rename field file on billingreceiptfile to sensitiveDataFile
--
ALTER TABLE "BillingReceiptFile" RENAME COLUMN "sensitiveDataFile" TO "file";
COMMIT;

    `)
}
