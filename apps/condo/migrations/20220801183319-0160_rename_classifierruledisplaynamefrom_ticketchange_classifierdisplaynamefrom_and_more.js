// auto generated by kmigrator
// KMIGRATOR:0160_rename_classifierruledisplaynamefrom_ticketchange_classifierdisplaynamefrom_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMC40IG9uIDIwMjItMDgtMDEgMTM6MzMKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKaW1wb3J0IGRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24KCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAxNTlfYXV0b18yMDIyMDcyOF8yMTAwJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLlJlbmFtZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBvbGRfbmFtZT0nY2xhc3NpZmllclJ1bGVEaXNwbGF5TmFtZUZyb20nLAogICAgICAgICAgICBuZXdfbmFtZT0nY2xhc3NpZmllckRpc3BsYXlOYW1lRnJvbScsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLlJlbmFtZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBvbGRfbmFtZT0nY2xhc3NpZmllclJ1bGVEaXNwbGF5TmFtZVRvJywKICAgICAgICAgICAgbmV3X25hbWU9J2NsYXNzaWZpZXJEaXNwbGF5TmFtZVRvJywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuUmVuYW1lRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGNoYW5nZScsCiAgICAgICAgICAgIG9sZF9uYW1lPSdjbGFzc2lmaWVyUnVsZUlkRnJvbScsCiAgICAgICAgICAgIG5ld19uYW1lPSdjbGFzc2lmaWVySWRGcm9tJywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuUmVuYW1lRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGNoYW5nZScsCiAgICAgICAgICAgIG9sZF9uYW1lPSdjbGFzc2lmaWVyUnVsZUlkVG8nLAogICAgICAgICAgICBuZXdfbmFtZT0nY2xhc3NpZmllcklkVG8nLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW5hbWVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG9sZF9uYW1lPSdjbGFzc2lmaWVyUnVsZScsCiAgICAgICAgICAgIG5ld19uYW1lPSdjbGFzc2lmaWVyJywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuUmVtb3ZlRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldCcsCiAgICAgICAgICAgIG5hbWU9J2NsYXNzaWZpZXJSdWxlJywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldCcsCiAgICAgICAgICAgIG5hbWU9J2NsYXNzaWZpZXInLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRm9yZWlnbktleShibGFuaz1UcnVlLCBkYl9jb2x1bW49J2NsYXNzaWZpZXInLCBudWxsPVRydWUsIG9uX2RlbGV0ZT1kamFuZ28uZGIubW9kZWxzLmRlbGV0aW9uLlBST1RFQ1QsIHJlbGF0ZWRfbmFtZT0nKycsIHRvPSdfZGphbmdvX3NjaGVtYS50aWNrZXRjbGFzc2lmaWVycnVsZScpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0JywKICAgICAgICAgICAgbmFtZT0ncGxhY2VDbGFzc2lmaWVyJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkZvcmVpZ25LZXkoYmxhbms9VHJ1ZSwgZGJfY29sdW1uPSdwbGFjZUNsYXNzaWZpZXInLCBudWxsPVRydWUsIG9uX2RlbGV0ZT1kamFuZ28uZGIubW9kZWxzLmRlbGV0aW9uLlBST1RFQ1QsIHJlbGF0ZWRfbmFtZT0nKycsIHRvPSdfZGphbmdvX3NjaGVtYS50aWNrZXRwbGFjZWNsYXNzaWZpZXInKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldCcsCiAgICAgICAgICAgIG5hbWU9J3Byb2JsZW1DbGFzc2lmaWVyJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkZvcmVpZ25LZXkoYmxhbms9VHJ1ZSwgZGJfY29sdW1uPSdwcm9ibGVtQ2xhc3NpZmllcicsIG51bGw9VHJ1ZSwgb25fZGVsZXRlPWRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24uUFJPVEVDVCwgcmVsYXRlZF9uYW1lPScrJywgdG89J19kamFuZ29fc2NoZW1hLnRpY2tldHByb2JsZW1jbGFzc2lmaWVyJyksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0ncGxhY2VDbGFzc2lmaWVyJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlVVSURGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J3Byb2JsZW1DbGFzc2lmaWVyJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlVVSURGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Rename field classifierRuleDisplayNameFrom on ticketchange to classifierDisplayNameFrom
--
ALTER TABLE "TicketChange" RENAME COLUMN "classifierRuleDisplayNameFrom" TO "classifierDisplayNameFrom";
--
-- Rename field classifierRuleDisplayNameTo on ticketchange to classifierDisplayNameTo
--
ALTER TABLE "TicketChange" RENAME COLUMN "classifierRuleDisplayNameTo" TO "classifierDisplayNameTo";
--
-- Rename field classifierRuleIdFrom on ticketchange to classifierIdFrom
--
ALTER TABLE "TicketChange" RENAME COLUMN "classifierRuleIdFrom" TO "classifierIdFrom";
--
-- Rename field classifierRuleIdTo on ticketchange to classifierIdTo
--
ALTER TABLE "TicketChange" RENAME COLUMN "classifierRuleIdTo" TO "classifierIdTo";
--
-- Rename field classifierRule on tickethistoryrecord to classifier
--
ALTER TABLE "TicketHistoryRecord" RENAME COLUMN "classifierRule" TO "classifier";
--
-- Remove field classifierRule from ticket
--
SET CONSTRAINTS "Ticket_classifierRule_f7a8dbc1_fk_TicketClassifierRule_id" IMMEDIATE; ALTER TABLE "Ticket" DROP CONSTRAINT "Ticket_classifierRule_f7a8dbc1_fk_TicketClassifierRule_id";
ALTER TABLE "Ticket" DROP COLUMN "classifierRule" CASCADE;
--
-- Add field classifier to ticket
--
ALTER TABLE "Ticket" ADD COLUMN "classifier" uuid NULL CONSTRAINT "Ticket_classifier_7a786997_fk_TicketClassifierRule_id" REFERENCES "TicketClassifierRule"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "Ticket_classifier_7a786997_fk_TicketClassifierRule_id" IMMEDIATE;
--
-- Add field placeClassifier to ticket
--
ALTER TABLE "Ticket" ADD COLUMN "placeClassifier" uuid NULL CONSTRAINT "Ticket_placeClassifier_01e3ec3a_fk_TicketPlaceClassifier_id" REFERENCES "TicketPlaceClassifier"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "Ticket_placeClassifier_01e3ec3a_fk_TicketPlaceClassifier_id" IMMEDIATE;
--
-- Add field problemClassifier to ticket
--
ALTER TABLE "Ticket" ADD COLUMN "problemClassifier" uuid NULL CONSTRAINT "Ticket_problemClassifier_f1bfcd39_fk_TicketProblemClassifier_id" REFERENCES "TicketProblemClassifier"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "Ticket_problemClassifier_f1bfcd39_fk_TicketProblemClassifier_id" IMMEDIATE;
--
-- Add field placeClassifier to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "placeClassifier" uuid NULL;
--
-- Add field problemClassifier to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "problemClassifier" uuid NULL;
CREATE INDEX "Ticket_classifier_7a786997" ON "Ticket" ("classifier");
CREATE INDEX "Ticket_placeClassifier_01e3ec3a" ON "Ticket" ("placeClassifier");
CREATE INDEX "Ticket_problemClassifier_f1bfcd39" ON "Ticket" ("problemClassifier");
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field problemClassifier to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "problemClassifier" CASCADE;
--
-- Add field placeClassifier to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "placeClassifier" CASCADE;
--
-- Add field problemClassifier to ticket
--
ALTER TABLE "Ticket" DROP COLUMN "problemClassifier" CASCADE;
--
-- Add field placeClassifier to ticket
--
ALTER TABLE "Ticket" DROP COLUMN "placeClassifier" CASCADE;
--
-- Add field classifier to ticket
--
ALTER TABLE "Ticket" DROP COLUMN "classifier" CASCADE;
--
-- Remove field classifierRule from ticket
--
ALTER TABLE "Ticket" ADD COLUMN "classifierRule" uuid NULL CONSTRAINT "Ticket_classifierRule_f7a8dbc1_fk_TicketClassifierRule_id" REFERENCES "TicketClassifierRule"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "Ticket_classifierRule_f7a8dbc1_fk_TicketClassifierRule_id" IMMEDIATE;
--
-- Rename field classifierRule on tickethistoryrecord to classifier
--
ALTER TABLE "TicketHistoryRecord" RENAME COLUMN "classifier" TO "classifierRule";
--
-- Rename field classifierRuleIdTo on ticketchange to classifierIdTo
--
ALTER TABLE "TicketChange" RENAME COLUMN "classifierIdTo" TO "classifierRuleIdTo";
--
-- Rename field classifierRuleIdFrom on ticketchange to classifierIdFrom
--
ALTER TABLE "TicketChange" RENAME COLUMN "classifierIdFrom" TO "classifierRuleIdFrom";
--
-- Rename field classifierRuleDisplayNameTo on ticketchange to classifierDisplayNameTo
--
ALTER TABLE "TicketChange" RENAME COLUMN "classifierDisplayNameTo" TO "classifierRuleDisplayNameTo";
--
-- Rename field classifierRuleDisplayNameFrom on ticketchange to classifierDisplayNameFrom
--
ALTER TABLE "TicketChange" RENAME COLUMN "classifierDisplayNameFrom" TO "classifierRuleDisplayNameFrom";
CREATE INDEX "Ticket_classifierRule_f7a8dbc1" ON "Ticket" ("classifierRule");
COMMIT;

    `)
}
