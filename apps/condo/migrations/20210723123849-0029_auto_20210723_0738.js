// auto generated by kmigrator
// KMIGRATOR:0029_auto_20210723_0738:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi41IG9uIDIwMjEtMDctMjMgMDc6MzgKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zCgoKY2xhc3MgTWlncmF0aW9uKG1pZ3JhdGlvbnMuTWlncmF0aW9uKToKCiAgICBkZXBlbmRlbmNpZXMgPSBbCiAgICAgICAgKCdfZGphbmdvX3NjaGVtYScsICcwMDI4X2F1dG9fMjAyMTA3MjJfMTQwMycpLAogICAgXQoKICAgIG9wZXJhdGlvbnMgPSBbCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0JywKICAgICAgICAgICAgbmFtZT0nY2xhc3NpZmllcicsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBuYW1lPSdjbGFzc2lmaWVyRGlzcGxheU5hbWVGcm9tJywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuUmVtb3ZlRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGNoYW5nZScsCiAgICAgICAgICAgIG5hbWU9J2NsYXNzaWZpZXJEaXNwbGF5TmFtZVRvJywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuUmVtb3ZlRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGNoYW5nZScsCiAgICAgICAgICAgIG5hbWU9J2NsYXNzaWZpZXJJZEZyb20nLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0nY2xhc3NpZmllcklkVG8nLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J2NsYXNzaWZpZXInLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Remove field classifier from ticket
--
ALTER TABLE "Ticket" DROP COLUMN "classifier" CASCADE;
--
-- Remove field classifierDisplayNameFrom from ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "classifierDisplayNameFrom" CASCADE;
--
-- Remove field classifierDisplayNameTo from ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "classifierDisplayNameTo" CASCADE;
--
-- Remove field classifierIdFrom from ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "classifierIdFrom" CASCADE;
--
-- Remove field classifierIdTo from ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "classifierIdTo" CASCADE;
--
-- Remove field classifier from tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "classifier" CASCADE;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Remove field classifier from tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "classifier" uuid NULL;
--
-- Remove field classifierIdTo from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "classifierIdTo" uuid NULL;
--
-- Remove field classifierIdFrom from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "classifierIdFrom" uuid NULL;
--
-- Remove field classifierDisplayNameTo from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "classifierDisplayNameTo" text NULL;
--
-- Remove field classifierDisplayNameFrom from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "classifierDisplayNameFrom" text NULL;
--
-- Remove field classifier from ticket
--
ALTER TABLE "Ticket" ADD COLUMN "classifier" uuid NOT NULL CONSTRAINT "Ticket_classifier_7a786997_fk_TicketClassifier_id" REFERENCES "TicketClassifier"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "Ticket_classifier_7a786997_fk_TicketClassifier_id" IMMEDIATE;
CREATE INDEX "Ticket_classifier_7a786997" ON "Ticket" ("classifier");
COMMIT;

    `)
}
