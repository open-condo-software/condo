// auto generated by kmigrator
// KMIGRATOR:0044_auto_20210818_0953:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi41IG9uIDIwMjEtMDgtMTggMDk6NTMKCmltcG9ydCBkamFuZ28uY29udHJpYi5wb3N0Z3Jlcy5maWVsZHMuanNvbmIKZnJvbSBkamFuZ28uZGIgaW1wb3J0IG1pZ3JhdGlvbnMsIG1vZGVscwoKCmNsYXNzIE1pZ3JhdGlvbihtaWdyYXRpb25zLk1pZ3JhdGlvbik6CgogICAgZGVwZW5kZW5jaWVzID0gWwogICAgICAgICgnX2RqYW5nb19zY2hlbWEnLCAnMDA0M19hdXRvXzIwMjEwODE3XzExMTcnKSwKICAgIF0KCiAgICBvcGVyYXRpb25zID0gWwogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2JpbGxpbmdpbnRlZ3JhdGlvbicsCiAgICAgICAgICAgIG5hbWU9J2NvbnRleHREZWZhdWx0U3RhdHVzJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChkZWZhdWx0PSdJblByb2dyZXNzJyksCiAgICAgICAgICAgIHByZXNlcnZlX2RlZmF1bHQ9RmFsc2UsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiaWxsaW5naW50ZWdyYXRpb25oaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nY29udGV4dERlZmF1bHRTdGF0dXMnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiaWxsaW5naW50ZWdyYXRpb25vcmdhbml6YXRpb25jb250ZXh0JywKICAgICAgICAgICAgbmFtZT0nbGFzdFJlcG9ydCcsCiAgICAgICAgICAgIGZpZWxkPWRqYW5nby5jb250cmliLnBvc3RncmVzLmZpZWxkcy5qc29uYi5KU09ORmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2JpbGxpbmdpbnRlZ3JhdGlvbm9yZ2FuaXphdGlvbmNvbnRleHRoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nbGFzdFJlcG9ydCcsCiAgICAgICAgICAgIGZpZWxkPWRqYW5nby5jb250cmliLnBvc3RncmVzLmZpZWxkcy5qc29uYi5KU09ORmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgXQo=

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field contextDefaultStatus to billingintegration
--
ALTER TABLE "BillingIntegration" ADD COLUMN "contextDefaultStatus" text DEFAULT 'InProgress' NOT NULL;
ALTER TABLE "BillingIntegration" ALTER COLUMN "contextDefaultStatus" DROP DEFAULT;
--
-- Add field contextDefaultStatus to billingintegrationhistoryrecord
--
ALTER TABLE "BillingIntegrationHistoryRecord" ADD COLUMN "contextDefaultStatus" text NULL;
--
-- Add field lastReport to billingintegrationorganizationcontext
--
ALTER TABLE "BillingIntegrationOrganizationContext" ADD COLUMN "lastReport" jsonb NULL;
--
-- Add field lastReport to billingintegrationorganizationcontexthistoryrecord
--
ALTER TABLE "BillingIntegrationOrganizationContextHistoryRecord" ADD COLUMN "lastReport" jsonb NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field lastReport to billingintegrationorganizationcontexthistoryrecord
--
ALTER TABLE "BillingIntegrationOrganizationContextHistoryRecord" DROP COLUMN "lastReport" CASCADE;
--
-- Add field lastReport to billingintegrationorganizationcontext
--
ALTER TABLE "BillingIntegrationOrganizationContext" DROP COLUMN "lastReport" CASCADE;
--
-- Add field contextDefaultStatus to billingintegrationhistoryrecord
--
ALTER TABLE "BillingIntegrationHistoryRecord" DROP COLUMN "contextDefaultStatus" CASCADE;
--
-- Add field contextDefaultStatus to billingintegration
--
ALTER TABLE "BillingIntegration" DROP COLUMN "contextDefaultStatus" CASCADE;
COMMIT;

    `)
}
