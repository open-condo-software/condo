// auto generated by kmigrator
// KMIGRATOR:0286_newsitemscope_type_newsitemscopehistoryrecord_type:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMC4xIG9uIDIwMjMtMDYtMjAgMTI6MDgKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAyODVfcmVtb3ZlX2FjcXVpcmluZ2ludGVncmF0aW9uX2FwcHVybF9hbmRfbW9yZScpLAogICAgXQoKICAgIG9wZXJhdGlvbnMgPSBbCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nbmV3c2l0ZW1zY29wZScsCiAgICAgICAgICAgIG5hbWU9J3R5cGUnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuQ2hhckZpZWxkKGNob2ljZXM9WygndW5rbm93bicsICd1bmtub3duJyksICgnb3JnYW5pemF0aW9uJywgJ29yZ2FuaXphdGlvbicpLCAoJ3Byb3BlcnR5JywgJ3Byb3BlcnR5JyksICgncHJvcGVydHlfdW5pdFR5cGUnLCAncHJvcGVydHlfdW5pdFR5cGUnKSwgKCdwcm9wZXJ0eV91bml0VHlwZV91bml0TmFtZScsICdwcm9wZXJ0eV91bml0VHlwZV91bml0TmFtZScpXSwgZGVmYXVsdD0ndW5rbm93bicsIG1heF9sZW5ndGg9NTApLAogICAgICAgICAgICBwcmVzZXJ2ZV9kZWZhdWx0PUZhbHNlLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nbmV3c2l0ZW1zY29wZWhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSd0eXBlJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field type to newsitemscope
--
ALTER TABLE "NewsItemScope" ADD COLUMN "type" varchar(50) DEFAULT 'unknown' NOT NULL;
ALTER TABLE "NewsItemScope" ALTER COLUMN "type" DROP DEFAULT;
--
-- Add field type to newsitemscopehistoryrecord
--
ALTER TABLE "NewsItemScopeHistoryRecord" ADD COLUMN "type" text NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field type to newsitemscopehistoryrecord
--
ALTER TABLE "NewsItemScopeHistoryRecord" DROP COLUMN "type" CASCADE;
--
-- Add field type to newsitemscope
--
ALTER TABLE "NewsItemScope" DROP COLUMN "type" CASCADE;
COMMIT;

    `)
}
