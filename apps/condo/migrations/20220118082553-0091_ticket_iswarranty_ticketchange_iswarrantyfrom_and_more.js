// auto generated by kmigrator
// KMIGRATOR:0091_ticket_iswarranty_ticketchange_iswarrantyfrom_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMC4xIG9uIDIwMjItMDEtMTggMDM6MjcKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAwOTBfYWx0ZXJfbWV0ZXJyZWFkaW5nc291cmNlX3R5cGUnKSwKICAgIF0KCiAgICBvcGVyYXRpb25zID0gWwogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldCcsCiAgICAgICAgICAgIG5hbWU9J2lzV2FycmFudHknLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuQm9vbGVhbkZpZWxkKGRlZmF1bHQ9RmFsc2UpLAogICAgICAgICAgICBwcmVzZXJ2ZV9kZWZhdWx0PUZhbHNlLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0naXNXYXJyYW50eUZyb20nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuQm9vbGVhbkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBuYW1lPSdpc1dhcnJhbnR5VG8nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuQm9vbGVhbkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0naXNXYXJyYW50eScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5Cb29sZWFuRmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgXQo=

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field isWarranty to ticket
--
ALTER TABLE "Ticket" ADD COLUMN "isWarranty" boolean DEFAULT false NOT NULL;
ALTER TABLE "Ticket" ALTER COLUMN "isWarranty" DROP DEFAULT;
--
-- Add field isWarrantyFrom to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "isWarrantyFrom" boolean NULL;
--
-- Add field isWarrantyTo to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "isWarrantyTo" boolean NULL;
--
-- Add field isWarranty to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "isWarranty" boolean NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field isWarranty to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "isWarranty" CASCADE;
--
-- Add field isWarrantyTo to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "isWarrantyTo" CASCADE;
--
-- Add field isWarrantyFrom to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "isWarrantyFrom" CASCADE;
--
-- Add field isWarranty to ticket
--
ALTER TABLE "Ticket" DROP COLUMN "isWarranty" CASCADE;
COMMIT;

    `)
}
