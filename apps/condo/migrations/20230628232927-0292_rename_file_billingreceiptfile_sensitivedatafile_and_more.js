// auto generated by kmigrator
// KMIGRATOR:0292_rename_file_billingreceiptfile_sensitivedatafile_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMS4zIG9uIDIwMjMtMDYtMjggMTg6MjkKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAyOTFfYXV0b18yMDIzMDYyOF8wNjAyJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLlJlbmFtZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiaWxsaW5ncmVjZWlwdGZpbGUnLAogICAgICAgICAgICBvbGRfbmFtZT0nZmlsZScsCiAgICAgICAgICAgIG5ld19uYW1lPSdzZW5zaXRpdmVEYXRhRmlsZScsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiaWxsaW5ncmVjZWlwdGZpbGUnLAogICAgICAgICAgICBuYW1lPSdwdWJsaWNEYXRhRmlsZScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5KU09ORmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2JpbGxpbmdyZWNlaXB0ZmlsZWhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdwdWJsaWNEYXRhRmlsZScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5KU09ORmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2JpbGxpbmdyZWNlaXB0ZmlsZWhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdzZW5zaXRpdmVEYXRhRmlsZScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5KU09ORmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgXQo=

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Rename field file on billingreceiptfile to sensitiveDataFile
--
ALTER TABLE "BillingReceiptFile" RENAME COLUMN "file" TO "sensitiveDataFile";
--
-- Add field publicDataFile to billingreceiptfile
--
ALTER TABLE "BillingReceiptFile" ADD COLUMN "publicDataFile" jsonb NULL;
--
-- Add field publicDataFile to billingreceiptfilehistoryrecord
--
ALTER TABLE "BillingReceiptFileHistoryRecord" ADD COLUMN "publicDataFile" jsonb NULL;
--
-- Add field sensitiveDataFile to billingreceiptfilehistoryrecord
--
ALTER TABLE "BillingReceiptFileHistoryRecord" ADD COLUMN "sensitiveDataFile" jsonb NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field sensitiveDataFile to billingreceiptfilehistoryrecord
--
ALTER TABLE "BillingReceiptFileHistoryRecord" DROP COLUMN "sensitiveDataFile" CASCADE;
--
-- Add field publicDataFile to billingreceiptfilehistoryrecord
--
ALTER TABLE "BillingReceiptFileHistoryRecord" DROP COLUMN "publicDataFile" CASCADE;
--
-- Add field publicDataFile to billingreceiptfile
--
ALTER TABLE "BillingReceiptFile" DROP COLUMN "publicDataFile" CASCADE;
--
-- Rename field file on billingreceiptfile to sensitiveDataFile
--
ALTER TABLE "BillingReceiptFile" RENAME COLUMN "sensitiveDataFile" TO "file";
COMMIT;

    `)
}
