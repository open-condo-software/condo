// auto generated by kmigrator
// KMIGRATOR:0032_auto_20210802_1443:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi41IG9uIDIwMjEtMDgtMDIgMDk6NDMNCg0KaW1wb3J0IGRqYW5nby5jb250cmliLnBvc3RncmVzLmZpZWxkcy5qc29uYg0KZnJvbSBkamFuZ28uZGIgaW1wb3J0IG1pZ3JhdGlvbnMsIG1vZGVscw0KDQoNCmNsYXNzIE1pZ3JhdGlvbihtaWdyYXRpb25zLk1pZ3JhdGlvbik6DQoNCiAgICBkZXBlbmRlbmNpZXMgPSBbDQogICAgICAgICgnX2RqYW5nb19zY2hlbWEnLCAnMDAzMV9vcmdhbml6YXRpb25saW5rX29yZ2FuaXphdGlvbmxpbmtoaXN0b3J5cmVjb3JkJyksDQogICAgXQ0KDQogICAgb3BlcmF0aW9ucyA9IFsNCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgNCiAgICAgICAgICAgIG1vZGVsX25hbWU9J29yZ2FuaXphdGlvbmVtcGxveWVlcm9sZScsDQogICAgICAgICAgICBuYW1lPSdkZXNjcmlwdGlvbicsDQogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGRlZmF1bHQ9Tm9uZSksDQogICAgICAgICAgICBwcmVzZXJ2ZV9kZWZhdWx0PUZhbHNlLA0KICAgICAgICApLA0KICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKA0KICAgICAgICAgICAgbW9kZWxfbmFtZT0nb3JnYW5pemF0aW9uZW1wbG95ZWVyb2xlaGlzdG9yeXJlY29yZCcsDQogICAgICAgICAgICBuYW1lPSdkZXNjcmlwdGlvbicsDQogICAgICAgICAgICBmaWVsZD1kamFuZ28uY29udHJpYi5wb3N0Z3Jlcy5maWVsZHMuanNvbmIuSlNPTkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksDQogICAgICAgICksDQogICAgICAgIG1pZ3JhdGlvbnMuQWx0ZXJGaWVsZCgNCiAgICAgICAgICAgIG1vZGVsX25hbWU9J29yZ2FuaXphdGlvbmVtcGxveWVlcm9sZWhpc3RvcnlyZWNvcmQnLA0KICAgICAgICAgICAgbmFtZT0nbmFtZScsDQogICAgICAgICAgICBmaWVsZD1kamFuZ28uY29udHJpYi5wb3N0Z3Jlcy5maWVsZHMuanNvbmIuSlNPTkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksDQogICAgICAgICksDQogICAgXQ0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field description to organizationemployeerole
--
ALTER TABLE "OrganizationEmployeeRole" ADD COLUMN "description" text NOT NULL;
--
-- Add field description to organizationemployeerolehistoryrecord
--
ALTER TABLE "OrganizationEmployeeRoleHistoryRecord" ADD COLUMN "description" jsonb NULL;
--
-- Alter field name on organizationemployeerolehistoryrecord
--
ALTER TABLE "OrganizationEmployeeRoleHistoryRecord" ALTER COLUMN "name" TYPE jsonb USING "name"::jsonb;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field name on organizationemployeerolehistoryrecord
--
ALTER TABLE "OrganizationEmployeeRoleHistoryRecord" ALTER COLUMN "name" TYPE text USING "name"::text;
--
-- Add field description to organizationemployeerolehistoryrecord
--
ALTER TABLE "OrganizationEmployeeRoleHistoryRecord" DROP COLUMN "description" CASCADE;
--
-- Add field description to organizationemployeerole
--
ALTER TABLE "OrganizationEmployeeRole" DROP COLUMN "description" CASCADE;
COMMIT;

    `)
}
