// auto generated by kmigrator
// KMIGRATOR:0217_ticket_isautoclassified_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMSBvbiAyMDIzLTAyLTA2IDEwOjU4Cgpmcm9tIGRqYW5nby5kYiBpbXBvcnQgbWlncmF0aW9ucywgbW9kZWxzCgoKY2xhc3MgTWlncmF0aW9uKG1pZ3JhdGlvbnMuTWlncmF0aW9uKToKCiAgICBkZXBlbmRlbmNpZXMgPSBbCiAgICAgICAgKCdfZGphbmdvX3NjaGVtYScsICcwMjE2X2F1dG9fMjAyMzAyMDNfMDUzOCcpLAogICAgXQoKICAgIG9wZXJhdGlvbnMgPSBbCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0JywKICAgICAgICAgICAgbmFtZT0naXNBdXRvQ2xhc3NpZmllZCcsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5Cb29sZWFuRmllbGQoZGVmYXVsdD1GYWxzZSksCiAgICAgICAgICAgIHByZXNlcnZlX2RlZmF1bHQ9RmFsc2UsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0naXNBdXRvQ2xhc3NpZmllZCcsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5Cb29sZWFuRmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgXQo=

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field isAutoClassified to ticket
--
ALTER TABLE "Ticket" ADD COLUMN "isAutoClassified" boolean DEFAULT false NOT NULL;
ALTER TABLE "Ticket" ALTER COLUMN "isAutoClassified" DROP DEFAULT;
--
-- Add field isAutoClassified to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "isAutoClassified" boolean NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field isAutoClassified to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "isAutoClassified" CASCADE;
--
-- Add field isAutoClassified to ticket
--
ALTER TABLE "Ticket" DROP COLUMN "isAutoClassified" CASCADE;
COMMIT;

    `)
}
