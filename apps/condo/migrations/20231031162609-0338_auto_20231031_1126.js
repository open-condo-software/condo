// auto generated by kmigrator
// KMIGRATOR:0338_auto_20231031_1126:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi41IG9uIDIwMjMtMTAtMzEgMTE6MjYKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKaW1wb3J0IGRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24KCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAzMzdfaW52b2ljZV9wYXltZW50dHlwZV9pbnZvaWNlaGlzdG9yeXJlY29yZF9wYXltZW50dHlwZScpLAogICAgXQoKICAgIG9wZXJhdGlvbnMgPSBbCiAgICAgICAgbWlncmF0aW9ucy5DcmVhdGVNb2RlbCgKICAgICAgICAgICAgbmFtZT0ndGVsZWdyYW11c2VyY2hhdGhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBmaWVsZHM9WwogICAgICAgICAgICAgICAgKCd1c2VyJywgbW9kZWxzLlVVSURGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpKSwKICAgICAgICAgICAgICAgICgndGVsZWdyYW1DaGF0SWQnLCBtb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSkpLAogICAgICAgICAgICAgICAgKCdpZCcsIG1vZGVscy5VVUlERmllbGQocHJpbWFyeV9rZXk9VHJ1ZSwgc2VyaWFsaXplPUZhbHNlKSksCiAgICAgICAgICAgICAgICAoJ3YnLCBtb2RlbHMuSW50ZWdlckZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSkpLAogICAgICAgICAgICAgICAgKCdjcmVhdGVkQXQnLCBtb2RlbHMuRGF0ZVRpbWVGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpKSwKICAgICAgICAgICAgICAgICgndXBkYXRlZEF0JywgbW9kZWxzLkRhdGVUaW1lRmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ2NyZWF0ZWRCeScsIG1vZGVscy5VVUlERmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ3VwZGF0ZWRCeScsIG1vZGVscy5VVUlERmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ2RlbGV0ZWRBdCcsIG1vZGVscy5EYXRlVGltZUZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSkpLAogICAgICAgICAgICAgICAgKCduZXdJZCcsIG1vZGVscy5KU09ORmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ2R2JywgbW9kZWxzLkludGVnZXJGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpKSwKICAgICAgICAgICAgICAgICgnc2VuZGVyJywgbW9kZWxzLkpTT05GaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpKSwKICAgICAgICAgICAgICAgICgnaGlzdG9yeV9kYXRlJywgbW9kZWxzLkRhdGVUaW1lRmllbGQoKSksCiAgICAgICAgICAgICAgICAoJ2hpc3RvcnlfYWN0aW9uJywgbW9kZWxzLkNoYXJGaWVsZChjaG9pY2VzPVsoJ2MnLCAnYycpLCAoJ3UnLCAndScpLCAoJ2QnLCAnZCcpXSwgbWF4X2xlbmd0aD01MCkpLAogICAgICAgICAgICAgICAgKCdoaXN0b3J5X2lkJywgbW9kZWxzLlVVSURGaWVsZChkYl9pbmRleD1UcnVlKSksCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIG9wdGlvbnM9ewogICAgICAgICAgICAgICAgJ2RiX3RhYmxlJzogJ1RlbGVncmFtVXNlckNoYXRIaXN0b3J5UmVjb3JkJywKICAgICAgICAgICAgfSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWx0ZXJGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nbm90aWZpY2F0aW9udXNlcnNldHRpbmcnLAogICAgICAgICAgICBuYW1lPSdtZXNzYWdlVHlwZScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5DaGFyRmllbGQoYmxhbms9VHJ1ZSwgY2hvaWNlcz1bKCdUSUNLRVRfQ1JFQVRFRCcsICdUSUNLRVRfQ1JFQVRFRCcpLCAoJ1RJQ0tFVF9DT01NRU5UX0NSRUFURUQnLCAnVElDS0VUX0NPTU1FTlRfQ1JFQVRFRCcpLCAoJ0lOVklURV9ORVdfRU1QTE9ZRUUnLCAnSU5WSVRFX05FV19FTVBMT1lFRScpLCAoJ1NIQVJFX1RJQ0tFVCcsICdTSEFSRV9USUNLRVQnKSwgKCdCQU5LX0FDQ09VTlRfQ1JFQVRJT05fUkVRVUVTVCcsICdCQU5LX0FDQ09VTlRfQ1JFQVRJT05fUkVRVUVTVCcpLCAoJ0RJUlRZX0lOVklURV9ORVdfRU1QTE9ZRUVfU01TJywgJ0RJUlRZX0lOVklURV9ORVdfRU1QTE9ZRUVfU01TJyksICgnRElSVFlfSU5WSVRFX05FV19FTVBMT1lFRV9FTUFJTCcsICdESVJUWV9JTlZJVEVfTkVXX0VNUExPWUVFX0VNQUlMJyksICgnUkVHSVNURVJfTkVXX1VTRVInLCAnUkVHSVNURVJfTkVXX1VTRVInKSwgKCdSRVNFVF9QQVNTV09SRCcsICdSRVNFVF9QQVNTV09SRCcpLCAoJ1NNU19WRVJJRlknLCAnU01TX1ZFUklGWScpLCAoJ0RFVkVMT1BFUl9JTVBPUlRBTlRfTk9URV9UWVBFJywgJ0RFVkVMT1BFUl9JTVBPUlRBTlRfTk9URV9UWVBFJyksICgnQ1VTVE9NRVJfSU1QT1JUQU5UX05PVEVfVFlQRScsICdDVVNUT01FUl9JTVBPUlRBTlRfTk9URV9UWVBFJyksICgnTUVTU0FHRV9GT1JXQVJERURfVE9fU1VQUE9SVCcsICdNRVNTQUdFX0ZPUldBUkRFRF9UT19TVVBQT1JUJyksICgnVElDS0VUX0FTU0lHTkVFX0NPTk5FQ1RFRCcsICdUSUNLRVRfQVNTSUdORUVfQ09OTkVDVEVEJyksICgnVElDS0VUX0VYRUNVVE9SX0NPTk5FQ1RFRCcsICdUSUNLRVRfRVhFQ1VUT1JfQ09OTkVDVEVEJyksICgnVFJBQ0tfVElDS0VUX0lOX0RPTUFfQVBQJywgJ1RSQUNLX1RJQ0tFVF9JTl9ET01BX0FQUCcpLCAoJ1RJQ0tFVF9TVEFUVVNfT1BFTkVEJywgJ1RJQ0tFVF9TVEFUVVNfT1BFTkVEJyksICgnVElDS0VUX1NUQVRVU19JTl9QUk9HUkVTUycsICdUSUNLRVRfU1RBVFVTX0lOX1BST0dSRVNTJyksICgnVElDS0VUX1NUQVRVU19DT01QTEVURUQnLCAnVElDS0VUX1NUQVRVU19DT01QTEVURUQnKSwgKCdUSUNLRVRfU1RBVFVTX1JFVFVSTkVEJywgJ1RJQ0tFVF9TVEFUVVNfUkVUVVJORUQnKSwgKCdUSUNLRVRfU1RBVFVTX0RFQ0xJTkVEJywgJ1RJQ0tFVF9TVEFUVVNfREVDTElORUQnKSwgKCdUSUNLRVRfQ09NTUVOVF9BRERFRCcsICdUSUNLRVRfQ09NTUVOVF9BRERFRCcpLCAoJ01FVEVSX1ZFUklGSUNBVElPTl9EQVRFX1JFTUlOREVSJywgJ01FVEVSX1ZFUklGSUNBVElPTl9EQVRFX1JFTUlOREVSJyksICgnUkVTSURFTlRfQUREX0JJTExJTkdfQUNDT1VOVCcsICdSRVNJREVOVF9BRERfQklMTElOR19BQ0NPVU5UJyksICgnQklMTElOR19SRUNFSVBUX0FWQUlMQUJMRScsICdCSUxMSU5HX1JFQ0VJUFRfQVZBSUxBQkxFJyksICgnQklMTElOR19SRUNFSVBUX0FWQUlMQUJMRV9OT19BQ0NPVU5UJywgJ0JJTExJTkdfUkVDRUlQVF9BVkFJTEFCTEVfTk9fQUNDT1VOVCcpLCAoJ0JJTExJTkdfUkVDRUlQVF9DQVRFR09SWV9BVkFJTEFCTEUnLCAnQklMTElOR19SRUNFSVBUX0NBVEVHT1JZX0FWQUlMQUJMRScpLCAoJ0JJTExJTkdfUkVDRUlQVF9BRERFRCcsICdCSUxMSU5HX1JFQ0VJUFRfQURERUQnKSwgKCdCSUxMSU5HX1JFQ0VJUFRfQURERURfV0lUSF9ERUJUJywgJ0JJTExJTkdfUkVDRUlQVF9BRERFRF9XSVRIX0RFQlQnKSwgKCdCSUxMSU5HX1JFQ0VJUFRfQURERURfV0lUSF9OT19ERUJUJywgJ0JJTExJTkdfUkVDRUlQVF9BRERFRF9XSVRIX05PX0RFQlQnKSwgKCdNRVRFUl9TVUJNSVRfUkVBRElOR1NfUkVNSU5ERVInLCAnTUVURVJfU1VCTUlUX1JFQURJTkdTX1JFTUlOREVSJyksICgnTUVURVJfU1VCTUlUX1JFQURJTkdTX1JFTUlOREVSX1NUQVJUX1BFUklPRCcsICdNRVRFUl9TVUJNSVRfUkVBRElOR1NfUkVNSU5ERVJfU1RBUlRfUEVSSU9EJyksICgnTUVURVJfU1VCTUlUX1JFQURJTkdTX1JFTUlOREVSX0VORF9QRVJJT0QnLCAnTUVURVJfU1VCTUlUX1JFQURJTkdTX1JFTUlOREVSX0VORF9QRVJJT0QnKSwgKCdNRVRFUl9WRVJJRklDQVRJT05fREFURV9FWFBJUkVEJywgJ01FVEVSX1ZFUklGSUNBVElPTl9EQVRFX0VYUElSRUQnKSwgKCdSRVNJREVOVF9VUEdSQURFX0FQUCcsICdSRVNJREVOVF9VUEdSQURFX0FQUCcpLCAoJ1NUQUZGX1VQR1JBREVfQVBQJywgJ1NUQUZGX1VQR1JBREVfQVBQJyksICgnQ1VTVE9NX0NPTlRFTlRfTUVTU0FHRV9QVVNIJywgJ0NVU1RPTV9DT05URU5UX01FU1NBR0VfUFVTSCcpLCAoJ0NVU1RPTV9DT05URU5UX01FU1NBR0VfRU1BSUwnLCAnQ1VTVE9NX0NPTlRFTlRfTUVTU0FHRV9FTUFJTCcpLCAoJ0NVU1RPTV9DT05URU5UX01FU1NBR0VfU01TJywgJ0NVU1RPTV9DT05URU5UX01FU1NBR0VfU01TJyksICgnVk9JUF9JTkNPTUlOR19DQUxMX01FU1NBR0UnLCAnVk9JUF9JTkNPTUlOR19DQUxMX01FU1NBR0UnKSwgKCdCMkNfQVBQX01FU1NBR0VfUFVTSCcsICdCMkNfQVBQX01FU1NBR0VfUFVTSCcpLCAoJ1JFQ1VSUkVOVF9QQVlNRU5UX1BST0NFRURJTkdfU1VDQ0VTU19SRVNVTFRfTUVTU0FHRScsICdSRUNVUlJFTlRfUEFZTUVOVF9QUk9DRUVESU5HX1NVQ0NFU1NfUkVTVUxUX01FU1NBR0UnKSwgKCdSRUNVUlJFTlRfUEFZTUVOVF9QUk9DRUVESU5HX1VOS05PV05fRVJST1JfTUVTU0FHRScsICdSRUNVUlJFTlRfUEFZTUVOVF9QUk9DRUVESU5HX1VOS05PV05fRVJST1JfTUVTU0FHRScpLCAoJ1JFQ1VSUkVOVF9QQVlNRU5UX1BST0NFRURJTkdfQUNRVUlSSU5HX1BBWU1FTlRfUFJPQ0VFRF9FUlJPUl9NRVNTQUdFJywgJ1JFQ1VSUkVOVF9QQVlNRU5UX1BST0NFRURJTkdfQUNRVUlSSU5HX1BBWU1FTlRfUFJPQ0VFRF9FUlJPUl9NRVNTQUdFJyksICgnUkVDVVJSRU5UX1BBWU1FTlRfUFJPQ0VFRElOR19TRVJWSUNFX0NPTlNVTUVSX05PVF9GT1VORF9FUlJPUl9NRVNTQUdFJywgJ1JFQ1VSUkVOVF9QQVlNRU5UX1BST0NFRURJTkdfU0VSVklDRV9DT05TVU1FUl9OT1RfRk9VTkRfRVJST1JfTUVTU0FHRScpLCAoJ1JFQ1VSUkVOVF9QQVlNRU5UX1BST0NFRURJTkdfTElNSVRfRVhDRUVERURfRVJST1JfTUVTU0FHRScsICdSRUNVUlJFTlRfUEFZTUVOVF9QUk9DRUVESU5HX0xJTUlUX0VYQ0VFREVEX0VSUk9SX01FU1NBR0UnKSwgKCdSRUNVUlJFTlRfUEFZTUVOVF9QUk9DRUVESU5HX0NPTlRFWFRfTk9UX0ZPVU5EX0VSUk9SX01FU1NBR0UnLCAnUkVDVVJSRU5UX1BBWU1FTlRfUFJPQ0VFRElOR19DT05URVhUX05PVF9GT1VORF9FUlJPUl9NRVNTQUdFJyksICgnUkVDVVJSRU5UX1BBWU1FTlRfUFJPQ0VFRElOR19DT05URVhUX0RJU0FCTEVEX0VSUk9SX01FU1NBR0UnLCAnUkVDVVJSRU5UX1BBWU1FTlRfUFJPQ0VFRElOR19DT05URVhUX0RJU0FCTEVEX0VSUk9SX01FU1NBR0UnKSwgKCdSRUNVUlJFTlRfUEFZTUVOVF9QUk9DRUVESU5HX0NBUkRfVE9LRU5fTk9UX1ZBTElEX0VSUk9SX01FU1NBR0UnLCAnUkVDVVJSRU5UX1BBWU1FTlRfUFJPQ0VFRElOR19DQVJEX1RPS0VOX05PVF9WQUxJRF9FUlJPUl9NRVNTQUdFJyksICgnUkVDVVJSRU5UX1BBWU1FTlRfUFJPQ0VFRElOR19DQU5fTk9UX1JFR0lTVEVSX01VTFRJX1BBWU1FTlRfRVJST1JfTUVTU0FHRScsICdSRUNVUlJFTlRfUEFZTUVOVF9QUk9DRUVESU5HX0NBTl9OT1RfUkVHSVNURVJfTVVMVElfUEFZTUVOVF9FUlJPUl9NRVNTQUdFJyksICgnUkVDVVJSRU5UX1BBWU1FTlRfUFJPQ0VFRElOR19OT19SRUNFSVBUU19UT19QUk9DRUVEX0VSUk9SX01FU1NBR0UnLCAnUkVDVVJSRU5UX1BBWU1FTlRfUFJPQ0VFRElOR19OT19SRUNFSVBUU19UT19QUk9DRUVEX0VSUk9SX01FU1NBR0UnKSwgKCdSRUNVUlJFTlRfUEFZTUVOVF9UT01PUlJPV19QQVlNRU5UX01FU1NBR0UnLCAnUkVDVVJSRU5UX1BBWU1FTlRfVE9NT1JST1dfUEFZTUVOVF9NRVNTQUdFJyksICgnUkVDVVJSRU5UX1BBWU1FTlRfVE9NT1JST1dfUEFZTUVOVF9OT19SRUNFSVBUU19NRVNTQUdFJywgJ1JFQ1VSUkVOVF9QQVlNRU5UX1RPTU9SUk9XX1BBWU1FTlRfTk9fUkVDRUlQVFNfTUVTU0FHRScpLCAoJ1JFQ1VSUkVOVF9QQVlNRU5UX1RPTU9SUk9XX1BBWU1FTlRfTElNSVRfRVhDRUVEX01FU1NBR0UnLCAnUkVDVVJSRU5UX1BBWU1FTlRfVE9NT1JST1dfUEFZTUVOVF9MSU1JVF9FWENFRURfTUVTU0FHRScpLCAoJ05FV1NfSVRFTV9DT01NT05fTUVTU0FHRV9UWVBFJywgJ05FV1NfSVRFTV9DT01NT05fTUVTU0FHRV9UWVBFJyksICgnTkVXU19JVEVNX0VNRVJHRU5DWV9NRVNTQUdFX1RZUEUnLCAnTkVXU19JVEVNX0VNRVJHRU5DWV9NRVNTQUdFX1RZUEUnKSwgKCdERVZfUE9SVEFMX01FU1NBR0UnLCAnREVWX1BPUlRBTF9NRVNTQUdFJyksICgnU0VORF9CSUxMSU5HX1JFQ0VJUFRTX09OX1BBWURBWV9SRU1JTkRFUl9NRVNTQUdFJywgJ1NFTkRfQklMTElOR19SRUNFSVBUU19PTl9QQVlEQVlfUkVNSU5ERVJfTUVTU0FHRScpXSwgbWF4X2xlbmd0aD0xMDAsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkNyZWF0ZU1vZGVsKAogICAgICAgICAgICBuYW1lPSd0ZWxlZ3JhbXVzZXJjaGF0JywKICAgICAgICAgICAgZmllbGRzPVsKICAgICAgICAgICAgICAgICgndGVsZWdyYW1DaGF0SWQnLCBtb2RlbHMuVGV4dEZpZWxkKCkpLAogICAgICAgICAgICAgICAgKCdpZCcsIG1vZGVscy5VVUlERmllbGQocHJpbWFyeV9rZXk9VHJ1ZSwgc2VyaWFsaXplPUZhbHNlKSksCiAgICAgICAgICAgICAgICAoJ3YnLCBtb2RlbHMuSW50ZWdlckZpZWxkKGRlZmF1bHQ9MSkpLAogICAgICAgICAgICAgICAgKCdjcmVhdGVkQXQnLCBtb2RlbHMuRGF0ZVRpbWVGaWVsZChibGFuaz1UcnVlLCBkYl9pbmRleD1UcnVlLCBudWxsPVRydWUpKSwKICAgICAgICAgICAgICAgICgndXBkYXRlZEF0JywgbW9kZWxzLkRhdGVUaW1lRmllbGQoYmxhbms9VHJ1ZSwgZGJfaW5kZXg9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ2RlbGV0ZWRBdCcsIG1vZGVscy5EYXRlVGltZUZpZWxkKGJsYW5rPVRydWUsIGRiX2luZGV4PVRydWUsIG51bGw9VHJ1ZSkpLAogICAgICAgICAgICAgICAgKCduZXdJZCcsIG1vZGVscy5VVUlERmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSksCiAgICAgICAgICAgICAgICAoJ2R2JywgbW9kZWxzLkludGVnZXJGaWVsZCgpKSwKICAgICAgICAgICAgICAgICgnc2VuZGVyJywgbW9kZWxzLkpTT05GaWVsZCgpKSwKICAgICAgICAgICAgICAgICgnY3JlYXRlZEJ5JywgbW9kZWxzLkZvcmVpZ25LZXkoYmxhbms9VHJ1ZSwgZGJfY29sdW1uPSdjcmVhdGVkQnknLCBudWxsPVRydWUsIG9uX2RlbGV0ZT1kamFuZ28uZGIubW9kZWxzLmRlbGV0aW9uLlNFVF9OVUxMLCByZWxhdGVkX25hbWU9JysnLCB0bz0nX2RqYW5nb19zY2hlbWEudXNlcicpKSwKICAgICAgICAgICAgICAgICgndXBkYXRlZEJ5JywgbW9kZWxzLkZvcmVpZ25LZXkoYmxhbms9VHJ1ZSwgZGJfY29sdW1uPSd1cGRhdGVkQnknLCBudWxsPVRydWUsIG9uX2RlbGV0ZT1kamFuZ28uZGIubW9kZWxzLmRlbGV0aW9uLlNFVF9OVUxMLCByZWxhdGVkX25hbWU9JysnLCB0bz0nX2RqYW5nb19zY2hlbWEudXNlcicpKSwKICAgICAgICAgICAgICAgICgndXNlcicsIG1vZGVscy5Gb3JlaWduS2V5KGRiX2NvbHVtbj0ndXNlcicsIG9uX2RlbGV0ZT1kamFuZ28uZGIubW9kZWxzLmRlbGV0aW9uLkNBU0NBREUsIHJlbGF0ZWRfbmFtZT0nKycsIHRvPSdfZGphbmdvX3NjaGVtYS51c2VyJykpLAogICAgICAgICAgICBdLAogICAgICAgICAgICBvcHRpb25zPXsKICAgICAgICAgICAgICAgICdkYl90YWJsZSc6ICdUZWxlZ3JhbVVzZXJDaGF0JywKICAgICAgICAgICAgfSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkQ29uc3RyYWludCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGVsZWdyYW11c2VyY2hhdCcsCiAgICAgICAgICAgIGNvbnN0cmFpbnQ9bW9kZWxzLlVuaXF1ZUNvbnN0cmFpbnQoY29uZGl0aW9uPW1vZGVscy5RKCgnZGVsZXRlZEF0X19pc251bGwnLCBUcnVlKSksIGZpZWxkcz0oJ3RlbGVncmFtQ2hhdElkJywpLCBuYW1lPSdUZWxlZ3JhbVVzZXJDaGF0X3VuaXF1ZV90ZWxlZ3JhbUNoYXRJZCcpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Create model telegramuserchathistoryrecord
--
CREATE TABLE "TelegramUserChatHistoryRecord" ("user" uuid NULL, "telegramChatId" text NULL, "id" uuid NOT NULL PRIMARY KEY, "v" integer NULL, "createdAt" timestamp with time zone NULL, "updatedAt" timestamp with time zone NULL, "createdBy" uuid NULL, "updatedBy" uuid NULL, "deletedAt" timestamp with time zone NULL, "newId" jsonb NULL, "dv" integer NULL, "sender" jsonb NULL, "history_date" timestamp with time zone NOT NULL, "history_action" varchar(50) NOT NULL, "history_id" uuid NOT NULL);
--
-- Alter field messageType on notificationusersetting
--
--
-- Create model telegramuserchat
--
CREATE TABLE "TelegramUserChat" ("telegramChatId" text NOT NULL, "id" uuid NOT NULL PRIMARY KEY, "v" integer NOT NULL, "createdAt" timestamp with time zone NULL, "updatedAt" timestamp with time zone NULL, "deletedAt" timestamp with time zone NULL, "newId" uuid NULL, "dv" integer NOT NULL, "sender" jsonb NOT NULL, "createdBy" uuid NULL, "updatedBy" uuid NULL, "user" uuid NOT NULL);
--
-- Create constraint TelegramUserChat_unique_telegramChatId on model telegramuserchat
--
CREATE UNIQUE INDEX "TelegramUserChat_unique_telegramChatId" ON "TelegramUserChat" ("telegramChatId") WHERE "deletedAt" IS NULL;
CREATE INDEX "TelegramUserChatHistoryRecord_history_id_0b476dba" ON "TelegramUserChatHistoryRecord" ("history_id");
ALTER TABLE "TelegramUserChat" ADD CONSTRAINT "TelegramUserChat_createdBy_091d3f52_fk_User_id" FOREIGN KEY ("createdBy") REFERENCES "User" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "TelegramUserChat" ADD CONSTRAINT "TelegramUserChat_updatedBy_6a85980f_fk_User_id" FOREIGN KEY ("updatedBy") REFERENCES "User" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "TelegramUserChat" ADD CONSTRAINT "TelegramUserChat_user_56ec4bb0_fk_User_id" FOREIGN KEY ("user") REFERENCES "User" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "TelegramUserChat_createdAt_65f1ac24" ON "TelegramUserChat" ("createdAt");
CREATE INDEX "TelegramUserChat_updatedAt_7f6c0d34" ON "TelegramUserChat" ("updatedAt");
CREATE INDEX "TelegramUserChat_deletedAt_178fcd04" ON "TelegramUserChat" ("deletedAt");
CREATE INDEX "TelegramUserChat_createdBy_091d3f52" ON "TelegramUserChat" ("createdBy");
CREATE INDEX "TelegramUserChat_updatedBy_6a85980f" ON "TelegramUserChat" ("updatedBy");
CREATE INDEX "TelegramUserChat_user_56ec4bb0" ON "TelegramUserChat" ("user");
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Create constraint TelegramUserChat_unique_telegramChatId on model telegramuserchat
--
DROP INDEX IF EXISTS "TelegramUserChat_unique_telegramChatId";
--
-- Create model telegramuserchat
--
DROP TABLE "TelegramUserChat" CASCADE;
--
-- Alter field messageType on notificationusersetting
--
--
-- Create model telegramuserchathistoryrecord
--
DROP TABLE "TelegramUserChatHistoryRecord" CASCADE;
COMMIT;

    `)
}
