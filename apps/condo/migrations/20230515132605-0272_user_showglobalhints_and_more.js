// auto generated by kmigrator
// KMIGRATOR:0272_user_showglobalhints_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMC41IG9uIDIwMjMtMDUtMTUgMDg6MzEKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAyNzFfbm90aWZpY2F0aW9udXNlcnNldHRpbmdoaXN0b3J5cmVjb3JkX2FuZF9tb3JlJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd1c2VyJywKICAgICAgICAgICAgbmFtZT0nc2hvd0dsb2JhbEhpbnRzJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkJvb2xlYW5GaWVsZChkZWZhdWx0PVRydWUpLAogICAgICAgICAgICBwcmVzZXJ2ZV9kZWZhdWx0PUZhbHNlLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndXNlcmhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdzaG93R2xvYmFsSGludHMnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuQm9vbGVhbkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field showGlobalHints to user
--
ALTER TABLE "User" ADD COLUMN "showGlobalHints" boolean DEFAULT true NOT NULL;
ALTER TABLE "User" ALTER COLUMN "showGlobalHints" DROP DEFAULT;
--
-- Add field showGlobalHints to userhistoryrecord
--
ALTER TABLE "UserHistoryRecord" ADD COLUMN "showGlobalHints" boolean NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field showGlobalHints to userhistoryrecord
--
ALTER TABLE "UserHistoryRecord" DROP COLUMN "showGlobalHints" CASCADE;
--
-- Add field showGlobalHints to user
--
ALTER TABLE "User" DROP COLUMN "showGlobalHints" CASCADE;
COMMIT;

    `)
}
