// auto generated by kmigrator
// KMIGRATOR:0055_auto_20210913_0956:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi41IG9uIDIwMjEtMDktMTMgMDk6NTYKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAwNTRfYXV0b18yMDIxMDkxMF8wOTMzJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLkFsdGVyRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3VzZXInLAogICAgICAgICAgICBuYW1lPSdlbWFpbCcsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5UZXh0RmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkQ29uc3RyYWludCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndXNlcicsCiAgICAgICAgICAgIGNvbnN0cmFpbnQ9bW9kZWxzLlVuaXF1ZUNvbnN0cmFpbnQoZmllbGRzPSgndHlwZScsICdlbWFpbCcpLCBuYW1lPSd1bmlxdWVfdHlwZV9hbmRfZW1haWwnKSwKICAgICAgICApLAogICAgXQo=

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field email on user
--
ALTER TABLE "User" DROP CONSTRAINT "User_email_key";
--
-- Create constraint unique_type_and_email on model user
--
ALTER TABLE "User" ADD CONSTRAINT "unique_type_and_email" UNIQUE ("type", "email");
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Create constraint unique_type_and_email on model user
--
ALTER TABLE "User" DROP CONSTRAINT "unique_type_and_email";
--
-- Alter field email on user
--
ALTER TABLE "User" ADD CONSTRAINT "User_email_key" UNIQUE ("email");
COMMIT;

    `)
}
