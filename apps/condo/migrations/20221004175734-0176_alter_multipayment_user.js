// auto generated by kmigrator
// KMIGRATOR:0176_alter_multipayment_user:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMC40IG9uIDIwMjItMTAtMDQgMTI6NTcKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKaW1wb3J0IGRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24KCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAxNzVfYXV0b18yMDIyMDkyOF8yMTI0JyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLkFsdGVyRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J211bHRpcGF5bWVudCcsCiAgICAgICAgICAgIG5hbWU9J3VzZXInLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRm9yZWlnbktleShibGFuaz1UcnVlLCBkYl9jb2x1bW49J3VzZXInLCBudWxsPVRydWUsIG9uX2RlbGV0ZT1kamFuZ28uZGIubW9kZWxzLmRlbGV0aW9uLlBST1RFQ1QsIHJlbGF0ZWRfbmFtZT0nKycsIHRvPSdfZGphbmdvX3NjaGVtYS51c2VyJyksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field user on multipayment
--
SET CONSTRAINTS "MultiPayment_user_2d581ca2_fk_User_id" IMMEDIATE; ALTER TABLE "MultiPayment" DROP CONSTRAINT "MultiPayment_user_2d581ca2_fk_User_id";
ALTER TABLE "MultiPayment" ALTER COLUMN "user" DROP NOT NULL;
ALTER TABLE "MultiPayment" ADD CONSTRAINT "MultiPayment_user_2d581ca2_fk_User_id" FOREIGN KEY ("user") REFERENCES "User" ("id") DEFERRABLE INITIALLY DEFERRED;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field user on multipayment
--
SET CONSTRAINTS "MultiPayment_user_2d581ca2_fk_User_id" IMMEDIATE; ALTER TABLE "MultiPayment" DROP CONSTRAINT "MultiPayment_user_2d581ca2_fk_User_id";
ALTER TABLE "MultiPayment" ALTER COLUMN "user" SET NOT NULL;
ALTER TABLE "MultiPayment" ADD CONSTRAINT "MultiPayment_user_2d581ca2_fk_User_id" FOREIGN KEY ("user") REFERENCES "User" ("id") DEFERRABLE INITIALLY DEFERRED;
COMMIT;

    `)
}
