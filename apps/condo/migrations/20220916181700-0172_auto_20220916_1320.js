// auto generated by kmigrator
// KMIGRATOR:0172_auto_20220916_1320:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi40IG9uIDIwMjItMDktMTYgMTM6MjAKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAxNzFfbWVzc2FnZWJhdGNoX21lc3NhZ2ViYXRjaGhpc3RvcnlyZWNvcmQnKSwKICAgIF0KCiAgICBvcGVyYXRpb25zID0gWwogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2JpbGxpbmdpbnRlZ3JhdGlvbicsCiAgICAgICAgICAgIG5hbWU9J2NvdW50cnknLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuQ2hhckZpZWxkKGNob2ljZXM9WygnZW4nLCAnZW4nKSwgKCdydScsICdydScpXSwgZGVmYXVsdD0ncnUnLCBtYXhfbGVuZ3RoPTUwKSwKICAgICAgICAgICAgcHJlc2VydmVfZGVmYXVsdD1GYWxzZSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2JpbGxpbmdpbnRlZ3JhdGlvbmhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdjb3VudHJ5JywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiaWxsaW5ncmVjaXBpZW50JywKICAgICAgICAgICAgbmFtZT0naWVjJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field country to billingintegration
--
ALTER TABLE "BillingIntegration" ADD COLUMN "country" varchar(50) DEFAULT 'ru' NOT NULL;
ALTER TABLE "BillingIntegration" ALTER COLUMN "country" DROP DEFAULT;
--
-- Add field country to billingintegrationhistoryrecord
--
ALTER TABLE "BillingIntegrationHistoryRecord" ADD COLUMN "country" text NULL;
--
-- Alter field iec on billingrecipient
--
ALTER TABLE "BillingRecipient" ALTER COLUMN "iec" DROP NOT NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field iec on billingrecipient
--
ALTER TABLE "BillingRecipient" ALTER COLUMN "iec" SET NOT NULL;
--
-- Add field country to billingintegrationhistoryrecord
--
ALTER TABLE "BillingIntegrationHistoryRecord" DROP COLUMN "country" CASCADE;
--
-- Add field country to billingintegration
--
ALTER TABLE "BillingIntegration" DROP COLUMN "country" CASCADE;
COMMIT;

    `)
}
