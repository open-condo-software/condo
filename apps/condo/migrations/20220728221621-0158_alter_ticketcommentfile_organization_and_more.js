// auto generated by kmigrator
// KMIGRATOR:0158_alter_ticketcommentfile_organization_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMCBvbiAyMDIyLTA3LTI4IDE3OjE2Cgpmcm9tIGRqYW5nby5kYiBpbXBvcnQgbWlncmF0aW9ucywgbW9kZWxzCmltcG9ydCBkamFuZ28uZGIubW9kZWxzLmRlbGV0aW9uCgoKY2xhc3MgTWlncmF0aW9uKG1pZ3JhdGlvbnMuTWlncmF0aW9uKToKCiAgICBkZXBlbmRlbmNpZXMgPSBbCiAgICAgICAgKCdfZGphbmdvX3NjaGVtYScsICcwMTU3X29yZ2FuaXphdGlvbmVtcGxveWVlX29yZ2FuaXphdGlvbmVtcGxveWVlX3VuaXF1ZV91c2VyX2FuZF9vcmdhbml6YXRpb24nKSwKICAgIF0KCiAgICBvcGVyYXRpb25zID0gWwogICAgICAgIG1pZ3JhdGlvbnMuQWx0ZXJGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y29tbWVudGZpbGUnLAogICAgICAgICAgICBuYW1lPSdvcmdhbml6YXRpb24nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRm9yZWlnbktleShibGFuaz1UcnVlLCBkYl9jb2x1bW49J29yZ2FuaXphdGlvbicsIG51bGw9VHJ1ZSwgb25fZGVsZXRlPWRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24uRE9fTk9USElORywgcmVsYXRlZF9uYW1lPScrJywgdG89J19kamFuZ29fc2NoZW1hLm9yZ2FuaXphdGlvbicpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRmaWxlJywKICAgICAgICAgICAgbmFtZT0nb3JnYW5pemF0aW9uJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkZvcmVpZ25LZXkoYmxhbms9VHJ1ZSwgZGJfY29sdW1uPSdvcmdhbml6YXRpb24nLCBudWxsPVRydWUsIG9uX2RlbGV0ZT1kamFuZ28uZGIubW9kZWxzLmRlbGV0aW9uLkRPX05PVEhJTkcsIHJlbGF0ZWRfbmFtZT0nKycsIHRvPSdfZGphbmdvX3NjaGVtYS5vcmdhbml6YXRpb24nKSwKICAgICAgICApLAogICAgXQo=

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field organization on ticketcommentfile
--
SET CONSTRAINTS "TicketCommentFile_organization_6434badd_fk_Organization_id" IMMEDIATE; ALTER TABLE "TicketCommentFile" DROP CONSTRAINT "TicketCommentFile_organization_6434badd_fk_Organization_id";
ALTER TABLE "TicketCommentFile" ALTER COLUMN "organization" DROP NOT NULL;
ALTER TABLE "TicketCommentFile" ADD CONSTRAINT "TicketCommentFile_organization_6434badd_fk_Organization_id" FOREIGN KEY ("organization") REFERENCES "Organization" ("id") DEFERRABLE INITIALLY DEFERRED;
--
-- Alter field organization on ticketfile
--
SET CONSTRAINTS "TicketFile_organization_ddf0cd28_fk_Organization_id" IMMEDIATE; ALTER TABLE "TicketFile" DROP CONSTRAINT "TicketFile_organization_ddf0cd28_fk_Organization_id";
ALTER TABLE "TicketFile" ALTER COLUMN "organization" DROP NOT NULL;
ALTER TABLE "TicketFile" ADD CONSTRAINT "TicketFile_organization_ddf0cd28_fk_Organization_id" FOREIGN KEY ("organization") REFERENCES "Organization" ("id") DEFERRABLE INITIALLY DEFERRED;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field organization on ticketfile
--
SET CONSTRAINTS "TicketFile_organization_ddf0cd28_fk_Organization_id" IMMEDIATE; ALTER TABLE "TicketFile" DROP CONSTRAINT "TicketFile_organization_ddf0cd28_fk_Organization_id";
ALTER TABLE "TicketFile" ALTER COLUMN "organization" SET NOT NULL;
ALTER TABLE "TicketFile" ADD CONSTRAINT "TicketFile_organization_ddf0cd28_fk_Organization_id" FOREIGN KEY ("organization") REFERENCES "Organization" ("id") DEFERRABLE INITIALLY DEFERRED;
--
-- Alter field organization on ticketcommentfile
--
SET CONSTRAINTS "TicketCommentFile_organization_6434badd_fk_Organization_id" IMMEDIATE; ALTER TABLE "TicketCommentFile" DROP CONSTRAINT "TicketCommentFile_organization_6434badd_fk_Organization_id";
ALTER TABLE "TicketCommentFile" ALTER COLUMN "organization" SET NOT NULL;
ALTER TABLE "TicketCommentFile" ADD CONSTRAINT "TicketCommentFile_organization_6434badd_fk_Organization_id" FOREIGN KEY ("organization") REFERENCES "Organization" ("id") DEFERRABLE INITIALLY DEFERRED;
COMMIT;

    `)
}
