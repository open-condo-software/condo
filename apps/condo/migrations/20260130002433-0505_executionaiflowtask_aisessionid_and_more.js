// auto generated by kmigrator
// KMIGRATOR:0505_executionaiflowtask_aisessionid_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDUuMS40IG9uIDIwMjYtMDEtMjkgMTk6MjQKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzA1MDRfcGF5bWVudHN0YXR1c2NoYW5nZXdlYmhvb2t1cmxoaXN0b3J5cmVjb3JkX2FuZF9tb3JlJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdleGVjdXRpb25haWZsb3d0YXNrJywKICAgICAgICAgICAgbmFtZT0nYWlTZXNzaW9uSWQnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdleGVjdXRpb25haWZsb3d0YXNrJywKICAgICAgICAgICAgbmFtZT0nbGFzdEFjdGlvblJlcXVlc3RlZCcsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5DaGFyRmllbGQoYmxhbms9VHJ1ZSwgbWF4X2xlbmd0aD01MCwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2V4ZWN1dGlvbmFpZmxvd3Rhc2snLAogICAgICAgICAgICBuYW1lPSdsYXN0QWN0aW9uUmVxdWVzdGVkTWV0YScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5KU09ORmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2V4ZWN1dGlvbmFpZmxvd3Rhc2toaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nYWlTZXNzaW9uSWQnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdleGVjdXRpb25haWZsb3d0YXNraGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J2xhc3RBY3Rpb25SZXF1ZXN0ZWQnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdleGVjdXRpb25haWZsb3d0YXNraGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J2xhc3RBY3Rpb25SZXF1ZXN0ZWRNZXRhJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkpTT05GaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field aiSessionId to executionaiflowtask
--
ALTER TABLE "ExecutionAIFlowTask" ADD COLUMN "aiSessionId" text NULL;
--
-- Add field lastActionRequested to executionaiflowtask
--
ALTER TABLE "ExecutionAIFlowTask" ADD COLUMN "lastActionRequested" varchar(50) NULL;
--
-- Add field lastActionRequestedMeta to executionaiflowtask
--
ALTER TABLE "ExecutionAIFlowTask" ADD COLUMN "lastActionRequestedMeta" jsonb NULL;
--
-- Add field aiSessionId to executionaiflowtaskhistoryrecord
--
ALTER TABLE "ExecutionAIFlowTaskHistoryRecord" ADD COLUMN "aiSessionId" text NULL;
--
-- Add field lastActionRequested to executionaiflowtaskhistoryrecord
--
ALTER TABLE "ExecutionAIFlowTaskHistoryRecord" ADD COLUMN "lastActionRequested" text NULL;
--
-- Add field lastActionRequestedMeta to executionaiflowtaskhistoryrecord
--
ALTER TABLE "ExecutionAIFlowTaskHistoryRecord" ADD COLUMN "lastActionRequestedMeta" jsonb NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field lastActionRequestedMeta to executionaiflowtaskhistoryrecord
--
ALTER TABLE "ExecutionAIFlowTaskHistoryRecord" DROP COLUMN "lastActionRequestedMeta" CASCADE;
--
-- Add field lastActionRequested to executionaiflowtaskhistoryrecord
--
ALTER TABLE "ExecutionAIFlowTaskHistoryRecord" DROP COLUMN "lastActionRequested" CASCADE;
--
-- Add field aiSessionId to executionaiflowtaskhistoryrecord
--
ALTER TABLE "ExecutionAIFlowTaskHistoryRecord" DROP COLUMN "aiSessionId" CASCADE;
--
-- Add field lastActionRequestedMeta to executionaiflowtask
--
ALTER TABLE "ExecutionAIFlowTask" DROP COLUMN "lastActionRequestedMeta" CASCADE;
--
-- Add field lastActionRequested to executionaiflowtask
--
ALTER TABLE "ExecutionAIFlowTask" DROP COLUMN "lastActionRequested" CASCADE;
--
-- Add field aiSessionId to executionaiflowtask
--
ALTER TABLE "ExecutionAIFlowTask" DROP COLUMN "aiSessionId" CASCADE;
COMMIT;

    `)
}
