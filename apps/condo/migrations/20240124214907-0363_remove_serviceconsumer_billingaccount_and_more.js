// auto generated by kmigrator
// KMIGRATOR:0363_remove_serviceconsumer_billingaccount_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMi4xIG9uIDIwMjQtMDEtMjQgMTY6NDkKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zCgoKY2xhc3MgTWlncmF0aW9uKG1pZ3JhdGlvbnMuTWlncmF0aW9uKToKCiAgICBkZXBlbmRlbmNpZXMgPSBbCiAgICAgICAgKCdfZGphbmdvX3NjaGVtYScsICcwMzYyX25ld3NpdGVtaGlzdG9yeXJlY29yZF9jb21wYWN0c2NvcGVzJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdzZXJ2aWNlY29uc3VtZXInLAogICAgICAgICAgICBuYW1lPSdiaWxsaW5nQWNjb3VudCcsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdzZXJ2aWNlY29uc3VtZXJoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nYmlsbGluZ0FjY291bnQnLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Remove field billingAccount from serviceconsumer
--
SET CONSTRAINTS "ServiceConsumer_billingAccount_71105b51_fk_BillingAccount_id" IMMEDIATE; ALTER TABLE "ServiceConsumer" DROP CONSTRAINT "ServiceConsumer_billingAccount_71105b51_fk_BillingAccount_id";
ALTER TABLE "ServiceConsumer" DROP COLUMN "billingAccount" CASCADE;
--
-- Remove field billingAccount from serviceconsumerhistoryrecord
--
ALTER TABLE "ServiceConsumerHistoryRecord" DROP COLUMN "billingAccount" CASCADE;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Remove field billingAccount from serviceconsumerhistoryrecord
--
ALTER TABLE "ServiceConsumerHistoryRecord" ADD COLUMN "billingAccount" uuid NULL;
--
-- Remove field billingAccount from serviceconsumer
--
ALTER TABLE "ServiceConsumer" ADD COLUMN "billingAccount" uuid NULL CONSTRAINT "ServiceConsumer_billingAccount_71105b51_fk_BillingAccount_id" REFERENCES "BillingAccount"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "ServiceConsumer_billingAccount_71105b51_fk_BillingAccount_id" IMMEDIATE;
CREATE INDEX "ServiceConsumer_billingAccount_71105b51" ON "ServiceConsumer" ("billingAccount");
COMMIT;

    `)
}
