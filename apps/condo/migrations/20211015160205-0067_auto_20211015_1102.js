// auto generated by kmigrator
// KMIGRATOR:0067_auto_20211015_1102:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi40IG9uIDIwMjEtMTAtMTUgMTE6MDIKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAwNjZfYXV0b18yMDIxMTAxNF8wNzE2JyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKIyAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKIyAgICAgICAgICAgIG1vZGVsX25hbWU9J2JpbGxpbmdjdXJyZW5jeScsCiMgICAgICAgICAgICBuYW1lPSdjcmVhdGVkQnknLAojICAgICAgICApLAojICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAojICAgICAgICAgICAgbW9kZWxfbmFtZT0nYmlsbGluZ2N1cnJlbmN5JywKIyAgICAgICAgICAgIG5hbWU9J3VwZGF0ZWRCeScsCiMgICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiaWxsaW5naW50ZWdyYXRpb24nLAogICAgICAgICAgICBuYW1lPSdjdXJyZW5jeScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5DaGFyRmllbGQoYmxhbms9VHJ1ZSwgY2hvaWNlcz1bKCdVU0QnLCAnVVNEJyksICgnQ0FEJywgJ0NBRCcpLCAoJ0VVUicsICdFVVInKSwgKCdBRUQnLCAnQUVEJyksICgnQUZOJywgJ0FGTicpLCAoJ0FMTCcsICdBTEwnKSwgKCdBTUQnLCAnQU1EJyksICgnQVJTJywgJ0FSUycpLCAoJ0FVRCcsICdBVUQnKSwgKCdBWk4nLCAnQVpOJyksICgnQkFNJywgJ0JBTScpLCAoJ0JEVCcsICdCRFQnKSwgKCdCR04nLCAnQkdOJyksICgnQkhEJywgJ0JIRCcpLCAoJ0JJRicsICdCSUYnKSwgKCdCTkQnLCAnQk5EJyksICgnQk9CJywgJ0JPQicpLCAoJ0JSTCcsICdCUkwnKSwgKCdCV1AnLCAnQldQJyksICgnQllOJywgJ0JZTicpLCAoJ0JaRCcsICdCWkQnKSwgKCdDREYnLCAnQ0RGJyksICgnQ0hGJywgJ0NIRicpLCAoJ0NMUCcsICdDTFAnKSwgKCdDTlknLCAnQ05ZJyksICgnQ09QJywgJ0NPUCcpLCAoJ0NSQycsICdDUkMnKSwgKCdDVkUnLCAnQ1ZFJyksICgnQ1pLJywgJ0NaSycpLCAoJ0RKRicsICdESkYnKSwgKCdES0snLCAnREtLJyksICgnRE9QJywgJ0RPUCcpLCAoJ0RaRCcsICdEWkQnKSwgKCdFRUsnLCAnRUVLJyksICgnRUdQJywgJ0VHUCcpLCAoJ0VSTicsICdFUk4nKSwgKCdFVEInLCAnRVRCJyksICgnR0JQJywgJ0dCUCcpLCAoJ0dFTCcsICdHRUwnKSwgKCdHSFMnLCAnR0hTJyksICgnR05GJywgJ0dORicpLCAoJ0dUUScsICdHVFEnKSwgKCdIS0QnLCAnSEtEJyksICgnSE5MJywgJ0hOTCcpLCAoJ0hSSycsICdIUksnKSwgKCdIVUYnLCAnSFVGJyksICgnSURSJywgJ0lEUicpLCAoJ0lMUycsICdJTFMnKSwgKCdJTlInLCAnSU5SJyksICgnSVFEJywgJ0lRRCcpLCAoJ0lSUicsICdJUlInKSwgKCdJU0snLCAnSVNLJyksICgnSk1EJywgJ0pNRCcpLCAoJ0pPRCcsICdKT0QnKSwgKCdKUFknLCAnSlBZJyksICgnS0VTJywgJ0tFUycpLCAoJ0tIUicsICdLSFInKSwgKCdLTUYnLCAnS01GJyksICgnS1JXJywgJ0tSVycpLCAoJ0tXRCcsICdLV0QnKSwgKCdLWlQnLCAnS1pUJyksICgnTEJQJywgJ0xCUCcpLCAoJ0xLUicsICdMS1InKSwgKCdMVEwnLCAnTFRMJyksICgnTFZMJywgJ0xWTCcpLCAoJ0xZRCcsICdMWUQnKSwgKCdNQUQnLCAnTUFEJyksICgnTURMJywgJ01ETCcpLCAoJ01HQScsICdNR0EnKSwgKCdNS0QnLCAnTUtEJyksICgnTU1LJywgJ01NSycpLCAoJ01PUCcsICdNT1AnKSwgKCdNVVInLCAnTVVSJyksICgnTVhOJywgJ01YTicpLCAoJ01ZUicsICdNWVInKSwgKCdNWk4nLCAnTVpOJyksICgnTkFEJywgJ05BRCcpLCAoJ05HTicsICdOR04nKSwgKCdOSU8nLCAnTklPJyksICgnTk9LJywgJ05PSycpLCAoJ05QUicsICdOUFInKSwgKCdOWkQnLCAnTlpEJyksICgnT01SJywgJ09NUicpLCAoJ1BBQicsICdQQUInKSwgKCdQRU4nLCAnUEVOJyksICgnUEhQJywgJ1BIUCcpLCAoJ1BLUicsICdQS1InKSwgKCdQTE4nLCAnUExOJyksICgnUFlHJywgJ1BZRycpLCAoJ1FBUicsICdRQVInKSwgKCdST04nLCAnUk9OJyksICgnUlNEJywgJ1JTRCcpLCAoJ1JVQicsICdSVUInKSwgKCdSV0YnLCAnUldGJyksICgnU0FSJywgJ1NBUicpLCAoJ1NERycsICdTREcnKSwgKCdTRUsnLCAnU0VLJyksICgnU0dEJywgJ1NHRCcpLCAoJ1NPUycsICdTT1MnKSwgKCdTWVAnLCAnU1lQJyksICgnVEhCJywgJ1RIQicpLCAoJ1RORCcsICdUTkQnKSwgKCdUT1AnLCAnVE9QJyksICgnVFJZJywgJ1RSWScpLCAoJ1RURCcsICdUVEQnKSwgKCdUV0QnLCAnVFdEJyksICgnVFpTJywgJ1RaUycpLCAoJ1VBSCcsICdVQUgnKSwgKCdVR1gnLCAnVUdYJyksICgnVVlVJywgJ1VZVScpLCAoJ1VaUycsICdVWlMnKSwgKCdWRUYnLCAnVkVGJyksICgnVk5EJywgJ1ZORCcpLCAoJ1hBRicsICdYQUYnKSwgKCdYT0YnLCAnWE9GJyksICgnWUVSJywgJ1lFUicpLCAoJ1pBUicsICdaQVInKSwgKCdaTUsnLCAnWk1LJyksICgnWldMJywgJ1pXTCcpXSwgbWF4X2xlbmd0aD01MCwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWx0ZXJGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYmlsbGluZ2ludGVncmF0aW9uaGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J2N1cnJlbmN5JywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5EZWxldGVNb2RlbCgKICAgICAgICAgICAgbmFtZT0nYmlsbGluZ2N1cnJlbmN5JywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuRGVsZXRlTW9kZWwoCiAgICAgICAgICAgIG5hbWU9J2JpbGxpbmdjdXJyZW5jeWhpc3RvcnlyZWNvcmQnLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field currency on billingintegration
--
SET CONSTRAINTS "BillingIntegration_currency_6dcf6f51_fk_BillingCurrency_id" IMMEDIATE; ALTER TABLE "BillingIntegration" DROP CONSTRAINT "BillingIntegration_currency_6dcf6f51_fk_BillingCurrency_id";
DROP INDEX IF EXISTS "BillingIntegration_currency_6dcf6f51";
ALTER TABLE "BillingIntegration" ALTER COLUMN "currency" TYPE varchar(50) USING "currency"::varchar(50);
--
-- Alter field currency on billingintegrationhistoryrecord
--
ALTER TABLE "BillingIntegrationHistoryRecord" ALTER COLUMN "currency" TYPE text USING "currency"::text;
--
-- Delete model billingcurrency
--
DROP TABLE "BillingCurrency" CASCADE;
--
-- Delete model billingcurrencyhistoryrecord
--
DROP TABLE "BillingCurrencyHistoryRecord" CASCADE;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Delete model billingcurrencyhistoryrecord
--
CREATE TABLE "BillingCurrencyHistoryRecord" ("dv" integer NULL, "sender" jsonb NULL, "code" text NULL, "displayInfo" jsonb NULL, "id" uuid NOT NULL PRIMARY KEY, "v" integer NULL, "createdAt" timestamp with time zone NULL, "updatedAt" timestamp with time zone NULL, "createdBy" uuid NULL, "updatedBy" uuid NULL, "deletedAt" timestamp with time zone NULL, "newId" jsonb NULL, "history_date" timestamp with time zone NOT NULL, "history_action" varchar(50) NOT NULL, "history_id" uuid NOT NULL);
--
-- Delete model billingcurrency
--
CREATE TABLE "BillingCurrency" ("dv" integer NOT NULL, "sender" jsonb NOT NULL, "code" text NOT NULL, "displayInfo" jsonb NULL, "id" uuid NOT NULL PRIMARY KEY, "v" integer NOT NULL, "createdAt" timestamp with time zone NULL, "updatedAt" timestamp with time zone NULL, "deletedAt" timestamp with time zone NULL, "newId" uuid NULL, "createdBy" uuid NULL, "updatedBy" uuid NULL);
--
-- Alter field currency on billingintegrationhistoryrecord
--
ALTER TABLE "BillingIntegrationHistoryRecord" ALTER COLUMN "currency" TYPE uuid USING "currency"::uuid;
--
-- Alter field currency on billingintegration
--
ALTER TABLE "BillingIntegration" ALTER COLUMN "currency" TYPE uuid USING "currency"::uuid;
CREATE INDEX "BillingIntegration_currency_6dcf6f51" ON "BillingIntegration" ("currency");
ALTER TABLE "BillingIntegration" ADD CONSTRAINT "BillingIntegration_currency_6dcf6f51_fk_BillingCurrency_id" FOREIGN KEY ("currency") REFERENCES "BillingCurrency" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "BillingCurrencyHistoryRecord_history_id_0f3fff3d" ON "BillingCurrencyHistoryRecord" ("history_id");
ALTER TABLE "BillingCurrency" ADD CONSTRAINT "BillingCurrency_createdBy_937b28e2_fk_User_id" FOREIGN KEY ("createdBy") REFERENCES "User" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "BillingCurrency" ADD CONSTRAINT "BillingCurrency_updatedBy_4b979af5_fk_User_id" FOREIGN KEY ("updatedBy") REFERENCES "User" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "BillingCurrency_createdAt_07729fc7" ON "BillingCurrency" ("createdAt");
CREATE INDEX "BillingCurrency_updatedAt_61834756" ON "BillingCurrency" ("updatedAt");
CREATE INDEX "BillingCurrency_deletedAt_6502f754" ON "BillingCurrency" ("deletedAt");
CREATE INDEX "BillingCurrency_createdBy_937b28e2" ON "BillingCurrency" ("createdBy");
CREATE INDEX "BillingCurrency_updatedBy_4b979af5" ON "BillingCurrency" ("updatedBy");
COMMIT;

    `)
}
