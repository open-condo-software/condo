// auto generated by kmigrator
// KMIGRATOR:0413_b2bappnewssharingconfig_customgetrecipientscountersurl_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMi4xIG9uIDIwMjQtMDctMjggMjA6MTAKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzA0MTJfbWFya2V0c2V0dGluZ2hpc3RvcnlyZWNvcmRfYW5kX21vcmUnKSwKICAgIF0KCiAgICBvcGVyYXRpb25zID0gWwogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2IyYmFwcG5ld3NzaGFyaW5nY29uZmlnJywKICAgICAgICAgICAgbmFtZT0nY3VzdG9tR2V0UmVjaXBpZW50c0NvdW50ZXJzVXJsJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYjJiYXBwbmV3c3NoYXJpbmdjb25maWcnLAogICAgICAgICAgICBuYW1lPSdwdXNoTm90aWZpY2F0aW9uU2V0dGluZ3MnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuQ2hhckZpZWxkKGNob2ljZXM9WygnT05MWV9FTUVSR0VOQ1knLCAnT05MWV9FTUVSR0VOQ1knKSwgKCdFTkFCTEVEJywgJ0VOQUJMRUQnKSwgKCdESVNBQkxFRCcsICdESVNBQkxFRCcpXSwgZGVmYXVsdD0nRElTQUJMRUQnLCBtYXhfbGVuZ3RoPTUwKSwKICAgICAgICAgICAgcHJlc2VydmVfZGVmYXVsdD1GYWxzZSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2IyYmFwcG5ld3NzaGFyaW5nY29uZmlnaGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J2N1c3RvbUdldFJlY2lwaWVudHNDb3VudGVyc1VybCcsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5UZXh0RmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2IyYmFwcG5ld3NzaGFyaW5nY29uZmlnaGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J3B1c2hOb3RpZmljYXRpb25TZXR0aW5ncycsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5UZXh0RmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWx0ZXJGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYjJiYXBwbmV3c3NoYXJpbmdjb25maWcnLAogICAgICAgICAgICBuYW1lPSdnZXRSZWNpcGllbnRzVXJsJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field customGetRecipientsCountersUrl to b2bappnewssharingconfig
--
ALTER TABLE "B2BAppNewsSharingConfig" ADD COLUMN "customGetRecipientsCountersUrl" text NULL;
--
-- Add field pushNotificationSettings to b2bappnewssharingconfig
--
ALTER TABLE "B2BAppNewsSharingConfig" ADD COLUMN "pushNotificationSettings" varchar(50) DEFAULT 'DISABLED' NOT NULL;
ALTER TABLE "B2BAppNewsSharingConfig" ALTER COLUMN "pushNotificationSettings" DROP DEFAULT;
--
-- Add field customGetRecipientsCountersUrl to b2bappnewssharingconfighistoryrecord
--
ALTER TABLE "B2BAppNewsSharingConfigHistoryRecord" ADD COLUMN "customGetRecipientsCountersUrl" text NULL;
--
-- Add field pushNotificationSettings to b2bappnewssharingconfighistoryrecord
--
ALTER TABLE "B2BAppNewsSharingConfigHistoryRecord" ADD COLUMN "pushNotificationSettings" text NULL;
--
-- Alter field getRecipientsUrl on b2bappnewssharingconfig
--
ALTER TABLE "B2BAppNewsSharingConfig" ALTER COLUMN "getRecipientsUrl" DROP NOT NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field getRecipientsUrl on b2bappnewssharingconfig
--
ALTER TABLE "B2BAppNewsSharingConfig" ALTER COLUMN "getRecipientsUrl" SET NOT NULL;
--
-- Add field pushNotificationSettings to b2bappnewssharingconfighistoryrecord
--
ALTER TABLE "B2BAppNewsSharingConfigHistoryRecord" DROP COLUMN "pushNotificationSettings" CASCADE;
--
-- Add field customGetRecipientsCountersUrl to b2bappnewssharingconfighistoryrecord
--
ALTER TABLE "B2BAppNewsSharingConfigHistoryRecord" DROP COLUMN "customGetRecipientsCountersUrl" CASCADE;
--
-- Add field pushNotificationSettings to b2bappnewssharingconfig
--
ALTER TABLE "B2BAppNewsSharingConfig" DROP COLUMN "pushNotificationSettings" CASCADE;
--
-- Add field customGetRecipientsCountersUrl to b2bappnewssharingconfig
--
ALTER TABLE "B2BAppNewsSharingConfig" DROP COLUMN "customGetRecipientsCountersUrl" CASCADE;
COMMIT;

    `)
}
