// auto generated by kmigrator
// KMIGRATOR:0300_newsitemtemplate_type_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMS4zIG9uIDIwMjMtMDctMTEgMDk6MTIKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAyOTlfb3JnYW5pemF0aW9uZW1wbG95ZWVyb2xlX2NhbmRvd25sb2FkY2FsbHJlY29yZHNfYW5kX21vcmUnKSwKICAgIF0KCiAgICBvcGVyYXRpb25zID0gWwogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J25ld3NpdGVtdGVtcGxhdGUnLAogICAgICAgICAgICBuYW1lPSd0eXBlJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkNoYXJGaWVsZChjaG9pY2VzPVsoJ2NvbW1vbicsICdjb21tb24nKSwgKCdlbWVyZ2VuY3knLCAnZW1lcmdlbmN5JyldLCBkZWZhdWx0PSdjb21tb24nLCBtYXhfbGVuZ3RoPTUwKSwKICAgICAgICAgICAgcHJlc2VydmVfZGVmYXVsdD1GYWxzZSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J25ld3NpdGVtdGVtcGxhdGVoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0ndHlwZScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5UZXh0RmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgXQo=

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field type to newsitemtemplate
--
ALTER TABLE "NewsItemTemplate" ADD COLUMN "type" varchar(50) DEFAULT 'common' NOT NULL;
ALTER TABLE "NewsItemTemplate" ALTER COLUMN "type" DROP DEFAULT;
--
-- Add field type to newsitemtemplatehistoryrecord
--
ALTER TABLE "NewsItemTemplateHistoryRecord" ADD COLUMN "type" text NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field type to newsitemtemplatehistoryrecord
--
ALTER TABLE "NewsItemTemplateHistoryRecord" DROP COLUMN "type" CASCADE;
--
-- Add field type to newsitemtemplate
--
ALTER TABLE "NewsItemTemplate" DROP COLUMN "type" CASCADE;
COMMIT;

    `)
}
