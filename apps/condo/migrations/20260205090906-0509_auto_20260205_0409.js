// auto generated by kmigrator
// KMIGRATOR:0509_auto_20260205_0409:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi41IG9uIDIwMjYtMDItMDUgMDQ6MDkKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzA1MDhfYXV0b18yMDI2MDIwM18wOTA0JyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdzdWJzY3JpcHRpb25jb250ZXh0JywKICAgICAgICAgICAgbmFtZT0nbWV0YScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5KU09ORmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3N1YnNjcmlwdGlvbmNvbnRleHRoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nbWV0YScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5KU09ORmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3VzZXJyaWdodHNzZXQnLAogICAgICAgICAgICBuYW1lPSdjYW5FeGVjdXRlQWN0aXZhdGVTdWJzY3JpcHRpb25QbGFuJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkJvb2xlYW5GaWVsZChkZWZhdWx0PUZhbHNlKSwKICAgICAgICAgICAgcHJlc2VydmVfZGVmYXVsdD1GYWxzZSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3VzZXJyaWdodHNzZXQnLAogICAgICAgICAgICBuYW1lPSdjYW5FeGVjdXRlR2V0QXZhaWxhYmxlU3Vic2NyaXB0aW9uUGxhbnMnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuQm9vbGVhbkZpZWxkKGRlZmF1bHQ9RmFsc2UpLAogICAgICAgICAgICBwcmVzZXJ2ZV9kZWZhdWx0PUZhbHNlLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndXNlcnJpZ2h0c3NldGhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdjYW5FeGVjdXRlQWN0aXZhdGVTdWJzY3JpcHRpb25QbGFuJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkJvb2xlYW5GaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndXNlcnJpZ2h0c3NldGhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdjYW5FeGVjdXRlR2V0QXZhaWxhYmxlU3Vic2NyaXB0aW9uUGxhbnMnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuQm9vbGVhbkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgIF0K
// KMIGRATOR_VIEWS:0509_auto_20260205_0409:eyJkdiI6MSwibGlzdHMiOnsiVXNlciI6eyJmaWVsZHMiOlsiYXZhdGFyIiwiY3JlYXRlZEF0IiwiY3JlYXRlZEJ5IiwiY3VzdG9tQWNjZXNzIiwiZGVsZXRlZEF0IiwiZHYiLCJlbWFpbCIsImV4dGVybmFsRW1haWwiLCJleHRlcm5hbFBob25lIiwiZXh0ZXJuYWxTeXN0ZW1OYW1lIiwiaGFzTWFya2V0aW5nQ29uc2VudCIsImlkIiwiaXNBZG1pbiIsImlzRW1haWxWZXJpZmllZCIsImlzRXh0ZXJuYWxFbWFpbFZlcmlmaWVkIiwiaXNFeHRlcm5hbFBob25lVmVyaWZpZWQiLCJpc1Bob25lVmVyaWZpZWQiLCJpc1N1cHBvcnQiLCJpc1R3b0ZhY3RvckF1dGhlbnRpY2F0aW9uRW5hYmxlZCIsImxvY2FsZSIsIm1ldGEiLCJuYW1lIiwibmV3SWQiLCJwYXNzd29yZCIsInBob25lIiwicmlnaHRzU2V0Iiwic2VuZGVyIiwic2hvd0dsb2JhbEhpbnRzIiwidHlwZSIsInVwZGF0ZWRBdCIsInVwZGF0ZWRCeSIsInYiXSwic2Vuc2l0aXZlRmllbGRzIjpbImVtYWlsIiwiZXh0ZXJuYWxFbWFpbCIsImV4dGVybmFsUGhvbmUiLCJtZXRhIiwibmFtZSIsInBhc3N3b3JkIiwicGhvbmUiXX19fQ==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field meta to subscriptioncontext
--
ALTER TABLE "SubscriptionContext" ADD COLUMN "meta" jsonb NULL;
--
-- Add field meta to subscriptioncontexthistoryrecord
--
ALTER TABLE "SubscriptionContextHistoryRecord" ADD COLUMN "meta" jsonb NULL;
--
-- Add field canExecuteActivateSubscriptionPlan to userrightsset
--
ALTER TABLE "UserRightsSet" ADD COLUMN "canExecuteActivateSubscriptionPlan" boolean DEFAULT false NOT NULL;
ALTER TABLE "UserRightsSet" ALTER COLUMN "canExecuteActivateSubscriptionPlan" DROP DEFAULT;
--
-- Add field canExecuteGetAvailableSubscriptionPlans to userrightsset
--
ALTER TABLE "UserRightsSet" ADD COLUMN "canExecuteGetAvailableSubscriptionPlans" boolean DEFAULT false NOT NULL;
ALTER TABLE "UserRightsSet" ALTER COLUMN "canExecuteGetAvailableSubscriptionPlans" DROP DEFAULT;
--
-- Add field canExecuteActivateSubscriptionPlan to userrightssethistoryrecord
--
ALTER TABLE "UserRightsSetHistoryRecord" ADD COLUMN "canExecuteActivateSubscriptionPlan" boolean NULL;
--
-- Add field canExecuteGetAvailableSubscriptionPlans to userrightssethistoryrecord
--
ALTER TABLE "UserRightsSetHistoryRecord" ADD COLUMN "canExecuteGetAvailableSubscriptionPlans" boolean NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field canExecuteGetAvailableSubscriptionPlans to userrightssethistoryrecord
--
ALTER TABLE "UserRightsSetHistoryRecord" DROP COLUMN "canExecuteGetAvailableSubscriptionPlans" CASCADE;
--
-- Add field canExecuteActivateSubscriptionPlan to userrightssethistoryrecord
--
ALTER TABLE "UserRightsSetHistoryRecord" DROP COLUMN "canExecuteActivateSubscriptionPlan" CASCADE;
--
-- Add field canExecuteGetAvailableSubscriptionPlans to userrightsset
--
ALTER TABLE "UserRightsSet" DROP COLUMN "canExecuteGetAvailableSubscriptionPlans" CASCADE;
--
-- Add field canExecuteActivateSubscriptionPlan to userrightsset
--
ALTER TABLE "UserRightsSet" DROP COLUMN "canExecuteActivateSubscriptionPlan" CASCADE;
--
-- Add field meta to subscriptioncontexthistoryrecord
--
ALTER TABLE "SubscriptionContextHistoryRecord" DROP COLUMN "meta" CASCADE;
--
-- Add field meta to subscriptioncontext
--
ALTER TABLE "SubscriptionContext" DROP COLUMN "meta" CASCADE;
COMMIT;

    `)
}
