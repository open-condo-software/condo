// auto generated by kmigrator
// KMIGRATOR:0028_auto_20210725_1041:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi41IG9uIDIwMjEtMDctMjUgMTA6NDEKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKaW1wb3J0IGRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24KCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAwMjdfYXV0b18yMDIxMDcxOV8wNTM2JyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjbGFzc2lmaWVyJywKICAgICAgICAgICAgbmFtZT0ncGFyZW50JywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuUmVtb3ZlRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGNsYXNzaWZpZXJoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nZnVsbE5hbWUnLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2xhc3NpZmllcmhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdwYXJlbnQnLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0JywKICAgICAgICAgICAgbmFtZT0nY2F0ZWdvcnlDbGFzc2lmaWVyJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkZvcmVpZ25LZXkoZGJfY29sdW1uPSdjYXRlZ29yeUNsYXNzaWZpZXInLCBudWxsPVRydWUsIG9uX2RlbGV0ZT1kamFuZ28uZGIubW9kZWxzLmRlbGV0aW9uLlBST1RFQ1QsIHJlbGF0ZWRfbmFtZT0nKycsIHRvPSdfZGphbmdvX3NjaGVtYS50aWNrZXRjbGFzc2lmaWVyJyksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXQnLAogICAgICAgICAgICBuYW1lPSdsb2NhdGlvbkNsYXNzaWZpZXInLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRm9yZWlnbktleShkYl9jb2x1bW49J2xvY2F0aW9uQ2xhc3NpZmllcicsIG51bGw9VHJ1ZSwgb25fZGVsZXRlPWRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24uUFJPVEVDVCwgcmVsYXRlZF9uYW1lPScrJywgdG89J19kamFuZ29fc2NoZW1hLnRpY2tldGNsYXNzaWZpZXInKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldCcsCiAgICAgICAgICAgIG5hbWU9J3N1YmplY3RDbGFzc2lmaWVyJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkZvcmVpZ25LZXkoZGJfY29sdW1uPSdzdWJqZWN0Q2xhc3NpZmllcicsIG51bGw9VHJ1ZSwgb25fZGVsZXRlPWRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24uUFJPVEVDVCwgcmVsYXRlZF9uYW1lPScrJywgdG89J19kamFuZ29fc2NoZW1hLnRpY2tldGNsYXNzaWZpZXInKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGNoYW5nZScsCiAgICAgICAgICAgIG5hbWU9J2NhdGVnb3J5Q2xhc3NpZmllckRpc3BsYXlOYW1lRnJvbScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5UZXh0RmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGNoYW5nZScsCiAgICAgICAgICAgIG5hbWU9J2NhdGVnb3J5Q2xhc3NpZmllckRpc3BsYXlOYW1lVG8nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBuYW1lPSdjYXRlZ29yeUNsYXNzaWZpZXJJZEZyb20nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVVVJREZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBuYW1lPSdjYXRlZ29yeUNsYXNzaWZpZXJJZFRvJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlVVSURGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0nbG9jYXRpb25DbGFzc2lmaWVyRGlzcGxheU5hbWVGcm9tJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0nbG9jYXRpb25DbGFzc2lmaWVyRGlzcGxheU5hbWVUbycsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5UZXh0RmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGNoYW5nZScsCiAgICAgICAgICAgIG5hbWU9J2xvY2F0aW9uQ2xhc3NpZmllcklkRnJvbScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5VVUlERmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGNoYW5nZScsCiAgICAgICAgICAgIG5hbWU9J2xvY2F0aW9uQ2xhc3NpZmllcklkVG8nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVVVJREZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBuYW1lPSdzdWJqZWN0Q2xhc3NpZmllckRpc3BsYXlOYW1lRnJvbScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5UZXh0RmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGNoYW5nZScsCiAgICAgICAgICAgIG5hbWU9J3N1YmplY3RDbGFzc2lmaWVyRGlzcGxheU5hbWVUbycsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5UZXh0RmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGNoYW5nZScsCiAgICAgICAgICAgIG5hbWU9J3N1YmplY3RDbGFzc2lmaWVySWRGcm9tJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlVVSURGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0nc3ViamVjdENsYXNzaWZpZXJJZFRvJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlVVSURGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2xhc3NpZmllcicsCiAgICAgICAgICAgIG5hbWU9J3R5cGUnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuQ2hhckZpZWxkKGJsYW5rPVRydWUsIGNob2ljZXM9WygnbG9jYXRpb24nLCAnbG9jYXRpb24nKSwgKCdjYXRlZ29yeScsICdjYXRlZ29yeScpLCAoJ3N1YmplY3QnLCAnc3ViamVjdCcpXSwgbWF4X2xlbmd0aD01MCwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGNsYXNzaWZpZXJoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0ndHlwZScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5UZXh0RmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdjYXRlZ29yeUNsYXNzaWZpZXInLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVVVJREZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nbG9jYXRpb25DbGFzc2lmaWVyJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlVVSURGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J3N1YmplY3RDbGFzc2lmaWVyJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlVVSURGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXQnLAogICAgICAgICAgICBuYW1lPSdjbGFzc2lmaWVyJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkZvcmVpZ25LZXkoYmxhbms9VHJ1ZSwgZGJfY29sdW1uPSdjbGFzc2lmaWVyJywgbnVsbD1UcnVlLCBvbl9kZWxldGU9ZGphbmdvLmRiLm1vZGVscy5kZWxldGlvbi5QUk9URUNULCByZWxhdGVkX25hbWU9JysnLCB0bz0nX2RqYW5nb19zY2hlbWEudGlja2V0Y2xhc3NpZmllcicpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXQnLAogICAgICAgICAgICBuYW1lPSdkZXRhaWxzJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5DcmVhdGVNb2RlbCgKICAgICAgICAgICAgbmFtZT0ndGlja2V0Y2xhc3NpZmllcl9yZWxhdGVkY2xhc3NpZmllcnNfdGlja2V0Y2xhc3NpZmllcl9yZWxhdGVzb25jbGFzc2lmaWVycycsCiAgICAgICAgICAgIGZpZWxkcz1bCiAgICAgICAgICAgICAgICAoJ2lkJywgbW9kZWxzLkF1dG9GaWVsZChhdXRvX2NyZWF0ZWQ9VHJ1ZSwgcHJpbWFyeV9rZXk9VHJ1ZSwgc2VyaWFsaXplPUZhbHNlLCB2ZXJib3NlX25hbWU9J0lEJykpLAogICAgICAgICAgICAgICAgKCdUaWNrZXRDbGFzc2lmaWVyX2xlZnRfaWQnLCBtb2RlbHMuRm9yZWlnbktleShkYl9jb2x1bW49J1RpY2tldENsYXNzaWZpZXJfbGVmdF9pZCcsIG9uX2RlbGV0ZT1kamFuZ28uZGIubW9kZWxzLmRlbGV0aW9uLkNBU0NBREUsIHJlbGF0ZWRfbmFtZT0nKycsIHRvPSdfZGphbmdvX3NjaGVtYS50aWNrZXRjbGFzc2lmaWVyJykpLAogICAgICAgICAgICAgICAgKCdUaWNrZXRDbGFzc2lmaWVyX3JpZ2h0X2lkJywgbW9kZWxzLkZvcmVpZ25LZXkoZGJfY29sdW1uPSdUaWNrZXRDbGFzc2lmaWVyX3JpZ2h0X2lkJywgb25fZGVsZXRlPWRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24uQ0FTQ0FERSwgcmVsYXRlZF9uYW1lPScrJywgdG89J19kamFuZ29fc2NoZW1hLnRpY2tldGNsYXNzaWZpZXInKSksCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIG9wdGlvbnM9ewogICAgICAgICAgICAgICAgJ2RiX3RhYmxlJzogJ1RpY2tldENsYXNzaWZpZXJfcmVsYXRlZENsYXNzaWZpZXJzX1RpY2tldENsYXNzaWZpZXJfcmVsYXRlc09uQ2xhc3NpZmllcnMnLAogICAgICAgICAgICB9LAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Remove field parent from ticketclassifier
--
SET CONSTRAINTS "TicketClassifier_parent_e74abbbf_fk_TicketClassifier_id" IMMEDIATE; ALTER TABLE "TicketClassifier" DROP CONSTRAINT "TicketClassifier_parent_e74abbbf_fk_TicketClassifier_id";
ALTER TABLE "TicketClassifier" DROP COLUMN "parent" CASCADE;
--
-- Remove field fullName from ticketclassifierhistoryrecord
--
ALTER TABLE "TicketClassifierHistoryRecord" DROP COLUMN "fullName" CASCADE;
--
-- Remove field parent from ticketclassifierhistoryrecord
--
ALTER TABLE "TicketClassifierHistoryRecord" DROP COLUMN "parent" CASCADE;
--
-- Add field categoryClassifier to ticket
--
ALTER TABLE "Ticket" ADD COLUMN "categoryClassifier" uuid NULL CONSTRAINT "Ticket_categoryClassifier_e01aafa7_fk_TicketClassifier_id" REFERENCES "TicketClassifier"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "Ticket_categoryClassifier_e01aafa7_fk_TicketClassifier_id" IMMEDIATE;
--
-- Add field locationClassifier to ticket
--
ALTER TABLE "Ticket" ADD COLUMN "locationClassifier" uuid NULL CONSTRAINT "Ticket_locationClassifier_5ccefa2a_fk_TicketClassifier_id" REFERENCES "TicketClassifier"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "Ticket_locationClassifier_5ccefa2a_fk_TicketClassifier_id" IMMEDIATE;
--
-- Add field subjectClassifier to ticket
--
ALTER TABLE "Ticket" ADD COLUMN "subjectClassifier" uuid NULL CONSTRAINT "Ticket_subjectClassifier_3944e431_fk_TicketClassifier_id" REFERENCES "TicketClassifier"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "Ticket_subjectClassifier_3944e431_fk_TicketClassifier_id" IMMEDIATE;
--
-- Add field categoryClassifierDisplayNameFrom to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "categoryClassifierDisplayNameFrom" text NULL;
--
-- Add field categoryClassifierDisplayNameTo to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "categoryClassifierDisplayNameTo" text NULL;
--
-- Add field categoryClassifierIdFrom to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "categoryClassifierIdFrom" uuid NULL;
--
-- Add field categoryClassifierIdTo to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "categoryClassifierIdTo" uuid NULL;
--
-- Add field locationClassifierDisplayNameFrom to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "locationClassifierDisplayNameFrom" text NULL;
--
-- Add field locationClassifierDisplayNameTo to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "locationClassifierDisplayNameTo" text NULL;
--
-- Add field locationClassifierIdFrom to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "locationClassifierIdFrom" uuid NULL;
--
-- Add field locationClassifierIdTo to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "locationClassifierIdTo" uuid NULL;
--
-- Add field subjectClassifierDisplayNameFrom to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "subjectClassifierDisplayNameFrom" text NULL;
--
-- Add field subjectClassifierDisplayNameTo to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "subjectClassifierDisplayNameTo" text NULL;
--
-- Add field subjectClassifierIdFrom to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "subjectClassifierIdFrom" uuid NULL;
--
-- Add field subjectClassifierIdTo to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "subjectClassifierIdTo" uuid NULL;
--
-- Add field type to ticketclassifier
--
ALTER TABLE "TicketClassifier" ADD COLUMN "type" varchar(50) NULL;
--
-- Add field type to ticketclassifierhistoryrecord
--
ALTER TABLE "TicketClassifierHistoryRecord" ADD COLUMN "type" text NULL;
--
-- Add field categoryClassifier to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "categoryClassifier" uuid NULL;
--
-- Add field locationClassifier to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "locationClassifier" uuid NULL;
--
-- Add field subjectClassifier to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "subjectClassifier" uuid NULL;
--
-- Alter field classifier on ticket
--
SET CONSTRAINTS "Ticket_classifier_7a786997_fk_TicketClassifier_id" IMMEDIATE; ALTER TABLE "Ticket" DROP CONSTRAINT "Ticket_classifier_7a786997_fk_TicketClassifier_id";
ALTER TABLE "Ticket" ALTER COLUMN "classifier" DROP NOT NULL;
ALTER TABLE "Ticket" ADD CONSTRAINT "Ticket_classifier_7a786997_fk_TicketClassifier_id" FOREIGN KEY ("classifier") REFERENCES "TicketClassifier" ("id") DEFERRABLE INITIALLY DEFERRED;
--
-- Alter field details on ticket
--
ALTER TABLE "Ticket" ALTER COLUMN "details" DROP NOT NULL;
--
-- Create model ticketclassifier_relatedclassifiers_ticketclassifier_relatesonclassifiers
--
CREATE TABLE "TicketClassifier_relatedClassifiers_TicketClassifier_relatesOnClassifiers" ("id" serial NOT NULL PRIMARY KEY, "TicketClassifier_left_id" uuid NOT NULL, "TicketClassifier_right_id" uuid NOT NULL);
CREATE INDEX "Ticket_categoryClassifier_e01aafa7" ON "Ticket" ("categoryClassifier");
CREATE INDEX "Ticket_locationClassifier_5ccefa2a" ON "Ticket" ("locationClassifier");
CREATE INDEX "Ticket_subjectClassifier_3944e431" ON "Ticket" ("subjectClassifier");
ALTER TABLE "TicketClassifier_relatedClassifiers_TicketClassifier_relatesOnClassifiers" ADD CONSTRAINT "TicketClassifier_rel_TicketClassifier_lef_569310a8_fk_TicketCla" FOREIGN KEY ("TicketClassifier_left_id") REFERENCES "TicketClassifier" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "TicketClassifier_relatedClassifiers_TicketClassifier_relatesOnClassifiers" ADD CONSTRAINT "TicketClassifier_rel_TicketClassifier_rig_d47693dd_fk_TicketCla" FOREIGN KEY ("TicketClassifier_right_id") REFERENCES "TicketClassifier" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "TicketClassifier_relatedCl_TicketClassifier_left_id_569310a8" ON "TicketClassifier_relatedClassifiers_TicketClassifier_relatesOnClassifiers" ("TicketClassifier_left_id");
CREATE INDEX "TicketClassifier_relatedCl_TicketClassifier_right_id_d47693dd" ON "TicketClassifier_relatedClassifiers_TicketClassifier_relatesOnClassifiers" ("TicketClassifier_right_id");
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Create model ticketclassifier_relatedclassifiers_ticketclassifier_relatesonclassifiers
--
DROP TABLE "TicketClassifier_relatedClassifiers_TicketClassifier_relatesOnClassifiers" CASCADE;
--
-- Alter field details on ticket
--
ALTER TABLE "Ticket" ALTER COLUMN "details" SET NOT NULL;
--
-- Alter field classifier on ticket
--
SET CONSTRAINTS "Ticket_classifier_7a786997_fk_TicketClassifier_id" IMMEDIATE; ALTER TABLE "Ticket" DROP CONSTRAINT "Ticket_classifier_7a786997_fk_TicketClassifier_id";
ALTER TABLE "Ticket" ALTER COLUMN "classifier" SET NOT NULL;
ALTER TABLE "Ticket" ADD CONSTRAINT "Ticket_classifier_7a786997_fk_TicketClassifier_id" FOREIGN KEY ("classifier") REFERENCES "TicketClassifier" ("id") DEFERRABLE INITIALLY DEFERRED;
--
-- Add field subjectClassifier to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "subjectClassifier" CASCADE;
--
-- Add field locationClassifier to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "locationClassifier" CASCADE;
--
-- Add field categoryClassifier to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "categoryClassifier" CASCADE;
--
-- Add field type to ticketclassifierhistoryrecord
--
ALTER TABLE "TicketClassifierHistoryRecord" DROP COLUMN "type" CASCADE;
--
-- Add field type to ticketclassifier
--
ALTER TABLE "TicketClassifier" DROP COLUMN "type" CASCADE;
--
-- Add field subjectClassifierIdTo to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "subjectClassifierIdTo" CASCADE;
--
-- Add field subjectClassifierIdFrom to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "subjectClassifierIdFrom" CASCADE;
--
-- Add field subjectClassifierDisplayNameTo to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "subjectClassifierDisplayNameTo" CASCADE;
--
-- Add field subjectClassifierDisplayNameFrom to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "subjectClassifierDisplayNameFrom" CASCADE;
--
-- Add field locationClassifierIdTo to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "locationClassifierIdTo" CASCADE;
--
-- Add field locationClassifierIdFrom to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "locationClassifierIdFrom" CASCADE;
--
-- Add field locationClassifierDisplayNameTo to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "locationClassifierDisplayNameTo" CASCADE;
--
-- Add field locationClassifierDisplayNameFrom to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "locationClassifierDisplayNameFrom" CASCADE;
--
-- Add field categoryClassifierIdTo to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "categoryClassifierIdTo" CASCADE;
--
-- Add field categoryClassifierIdFrom to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "categoryClassifierIdFrom" CASCADE;
--
-- Add field categoryClassifierDisplayNameTo to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "categoryClassifierDisplayNameTo" CASCADE;
--
-- Add field categoryClassifierDisplayNameFrom to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "categoryClassifierDisplayNameFrom" CASCADE;
--
-- Add field subjectClassifier to ticket
--
ALTER TABLE "Ticket" DROP COLUMN "subjectClassifier" CASCADE;
--
-- Add field locationClassifier to ticket
--
ALTER TABLE "Ticket" DROP COLUMN "locationClassifier" CASCADE;
--
-- Add field categoryClassifier to ticket
--
ALTER TABLE "Ticket" DROP COLUMN "categoryClassifier" CASCADE;
--
-- Remove field parent from ticketclassifierhistoryrecord
--
ALTER TABLE "TicketClassifierHistoryRecord" ADD COLUMN "parent" uuid NULL;
--
-- Remove field fullName from ticketclassifierhistoryrecord
--
ALTER TABLE "TicketClassifierHistoryRecord" ADD COLUMN "fullName" jsonb NULL;
--
-- Remove field parent from ticketclassifier
--
ALTER TABLE "TicketClassifier" ADD COLUMN "parent" uuid NULL CONSTRAINT "TicketClassifier_parent_e74abbbf_fk_TicketClassifier_id" REFERENCES "TicketClassifier"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "TicketClassifier_parent_e74abbbf_fk_TicketClassifier_id" IMMEDIATE;
CREATE INDEX "TicketClassifier_parent_e74abbbf" ON "TicketClassifier" ("parent");
COMMIT;

    `)
}
