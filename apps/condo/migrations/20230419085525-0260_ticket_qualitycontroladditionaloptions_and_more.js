// auto generated by kmigrator
// KMIGRATOR:0260_ticket_qualitycontroladditionaloptions_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMC41IG9uIDIwMjMtMDQtMTkgMDM6NTUKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKaW1wb3J0IGRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24KCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAyNTlfYmlsbGluZ3Byb3BlcnR5X2FkZHJlc3NrZXlfYW5kX21vcmUnKSwKICAgIF0KCiAgICBvcGVyYXRpb25zID0gWwogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldCcsCiAgICAgICAgICAgIG5hbWU9J3F1YWxpdHlDb250cm9sQWRkaXRpb25hbE9wdGlvbnMnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuSlNPTkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXQnLAogICAgICAgICAgICBuYW1lPSdxdWFsaXR5Q29udHJvbENvbW1lbnQnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXQnLAogICAgICAgICAgICBuYW1lPSdxdWFsaXR5Q29udHJvbFVwZGF0ZWRBdCcsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5EYXRlVGltZUZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXQnLAogICAgICAgICAgICBuYW1lPSdxdWFsaXR5Q29udHJvbFVwZGF0ZWRCeScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5Gb3JlaWduS2V5KGJsYW5rPVRydWUsIGRiX2NvbHVtbj0ncXVhbGl0eUNvbnRyb2xVcGRhdGVkQnknLCBudWxsPVRydWUsIG9uX2RlbGV0ZT1kamFuZ28uZGIubW9kZWxzLmRlbGV0aW9uLlNFVF9OVUxMLCByZWxhdGVkX25hbWU9JysnLCB0bz0nX2RqYW5nb19zY2hlbWEudXNlcicpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0JywKICAgICAgICAgICAgbmFtZT0ncXVhbGl0eUNvbnRyb2xWYWx1ZScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5DaGFyRmllbGQoYmxhbms9VHJ1ZSwgY2hvaWNlcz1bKCdiYWQnLCAnYmFkJyksICgnZ29vZCcsICdnb29kJyldLCBtYXhfbGVuZ3RoPTUwLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0ncXVhbGl0eUNvbnRyb2xBZGRpdGlvbmFsT3B0aW9uc0Zyb20nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuSlNPTkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBuYW1lPSdxdWFsaXR5Q29udHJvbEFkZGl0aW9uYWxPcHRpb25zVG8nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuSlNPTkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBuYW1lPSdxdWFsaXR5Q29udHJvbENvbW1lbnRGcm9tJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0ncXVhbGl0eUNvbnRyb2xDb21tZW50VG8nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBuYW1lPSdxdWFsaXR5Q29udHJvbFZhbHVlRnJvbScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5DaGFyRmllbGQoYmxhbms9VHJ1ZSwgY2hvaWNlcz1bKCdiYWQnLCAnYmFkJyksICgnZ29vZCcsICdnb29kJyldLCBtYXhfbGVuZ3RoPTUwLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0ncXVhbGl0eUNvbnRyb2xWYWx1ZVRvJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkNoYXJGaWVsZChibGFuaz1UcnVlLCBjaG9pY2VzPVsoJ2JhZCcsICdiYWQnKSwgKCdnb29kJywgJ2dvb2QnKV0sIG1heF9sZW5ndGg9NTAsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0ncXVhbGl0eUNvbnRyb2xBZGRpdGlvbmFsT3B0aW9ucycsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5KU09ORmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdxdWFsaXR5Q29udHJvbENvbW1lbnQnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0ncXVhbGl0eUNvbnRyb2xVcGRhdGVkQXQnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRGF0ZVRpbWVGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J3F1YWxpdHlDb250cm9sVXBkYXRlZEJ5JywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlVVSURGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J3F1YWxpdHlDb250cm9sVmFsdWUnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field qualityControlAdditionalOptions to ticket
--
ALTER TABLE "Ticket" ADD COLUMN "qualityControlAdditionalOptions" jsonb NULL;
--
-- Add field qualityControlComment to ticket
--
ALTER TABLE "Ticket" ADD COLUMN "qualityControlComment" text NULL;
--
-- Add field qualityControlUpdatedAt to ticket
--
ALTER TABLE "Ticket" ADD COLUMN "qualityControlUpdatedAt" timestamp with time zone NULL;
--
-- Add field qualityControlUpdatedBy to ticket
--
ALTER TABLE "Ticket" ADD COLUMN "qualityControlUpdatedBy" uuid NULL CONSTRAINT "Ticket_qualityControlUpdatedBy_bb15f8ad_fk_User_id" REFERENCES "User"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "Ticket_qualityControlUpdatedBy_bb15f8ad_fk_User_id" IMMEDIATE;
--
-- Add field qualityControlValue to ticket
--
ALTER TABLE "Ticket" ADD COLUMN "qualityControlValue" varchar(50) NULL;
--
-- Add field qualityControlAdditionalOptionsFrom to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "qualityControlAdditionalOptionsFrom" jsonb NULL;
--
-- Add field qualityControlAdditionalOptionsTo to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "qualityControlAdditionalOptionsTo" jsonb NULL;
--
-- Add field qualityControlCommentFrom to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "qualityControlCommentFrom" text NULL;
--
-- Add field qualityControlCommentTo to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "qualityControlCommentTo" text NULL;
--
-- Add field qualityControlValueFrom to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "qualityControlValueFrom" varchar(50) NULL;
--
-- Add field qualityControlValueTo to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "qualityControlValueTo" varchar(50) NULL;
--
-- Add field qualityControlAdditionalOptions to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "qualityControlAdditionalOptions" jsonb NULL;
--
-- Add field qualityControlComment to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "qualityControlComment" text NULL;
--
-- Add field qualityControlUpdatedAt to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "qualityControlUpdatedAt" timestamp with time zone NULL;
--
-- Add field qualityControlUpdatedBy to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "qualityControlUpdatedBy" uuid NULL;
--
-- Add field qualityControlValue to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "qualityControlValue" text NULL;
CREATE INDEX "Ticket_qualityControlUpdatedBy_bb15f8ad" ON "Ticket" ("qualityControlUpdatedBy");
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field qualityControlValue to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "qualityControlValue" CASCADE;
--
-- Add field qualityControlUpdatedBy to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "qualityControlUpdatedBy" CASCADE;
--
-- Add field qualityControlUpdatedAt to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "qualityControlUpdatedAt" CASCADE;
--
-- Add field qualityControlComment to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "qualityControlComment" CASCADE;
--
-- Add field qualityControlAdditionalOptions to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "qualityControlAdditionalOptions" CASCADE;
--
-- Add field qualityControlValueTo to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "qualityControlValueTo" CASCADE;
--
-- Add field qualityControlValueFrom to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "qualityControlValueFrom" CASCADE;
--
-- Add field qualityControlCommentTo to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "qualityControlCommentTo" CASCADE;
--
-- Add field qualityControlCommentFrom to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "qualityControlCommentFrom" CASCADE;
--
-- Add field qualityControlAdditionalOptionsTo to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "qualityControlAdditionalOptionsTo" CASCADE;
--
-- Add field qualityControlAdditionalOptionsFrom to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "qualityControlAdditionalOptionsFrom" CASCADE;
--
-- Add field qualityControlValue to ticket
--
ALTER TABLE "Ticket" DROP COLUMN "qualityControlValue" CASCADE;
--
-- Add field qualityControlUpdatedBy to ticket
--
ALTER TABLE "Ticket" DROP COLUMN "qualityControlUpdatedBy" CASCADE;
--
-- Add field qualityControlUpdatedAt to ticket
--
ALTER TABLE "Ticket" DROP COLUMN "qualityControlUpdatedAt" CASCADE;
--
-- Add field qualityControlComment to ticket
--
ALTER TABLE "Ticket" DROP COLUMN "qualityControlComment" CASCADE;
--
-- Add field qualityControlAdditionalOptions to ticket
--
ALTER TABLE "Ticket" DROP COLUMN "qualityControlAdditionalOptions" CASCADE;
COMMIT;

    `)
}
