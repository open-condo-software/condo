// auto generated by kmigrator
// KMIGRATOR:0366_remove_serviceconsumer_billingaccount_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMi4xIG9uIDIwMjQtMDItMTMgMTU6NTcKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zCgoKY2xhc3MgTWlncmF0aW9uKG1pZ3JhdGlvbnMuTWlncmF0aW9uKToKCiAgICBkZXBlbmRlbmNpZXMgPSBbCiAgICAgICAgKCdfZGphbmdvX3NjaGVtYScsICcwMzY1X2JhbmthY2NvdW50X2NsYXNzaWZpY2F0aW9uY29kZV9hbmRfbW9yZScpLAogICAgXQoKICAgIG9wZXJhdGlvbnMgPSBbCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nc2VydmljZWNvbnN1bWVyJywKICAgICAgICAgICAgbmFtZT0nYmlsbGluZ0FjY291bnQnLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nc2VydmljZWNvbnN1bWVyaGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J2JpbGxpbmdBY2NvdW50JywKICAgICAgICApLAogICAgXQo=

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Remove field billingAccount from serviceconsumer
--
-- SET CONSTRAINTS "ServiceConsumer_billingAccount_71105b51_fk_BillingAccount_id" IMMEDIATE; ALTER TABLE "ServiceConsumer" DROP CONSTRAINT "ServiceConsumer_billingAccount_71105b51_fk_BillingAccount_id";
-- ALTER TABLE "ServiceConsumer" DROP COLUMN "billingAccount" CASCADE;
--
-- Remove field billingAccount from serviceconsumerhistoryrecord
--
-- ALTER TABLE "ServiceConsumerHistoryRecord" DROP COLUMN "billingAccount" CASCADE;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Remove field billingAccount from serviceconsumerhistoryrecord
--
-- ALTER TABLE "ServiceConsumerHistoryRecord" ADD COLUMN "billingAccount" uuid NULL;
--
-- Remove field billingAccount from serviceconsumer
--
-- ALTER TABLE "ServiceConsumer" ADD COLUMN "billingAccount" uuid NULL CONSTRAINT "ServiceConsumer_billingAccount_71105b51_fk_BillingAccount_id" REFERENCES "BillingAccount"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "ServiceConsumer_billingAccount_71105b51_fk_BillingAccount_id" IMMEDIATE;
-- CREATE INDEX "ServiceConsumer_billingAccount_71105b51" ON "ServiceConsumer" ("billingAccount");
COMMIT;

    `)
}
