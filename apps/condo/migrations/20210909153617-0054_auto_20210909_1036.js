// auto generated by kmigrator
// KMIGRATOR:0054_auto_20210909_1036:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi41IG9uIDIwMjEtMDktMDkgMTA6MzYKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAwNTNfYXV0b18yMDIxMDkwOF8wODEwJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdtZXRlcicsCiAgICAgICAgICAgIG5hbWU9J3NlYWxpbmdEYXRlJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkRhdGVUaW1lRmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J21ldGVyaGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J3NlYWxpbmdEYXRlJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkRhdGVUaW1lRmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWx0ZXJGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nbWV0ZXJyZWFkaW5nJywKICAgICAgICAgICAgbmFtZT0ndmFsdWUxJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkRlY2ltYWxGaWVsZChkZWNpbWFsX3BsYWNlcz00LCBtYXhfZGlnaXRzPTE4KSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWx0ZXJGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nbWV0ZXJyZWFkaW5nJywKICAgICAgICAgICAgbmFtZT0ndmFsdWUyJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkRlY2ltYWxGaWVsZChibGFuaz1UcnVlLCBkZWNpbWFsX3BsYWNlcz00LCBtYXhfZGlnaXRzPTE4LCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdtZXRlcnJlYWRpbmcnLAogICAgICAgICAgICBuYW1lPSd2YWx1ZTMnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRGVjaW1hbEZpZWxkKGJsYW5rPVRydWUsIGRlY2ltYWxfcGxhY2VzPTQsIG1heF9kaWdpdHM9MTgsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFsdGVyRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J21ldGVycmVhZGluZycsCiAgICAgICAgICAgIG5hbWU9J3ZhbHVlNCcsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5EZWNpbWFsRmllbGQoYmxhbms9VHJ1ZSwgZGVjaW1hbF9wbGFjZXM9NCwgbWF4X2RpZ2l0cz0xOCwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWx0ZXJGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nbWV0ZXJyZWFkaW5naGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J3ZhbHVlMScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5EZWNpbWFsRmllbGQoYmxhbms9VHJ1ZSwgZGVjaW1hbF9wbGFjZXM9NCwgbWF4X2RpZ2l0cz0xOCwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWx0ZXJGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nbWV0ZXJyZWFkaW5naGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J3ZhbHVlMicsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5EZWNpbWFsRmllbGQoYmxhbms9VHJ1ZSwgZGVjaW1hbF9wbGFjZXM9NCwgbWF4X2RpZ2l0cz0xOCwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWx0ZXJGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nbWV0ZXJyZWFkaW5naGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J3ZhbHVlMycsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5EZWNpbWFsRmllbGQoYmxhbms9VHJ1ZSwgZGVjaW1hbF9wbGFjZXM9NCwgbWF4X2RpZ2l0cz0xOCwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWx0ZXJGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nbWV0ZXJyZWFkaW5naGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J3ZhbHVlNCcsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5EZWNpbWFsRmllbGQoYmxhbms9VHJ1ZSwgZGVjaW1hbF9wbGFjZXM9NCwgbWF4X2RpZ2l0cz0xOCwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgXQo=

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field sealingDate to meter
--
ALTER TABLE "Meter" ADD COLUMN "sealingDate" timestamp with time zone NULL;
--
-- Add field sealingDate to meterhistoryrecord
--
ALTER TABLE "MeterHistoryRecord" ADD COLUMN "sealingDate" timestamp with time zone NULL;
--
-- Alter field value1 on meterreading
--
ALTER TABLE "MeterReading" ALTER COLUMN "value1" TYPE numeric(18, 4) USING "value1"::numeric(18, 4);
--
-- Alter field value2 on meterreading
--
ALTER TABLE "MeterReading" ALTER COLUMN "value2" TYPE numeric(18, 4) USING "value2"::numeric(18, 4);
--
-- Alter field value3 on meterreading
--
ALTER TABLE "MeterReading" ALTER COLUMN "value3" TYPE numeric(18, 4) USING "value3"::numeric(18, 4);
--
-- Alter field value4 on meterreading
--
ALTER TABLE "MeterReading" ALTER COLUMN "value4" TYPE numeric(18, 4) USING "value4"::numeric(18, 4);
--
-- Alter field value1 on meterreadinghistoryrecord
--
ALTER TABLE "MeterReadingHistoryRecord" ALTER COLUMN "value1" TYPE numeric(18, 4) USING "value1"::numeric(18, 4);
--
-- Alter field value2 on meterreadinghistoryrecord
--
ALTER TABLE "MeterReadingHistoryRecord" ALTER COLUMN "value2" TYPE numeric(18, 4) USING "value2"::numeric(18, 4);
--
-- Alter field value3 on meterreadinghistoryrecord
--
ALTER TABLE "MeterReadingHistoryRecord" ALTER COLUMN "value3" TYPE numeric(18, 4) USING "value3"::numeric(18, 4);
--
-- Alter field value4 on meterreadinghistoryrecord
--
ALTER TABLE "MeterReadingHistoryRecord" ALTER COLUMN "value4" TYPE numeric(18, 4) USING "value4"::numeric(18, 4);
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field value4 on meterreadinghistoryrecord
--
ALTER TABLE "MeterReadingHistoryRecord" ALTER COLUMN "value4" TYPE integer USING "value4"::integer;
--
-- Alter field value3 on meterreadinghistoryrecord
--
ALTER TABLE "MeterReadingHistoryRecord" ALTER COLUMN "value3" TYPE integer USING "value3"::integer;
--
-- Alter field value2 on meterreadinghistoryrecord
--
ALTER TABLE "MeterReadingHistoryRecord" ALTER COLUMN "value2" TYPE integer USING "value2"::integer;
--
-- Alter field value1 on meterreadinghistoryrecord
--
ALTER TABLE "MeterReadingHistoryRecord" ALTER COLUMN "value1" TYPE integer USING "value1"::integer;
--
-- Alter field value4 on meterreading
--
ALTER TABLE "MeterReading" ALTER COLUMN "value4" TYPE integer USING "value4"::integer;
--
-- Alter field value3 on meterreading
--
ALTER TABLE "MeterReading" ALTER COLUMN "value3" TYPE integer USING "value3"::integer;
--
-- Alter field value2 on meterreading
--
ALTER TABLE "MeterReading" ALTER COLUMN "value2" TYPE integer USING "value2"::integer;
--
-- Alter field value1 on meterreading
--
ALTER TABLE "MeterReading" ALTER COLUMN "value1" TYPE integer USING "value1"::integer;
--
-- Add field sealingDate to meterhistoryrecord
--
ALTER TABLE "MeterHistoryRecord" DROP COLUMN "sealingDate" CASCADE;
--
-- Add field sealingDate to meter
--
ALTER TABLE "Meter" DROP COLUMN "sealingDate" CASCADE;
COMMIT;

    `)
}
