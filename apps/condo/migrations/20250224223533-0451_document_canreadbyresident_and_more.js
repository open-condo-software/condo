// auto generated by kmigrator
// KMIGRATOR:0451_document_canreadbyresident_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDUuMS40IG9uIDIwMjUtMDItMjQgMTc6MzUKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzA0NTBfcmVuYW1lX3F1b3RhX2NvbnRhY3Rfb3duZXJzaGlwcGVyY2VudGFnZV9hbmRfbW9yZScpLAogICAgXQoKICAgIG9wZXJhdGlvbnMgPSBbCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nZG9jdW1lbnQnLAogICAgICAgICAgICBuYW1lPSdjYW5SZWFkQnlSZXNpZGVudCcsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5Cb29sZWFuRmllbGQoZGVmYXVsdD1GYWxzZSksCiAgICAgICAgICAgIHByZXNlcnZlX2RlZmF1bHQ9RmFsc2UsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdkb2N1bWVudGhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdjYW5SZWFkQnlSZXNpZGVudCcsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5Cb29sZWFuRmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldCcsCiAgICAgICAgICAgIG5hbWU9J2N1c3RvbUNsYXNzaWZpZXInLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXQnLAogICAgICAgICAgICBuYW1lPSdjdXN0b21PcmRlcicsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5JbnRlZ2VyRmllbGQoZGVmYXVsdD0xKSwKICAgICAgICAgICAgcHJlc2VydmVfZGVmYXVsdD1GYWxzZSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldCcsCiAgICAgICAgICAgIG5hbWU9J3RpdGxlJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0nY3VzdG9tQ2xhc3NpZmllckZyb20nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBuYW1lPSdjdXN0b21DbGFzc2lmaWVyVG8nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBuYW1lPSdjdXN0b21PcmRlckZyb20nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuSW50ZWdlckZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBuYW1lPSdjdXN0b21PcmRlclRvJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkludGVnZXJGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0ndGl0bGVGcm9tJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0ndGl0bGVUbycsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5UZXh0RmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdjdXN0b21DbGFzc2lmaWVyJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J2N1c3RvbU9yZGVyJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkludGVnZXJGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J3RpdGxlJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field canReadByResident to document
--
ALTER TABLE "Document" ADD COLUMN "canReadByResident" boolean DEFAULT false NOT NULL;
ALTER TABLE "Document" ALTER COLUMN "canReadByResident" DROP DEFAULT;
--
-- Add field canReadByResident to documenthistoryrecord
--
ALTER TABLE "DocumentHistoryRecord" ADD COLUMN "canReadByResident" boolean NULL;
--
-- Add field customClassifier to ticket
--
ALTER TABLE "Ticket" ADD COLUMN "customClassifier" text NULL;
--
-- Add field customOrder to ticket
--
ALTER TABLE "Ticket" ADD COLUMN "customOrder" integer DEFAULT 1 NOT NULL;
ALTER TABLE "Ticket" ALTER COLUMN "customOrder" DROP DEFAULT;
--
-- Add field title to ticket
--
ALTER TABLE "Ticket" ADD COLUMN "title" text NULL;
--
-- Add field customClassifierFrom to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "customClassifierFrom" text NULL;
--
-- Add field customClassifierTo to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "customClassifierTo" text NULL;
--
-- Add field customOrderFrom to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "customOrderFrom" integer NULL;
--
-- Add field customOrderTo to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "customOrderTo" integer NULL;
--
-- Add field titleFrom to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "titleFrom" text NULL;
--
-- Add field titleTo to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "titleTo" text NULL;
--
-- Add field customClassifier to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "customClassifier" text NULL;
--
-- Add field customOrder to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "customOrder" integer NULL;
--
-- Add field title to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "title" text NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field title to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "title" CASCADE;
--
-- Add field customOrder to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "customOrder" CASCADE;
--
-- Add field customClassifier to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "customClassifier" CASCADE;
--
-- Add field titleTo to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "titleTo" CASCADE;
--
-- Add field titleFrom to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "titleFrom" CASCADE;
--
-- Add field customOrderTo to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "customOrderTo" CASCADE;
--
-- Add field customOrderFrom to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "customOrderFrom" CASCADE;
--
-- Add field customClassifierTo to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "customClassifierTo" CASCADE;
--
-- Add field customClassifierFrom to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "customClassifierFrom" CASCADE;
--
-- Add field title to ticket
--
ALTER TABLE "Ticket" DROP COLUMN "title" CASCADE;
--
-- Add field customOrder to ticket
--
ALTER TABLE "Ticket" DROP COLUMN "customOrder" CASCADE;
--
-- Add field customClassifier to ticket
--
ALTER TABLE "Ticket" DROP COLUMN "customClassifier" CASCADE;
--
-- Add field canReadByResident to documenthistoryrecord
--
ALTER TABLE "DocumentHistoryRecord" DROP COLUMN "canReadByResident" CASCADE;
--
-- Add field canReadByResident to document
--
ALTER TABLE "Document" DROP COLUMN "canReadByResident" CASCADE;
COMMIT;

    `)
}
