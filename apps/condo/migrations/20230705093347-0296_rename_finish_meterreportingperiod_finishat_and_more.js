// auto generated by kmigrator
// KMIGRATOR:0296_rename_finish_meterreportingperiod_finishat_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMSBvbiAyMDIzLTA3LTA1IDA0OjM0Cgpmcm9tIGRqYW5nby5kYiBpbXBvcnQgbWlncmF0aW9ucwoKCmNsYXNzIE1pZ3JhdGlvbihtaWdyYXRpb25zLk1pZ3JhdGlvbik6CgogICAgZGVwZW5kZW5jaWVzID0gWwogICAgICAgICgnX2RqYW5nb19zY2hlbWEnLCAnMDI5NV9yZW5hbWVfZmlsZV9iaWxsaW5ncmVjZWlwdGZpbGVfc2Vuc2l0aXZlZGF0YWZpbGVfYW5kX21vcmUnKSwKICAgIF0KCiAgICBvcGVyYXRpb25zID0gWwogICAgICAgIG1pZ3JhdGlvbnMuUmVuYW1lRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J21ldGVycmVwb3J0aW5ncGVyaW9kJywKICAgICAgICAgICAgb2xkX25hbWU9J2ZpbmlzaCcsCiAgICAgICAgICAgIG5ld19uYW1lPSdmaW5pc2hBdCcsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLlJlbmFtZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdtZXRlcnJlcG9ydGluZ3BlcmlvZCcsCiAgICAgICAgICAgIG9sZF9uYW1lPSdzdGFydCcsCiAgICAgICAgICAgIG5ld19uYW1lPSdzdGFydEF0JywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuUmVuYW1lRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J21ldGVycmVwb3J0aW5ncGVyaW9kaGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG9sZF9uYW1lPSdmaW5pc2gnLAogICAgICAgICAgICBuZXdfbmFtZT0nZmluaXNoQXQnLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW5hbWVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nbWV0ZXJyZXBvcnRpbmdwZXJpb2RoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgb2xkX25hbWU9J3N0YXJ0JywKICAgICAgICAgICAgbmV3X25hbWU9J3N0YXJ0QXQnLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nbWV0ZXJyZXBvcnRpbmdwZXJpb2QnLAogICAgICAgICAgICBuYW1lPSdiMmNBcHAnLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nbWV0ZXJyZXBvcnRpbmdwZXJpb2RoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nYjJjQXBwJywKICAgICAgICApLAogICAgXQo=

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Rename field finish on meterreportingperiod to finishAt
--
ALTER TABLE "MeterReportingPeriod" RENAME COLUMN "finish" TO "finishAt";
--
-- Rename field start on meterreportingperiod to startAt
--
ALTER TABLE "MeterReportingPeriod" RENAME COLUMN "start" TO "startAt";
--
-- Rename field finish on meterreportingperiodhistoryrecord to finishAt
--
ALTER TABLE "MeterReportingPeriodHistoryRecord" RENAME COLUMN "finish" TO "finishAt";
--
-- Rename field start on meterreportingperiodhistoryrecord to startAt
--
ALTER TABLE "MeterReportingPeriodHistoryRecord" RENAME COLUMN "start" TO "startAt";
--
-- Remove field b2cApp from meterreportingperiod
--
SET CONSTRAINTS "MeterReportingPeriod_b2cApp_76380b69_fk_B2CApp_id" IMMEDIATE; ALTER TABLE "MeterReportingPeriod" DROP CONSTRAINT "MeterReportingPeriod_b2cApp_76380b69_fk_B2CApp_id";
ALTER TABLE "MeterReportingPeriod" DROP COLUMN "b2cApp" CASCADE;
--
-- Remove field b2cApp from meterreportingperiodhistoryrecord
--
ALTER TABLE "MeterReportingPeriodHistoryRecord" DROP COLUMN "b2cApp" CASCADE;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Remove field b2cApp from meterreportingperiodhistoryrecord
--
ALTER TABLE "MeterReportingPeriodHistoryRecord" ADD COLUMN "b2cApp" uuid NULL;
--
-- Remove field b2cApp from meterreportingperiod
--
ALTER TABLE "MeterReportingPeriod" ADD COLUMN "b2cApp" uuid NULL CONSTRAINT "MeterReportingPeriod_b2cApp_76380b69_fk_B2CApp_id" REFERENCES "B2CApp"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "MeterReportingPeriod_b2cApp_76380b69_fk_B2CApp_id" IMMEDIATE;
--
-- Rename field start on meterreportingperiodhistoryrecord to startAt
--
ALTER TABLE "MeterReportingPeriodHistoryRecord" RENAME COLUMN "startAt" TO "start";
--
-- Rename field finish on meterreportingperiodhistoryrecord to finishAt
--
ALTER TABLE "MeterReportingPeriodHistoryRecord" RENAME COLUMN "finishAt" TO "finish";
--
-- Rename field start on meterreportingperiod to startAt
--
ALTER TABLE "MeterReportingPeriod" RENAME COLUMN "startAt" TO "start";
--
-- Rename field finish on meterreportingperiod to finishAt
--
ALTER TABLE "MeterReportingPeriod" RENAME COLUMN "finishAt" TO "finish";
CREATE INDEX "MeterReportingPeriod_b2cApp_76380b69" ON "MeterReportingPeriod" ("b2cApp");
COMMIT;

    `)
}
