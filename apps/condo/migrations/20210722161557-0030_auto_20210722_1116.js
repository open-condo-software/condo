// auto generated by kmigrator
// KMIGRATOR:0030_auto_20210722_1116:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi41IG9uIDIwMjEtMDctMjIgMTE6MTYKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKaW1wb3J0IGRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24KCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAwMjlfYXV0b18yMDIxMDcyMl8wNjMzJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLkNyZWF0ZU1vZGVsKAogICAgICAgICAgICBuYW1lPSd0aWNrZXRjbGFzc2lmaWVyX2RlcGVuZGFudGNsYXNzaWZpZXJzX3RpY2tldGNsYXNzaWZpZXJfZGVwZW5kc29uY2xhc3NpZmllcnMnLAogICAgICAgICAgICBmaWVsZHM9WwogICAgICAgICAgICAgICAgKCdpZCcsIG1vZGVscy5BdXRvRmllbGQoYXV0b19jcmVhdGVkPVRydWUsIHByaW1hcnlfa2V5PVRydWUsIHNlcmlhbGl6ZT1GYWxzZSwgdmVyYm9zZV9uYW1lPSdJRCcpKSwKICAgICAgICAgICAgICAgICgnVGlja2V0Q2xhc3NpZmllcl9sZWZ0X2lkJywgbW9kZWxzLkZvcmVpZ25LZXkoZGJfY29sdW1uPSdUaWNrZXRDbGFzc2lmaWVyX2xlZnRfaWQnLCBvbl9kZWxldGU9ZGphbmdvLmRiLm1vZGVscy5kZWxldGlvbi5DQVNDQURFLCByZWxhdGVkX25hbWU9JysnLCB0bz0nX2RqYW5nb19zY2hlbWEudGlja2V0Y2xhc3NpZmllcicpKSwKICAgICAgICAgICAgICAgICgnVGlja2V0Q2xhc3NpZmllcl9yaWdodF9pZCcsIG1vZGVscy5Gb3JlaWduS2V5KGRiX2NvbHVtbj0nVGlja2V0Q2xhc3NpZmllcl9yaWdodF9pZCcsIG9uX2RlbGV0ZT1kamFuZ28uZGIubW9kZWxzLmRlbGV0aW9uLkNBU0NBREUsIHJlbGF0ZWRfbmFtZT0nKycsIHRvPSdfZGphbmdvX3NjaGVtYS50aWNrZXRjbGFzc2lmaWVyJykpLAogICAgICAgICAgICBdLAogICAgICAgICAgICBvcHRpb25zPXsKICAgICAgICAgICAgICAgICdkYl90YWJsZSc6ICdUaWNrZXRDbGFzc2lmaWVyX2RlcGVuZGFudENsYXNzaWZpZXJzX1RpY2tldENsYXNzaWZpZXJfZGVwZW5kc09uQ2xhc3NpZmllcnMnLAogICAgICAgICAgICB9LAogICAgICAgICksCiMgICAgICAgIG1pZ3JhdGlvbnMuUmVtb3ZlRmllbGQoCiMgICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjbGFzc2lmaWVyX2xvY2F0aW9uY2xhc3NpZmllcnNfbWFueScsCiMgICAgICAgICAgICBuYW1lPSdUaWNrZXRDbGFzc2lmaWVyX2xlZnRfaWQnLAojICAgICAgICApLAojICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAojICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2xhc3NpZmllcl9sb2NhdGlvbmNsYXNzaWZpZXJzX21hbnknLAojICAgICAgICAgICAgbmFtZT0nVGlja2V0Q2xhc3NpZmllcl9yaWdodF9pZCcsCiMgICAgICAgICksCiMgICAgICAgIG1pZ3JhdGlvbnMuUmVtb3ZlRmllbGQoCiMgICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjbGFzc2lmaWVyX3N1YmplY3RjbGFzc2lmaWVyc19tYW55JywKIyAgICAgICAgICAgIG5hbWU9J1RpY2tldENsYXNzaWZpZXJfbGVmdF9pZCcsCiMgICAgICAgICksCiMgICAgICAgIG1pZ3JhdGlvbnMuUmVtb3ZlRmllbGQoCiMgICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjbGFzc2lmaWVyX3N1YmplY3RjbGFzc2lmaWVyc19tYW55JywKIyAgICAgICAgICAgIG5hbWU9J1RpY2tldENsYXNzaWZpZXJfcmlnaHRfaWQnLAojICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuRGVsZXRlTW9kZWwoCiAgICAgICAgICAgIG5hbWU9J3RpY2tldGNsYXNzaWZpZXJfc3ViamVjdGNsYXNzaWZpZXJzX21hbnknLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5EZWxldGVNb2RlbCgKICAgICAgICAgICAgbmFtZT0ndGlja2V0Y2xhc3NpZmllcl9sb2NhdGlvbmNsYXNzaWZpZXJzX21hbnknLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5EZWxldGVNb2RlbCgKICAgICAgICAgICAgbmFtZT0ndGlja2V0Y2xhc3NpZmllcl9jYXRlZ29yeWNsYXNzaWZpZXJzX21hbnknLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Create model ticketclassifier_dependantclassifiers_ticketclassifier_dependsonclassifiers
--
CREATE TABLE "TicketClassifier_dependantClassifiers_TicketClassifier_dependsOnClassifiers" ("id" serial NOT NULL PRIMARY KEY, "TicketClassifier_left_id" uuid NOT NULL, "TicketClassifier_right_id" uuid NOT NULL);
--
-- Delete model ticketclassifier_subjectclassifiers_many
--
DROP TABLE "TicketClassifier_subjectClassifiers_many" CASCADE;
--
-- Delete model ticketclassifier_locationclassifiers_many
--
DROP TABLE "TicketClassifier_locationClassifiers_many" CASCADE;
--
-- Delete model ticketclassifier_categoryclassifiers_many
--
DROP TABLE "TicketClassifier_categoryClassifiers_many" CASCADE;
ALTER TABLE "TicketClassifier_dependantClassifiers_TicketClassifier_dependsOnClassifiers" ADD CONSTRAINT "TicketClassifier_dep_TicketClassifier_lef_7bbf56ee_fk_TicketCla" FOREIGN KEY ("TicketClassifier_left_id") REFERENCES "TicketClassifier" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "TicketClassifier_dependantClassifiers_TicketClassifier_dependsOnClassifiers" ADD CONSTRAINT "TicketClassifier_dep_TicketClassifier_rig_7f813e3d_fk_TicketCla" FOREIGN KEY ("TicketClassifier_right_id") REFERENCES "TicketClassifier" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "TicketClassifier_dependant_TicketClassifier_left_id_7bbf56ee" ON "TicketClassifier_dependantClassifiers_TicketClassifier_dependsOnClassifiers" ("TicketClassifier_left_id");
CREATE INDEX "TicketClassifier_dependant_TicketClassifier_right_id_7f813e3d" ON "TicketClassifier_dependantClassifiers_TicketClassifier_dependsOnClassifiers" ("TicketClassifier_right_id");
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Delete model ticketclassifier_categoryclassifiers_many
--
CREATE TABLE "TicketClassifier_categoryClassifiers_many" ("id" serial NOT NULL PRIMARY KEY, "TicketClassifier_left_id" uuid NOT NULL, "TicketClassifier_right_id" uuid NOT NULL);
--
-- Delete model ticketclassifier_locationclassifiers_many
--
CREATE TABLE "TicketClassifier_locationClassifiers_many" ("id" serial NOT NULL PRIMARY KEY, "TicketClassifier_left_id" uuid NOT NULL, "TicketClassifier_right_id" uuid NOT NULL);
--
-- Delete model ticketclassifier_subjectclassifiers_many
--
CREATE TABLE "TicketClassifier_subjectClassifiers_many" ("id" serial NOT NULL PRIMARY KEY, "TicketClassifier_left_id" uuid NOT NULL, "TicketClassifier_right_id" uuid NOT NULL);
--
-- Create model ticketclassifier_dependantclassifiers_ticketclassifier_dependsonclassifiers
--
DROP TABLE "TicketClassifier_dependantClassifiers_TicketClassifier_dependsOnClassifiers" CASCADE;
ALTER TABLE "TicketClassifier_categoryClassifiers_many" ADD CONSTRAINT "TicketClassifier_cat_TicketClassifier_lef_ba192bb6_fk_TicketCla" FOREIGN KEY ("TicketClassifier_left_id") REFERENCES "TicketClassifier" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "TicketClassifier_categoryClassifiers_many" ADD CONSTRAINT "TicketClassifier_cat_TicketClassifier_rig_adb99de5_fk_TicketCla" FOREIGN KEY ("TicketClassifier_right_id") REFERENCES "TicketClassifier" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "TicketClassifier_categoryC_TicketClassifier_left_id_ba192bb6" ON "TicketClassifier_categoryClassifiers_many" ("TicketClassifier_left_id");
CREATE INDEX "TicketClassifier_categoryC_TicketClassifier_right_id_adb99de5" ON "TicketClassifier_categoryClassifiers_many" ("TicketClassifier_right_id");
ALTER TABLE "TicketClassifier_locationClassifiers_many" ADD CONSTRAINT "TicketClassifier_loc_TicketClassifier_lef_1e5f6a82_fk_TicketCla" FOREIGN KEY ("TicketClassifier_left_id") REFERENCES "TicketClassifier" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "TicketClassifier_locationClassifiers_many" ADD CONSTRAINT "TicketClassifier_loc_TicketClassifier_rig_d1c40328_fk_TicketCla" FOREIGN KEY ("TicketClassifier_right_id") REFERENCES "TicketClassifier" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "TicketClassifier_locationC_TicketClassifier_left_id_1e5f6a82" ON "TicketClassifier_locationClassifiers_many" ("TicketClassifier_left_id");
CREATE INDEX "TicketClassifier_locationC_TicketClassifier_right_id_d1c40328" ON "TicketClassifier_locationClassifiers_many" ("TicketClassifier_right_id");
ALTER TABLE "TicketClassifier_subjectClassifiers_many" ADD CONSTRAINT "TicketClassifier_sub_TicketClassifier_lef_a93f4f38_fk_TicketCla" FOREIGN KEY ("TicketClassifier_left_id") REFERENCES "TicketClassifier" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "TicketClassifier_subjectClassifiers_many" ADD CONSTRAINT "TicketClassifier_sub_TicketClassifier_rig_29596ef9_fk_TicketCla" FOREIGN KEY ("TicketClassifier_right_id") REFERENCES "TicketClassifier" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "TicketClassifier_subjectCl_TicketClassifier_left_id_a93f4f38" ON "TicketClassifier_subjectClassifiers_many" ("TicketClassifier_left_id");
CREATE INDEX "TicketClassifier_subjectCl_TicketClassifier_right_id_29596ef9" ON "TicketClassifier_subjectClassifiers_many" ("TicketClassifier_right_id");
COMMIT;

    `)
}
