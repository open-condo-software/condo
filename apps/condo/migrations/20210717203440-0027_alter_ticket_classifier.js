// auto generated by kmigrator
// KMIGRATOR:0027_alter_ticket_classifier:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi41IG9uIDIwMjEtMDctMTcgMTU6MzQKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKaW1wb3J0IGRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24KCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAwMjZfYXV0b18yMDIxMDcwNV8xNjEwJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLkFsdGVyRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldCcsCiAgICAgICAgICAgIG5hbWU9J2NsYXNzaWZpZXInLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRm9yZWlnbktleShibGFuaz1UcnVlLCBkYl9jb2x1bW49J2NsYXNzaWZpZXInLCBudWxsPVRydWUsIG9uX2RlbGV0ZT1kamFuZ28uZGIubW9kZWxzLmRlbGV0aW9uLlNFVF9OVUxMLCByZWxhdGVkX25hbWU9JysnLCB0bz0nX2RqYW5nb19zY2hlbWEudGlja2V0Y2xhc3NpZmllcicpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field classifier on ticket
--
SET CONSTRAINTS "Ticket_classifier_7a786997_fk_TicketClassifier_id" IMMEDIATE; ALTER TABLE "Ticket" DROP CONSTRAINT "Ticket_classifier_7a786997_fk_TicketClassifier_id";
ALTER TABLE "Ticket" ALTER COLUMN "classifier" DROP NOT NULL;
ALTER TABLE "Ticket" ADD CONSTRAINT "Ticket_classifier_7a786997_fk_TicketClassifier_id" FOREIGN KEY ("classifier") REFERENCES "TicketClassifier" ("id") DEFERRABLE INITIALLY DEFERRED;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field classifier on ticket
--
SET CONSTRAINTS "Ticket_classifier_7a786997_fk_TicketClassifier_id" IMMEDIATE; ALTER TABLE "Ticket" DROP CONSTRAINT "Ticket_classifier_7a786997_fk_TicketClassifier_id";
ALTER TABLE "Ticket" ALTER COLUMN "classifier" SET NOT NULL;
ALTER TABLE "Ticket" ADD CONSTRAINT "Ticket_classifier_7a786997_fk_TicketClassifier_id" FOREIGN KEY ("classifier") REFERENCES "TicketClassifier" ("id") DEFERRABLE INITIALLY DEFERRED;
COMMIT;

    `)
}
