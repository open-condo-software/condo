// auto generated by kmigrator
// KMIGRATOR:0177_remove_propertyscopeorganizationemployee_organization_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMSBvbiAyMDIyLTA5LTIwIDEwOjQxCgpmcm9tIGRqYW5nby5kYiBpbXBvcnQgbWlncmF0aW9ucwoKCmNsYXNzIE1pZ3JhdGlvbihtaWdyYXRpb25zLk1pZ3JhdGlvbik6CgogICAgZGVwZW5kZW5jaWVzID0gWwogICAgICAgICgnX2RqYW5nb19zY2hlbWEnLCAnMDE3Nl9wcm9wZXJ0eXNjb3Blb3JnYW5pemF0aW9uZW1wbG95ZWVfb3JnYW5pemF0aW9uX2FuZF9tb3JlJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdwcm9wZXJ0eXNjb3Blb3JnYW5pemF0aW9uZW1wbG95ZWUnLAogICAgICAgICAgICBuYW1lPSdvcmdhbml6YXRpb24nLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ncHJvcGVydHlzY29wZW9yZ2FuaXphdGlvbmVtcGxveWVlaGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J29yZ2FuaXphdGlvbicsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdwcm9wZXJ0eXNjb3BlcHJvcGVydHknLAogICAgICAgICAgICBuYW1lPSdvcmdhbml6YXRpb24nLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ncHJvcGVydHlzY29wZXByb3BlcnR5aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J29yZ2FuaXphdGlvbicsCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Remove field organization from propertyscopeorganizationemployee
--
SET CONSTRAINTS "PropertyScopeOrganiz_organization_3890cfae_fk_Organizat" IMMEDIATE; ALTER TABLE "PropertyScopeOrganizationEmployee" DROP CONSTRAINT "PropertyScopeOrganiz_organization_3890cfae_fk_Organizat";
ALTER TABLE "PropertyScopeOrganizationEmployee" DROP COLUMN "organization" CASCADE;
--
-- Remove field organization from propertyscopeorganizationemployeehistoryrecord
--
ALTER TABLE "PropertyScopeOrganizationEmployeeHistoryRecord" DROP COLUMN "organization" CASCADE;
--
-- Remove field organization from propertyscopeproperty
--
SET CONSTRAINTS "PropertyScopeProperty_organization_36e7ef31_fk_Organization_id" IMMEDIATE; ALTER TABLE "PropertyScopeProperty" DROP CONSTRAINT "PropertyScopeProperty_organization_36e7ef31_fk_Organization_id";
ALTER TABLE "PropertyScopeProperty" DROP COLUMN "organization" CASCADE;
--
-- Remove field organization from propertyscopepropertyhistoryrecord
--
ALTER TABLE "PropertyScopePropertyHistoryRecord" DROP COLUMN "organization" CASCADE;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Remove field organization from propertyscopepropertyhistoryrecord
--
ALTER TABLE "PropertyScopePropertyHistoryRecord" ADD COLUMN "organization" uuid NULL;
--
-- Remove field organization from propertyscopeproperty
--
ALTER TABLE "PropertyScopeProperty" ADD COLUMN "organization" uuid NULL CONSTRAINT "PropertyScopeProperty_organization_36e7ef31_fk_Organization_id" REFERENCES "Organization"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "PropertyScopeProperty_organization_36e7ef31_fk_Organization_id" IMMEDIATE;
--
-- Remove field organization from propertyscopeorganizationemployeehistoryrecord
--
ALTER TABLE "PropertyScopeOrganizationEmployeeHistoryRecord" ADD COLUMN "organization" uuid NULL;
--
-- Remove field organization from propertyscopeorganizationemployee
--
ALTER TABLE "PropertyScopeOrganizationEmployee" ADD COLUMN "organization" uuid NULL CONSTRAINT "PropertyScopeOrganiz_organization_3890cfae_fk_Organizat" REFERENCES "Organization"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "PropertyScopeOrganiz_organization_3890cfae_fk_Organizat" IMMEDIATE;
CREATE INDEX "PropertyScopeProperty_organization_36e7ef31" ON "PropertyScopeProperty" ("organization");
CREATE INDEX "PropertyScopeOrganizationEmployee_organization_3890cfae" ON "PropertyScopeOrganizationEmployee" ("organization");
COMMIT;

    `)
}
