// auto generated by kmigrator
// KMIGRATOR:0146_ticket_sectiontype_ticketchange_sectiontypefrom_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMCBvbiAyMDIyLTA3LTEyIDA2OjMzCgpmcm9tIGRqYW5nby5kYiBpbXBvcnQgbWlncmF0aW9ucywgbW9kZWxzCgoKY2xhc3MgTWlncmF0aW9uKG1pZ3JhdGlvbnMuTWlncmF0aW9uKToKCiAgICBkZXBlbmRlbmNpZXMgPSBbCiAgICAgICAgKCdfZGphbmdvX3NjaGVtYScsICcwMTQ1X2FsdGVyX2NvbnRhY3RfdW5pdHR5cGUnKSwKICAgIF0KCiAgICBvcGVyYXRpb25zID0gWwogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldCcsCiAgICAgICAgICAgIG5hbWU9J3NlY3Rpb25UeXBlJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChkZWZhdWx0PSdzZWN0aW9uJyksCiAgICAgICAgICAgIHByZXNlcnZlX2RlZmF1bHQ9RmFsc2UsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBuYW1lPSdzZWN0aW9uVHlwZUZyb20nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBuYW1lPSdzZWN0aW9uVHlwZVRvJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J3NlY3Rpb25UeXBlJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field sectionType to ticket
--
ALTER TABLE "Ticket" ADD COLUMN "sectionType" text DEFAULT 'section' NOT NULL;
ALTER TABLE "Ticket" ALTER COLUMN "sectionType" DROP DEFAULT;
--
-- Add field sectionTypeFrom to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "sectionTypeFrom" text NULL;
--
-- Add field sectionTypeTo to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "sectionTypeTo" text NULL;
--
-- Add field sectionType to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "sectionType" text NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field sectionType to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "sectionType" CASCADE;
--
-- Add field sectionTypeTo to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "sectionTypeTo" CASCADE;
--
-- Add field sectionTypeFrom to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "sectionTypeFrom" CASCADE;
--
-- Add field sectionType to ticket
--
ALTER TABLE "Ticket" DROP COLUMN "sectionType" CASCADE;
COMMIT;

    `)
}
