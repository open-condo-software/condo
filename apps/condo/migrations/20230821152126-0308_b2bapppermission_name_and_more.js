// auto generated by kmigrator
// KMIGRATOR:0308_b2bapppermission_name_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMS41IG9uIDIwMjMtMDgtMjEgMTA6MjEKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAzMDdfbW9iaWxlZmVhdHVyZWNvbmZpZ2hpc3RvcnlyZWNvcmRfYW5kX21vcmUnKSwKICAgIF0KCiAgICBvcGVyYXRpb25zID0gWwogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2IyYmFwcHBlcm1pc3Npb24nLAogICAgICAgICAgICBuYW1lPSduYW1lJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChkZWZhdWx0PSdNYW5hZ2luZycpLAogICAgICAgICAgICBwcmVzZXJ2ZV9kZWZhdWx0PUZhbHNlLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYjJiYXBwcGVybWlzc2lvbmhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSduYW1lJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field name to b2bapppermission
--
ALTER TABLE "B2BAppPermission" ADD COLUMN "name" text DEFAULT 'Managing' NOT NULL;
ALTER TABLE "B2BAppPermission" ALTER COLUMN "name" DROP DEFAULT;
--
-- Add field name to b2bapppermissionhistoryrecord
--
ALTER TABLE "B2BAppPermissionHistoryRecord" ADD COLUMN "name" text NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field name to b2bapppermissionhistoryrecord
--
ALTER TABLE "B2BAppPermissionHistoryRecord" DROP COLUMN "name" CASCADE;
--
-- Add field name to b2bapppermission
--
ALTER TABLE "B2BAppPermission" DROP COLUMN "name" CASCADE;
COMMIT;

    `)
}
