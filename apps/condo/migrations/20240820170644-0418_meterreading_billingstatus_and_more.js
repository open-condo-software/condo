// auto generated by kmigrator
// KMIGRATOR:0418_meterreading_billingstatus_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMi40IG9uIDIwMjQtMDgtMjAgMTI6MDYKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzA0MTdfYmlsbGluZ3JlY2VpcHRfYmlsbGluZ3JlY2VpcHRfcGVyaW9kX2NvbnRleHQnKSwKICAgIF0KCiAgICBvcGVyYXRpb25zID0gWwogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J21ldGVycmVhZGluZycsCiAgICAgICAgICAgIG5hbWU9J2JpbGxpbmdTdGF0dXMnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdtZXRlcnJlYWRpbmcnLAogICAgICAgICAgICBuYW1lPSdiaWxsaW5nU3RhdHVzVGV4dCcsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5UZXh0RmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J21ldGVycmVhZGluZ2hpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdiaWxsaW5nU3RhdHVzJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nbWV0ZXJyZWFkaW5naGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J2JpbGxpbmdTdGF0dXNUZXh0JywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;


SET statement_timeout = '1500s';


--
-- Add field billingStatus to meterreading
--
ALTER TABLE "MeterReading" ADD COLUMN "billingStatus" text NULL;
--
-- Add field billingStatusText to meterreading
--
ALTER TABLE "MeterReading" ADD COLUMN "billingStatusText" text NULL;
--
-- Add field billingStatus to meterreadinghistoryrecord
--
ALTER TABLE "MeterReadingHistoryRecord" ADD COLUMN "billingStatus" text NULL;
--
-- Add field billingStatusText to meterreadinghistoryrecord
--
ALTER TABLE "MeterReadingHistoryRecord" ADD COLUMN "billingStatusText" text NULL;


SET statement_timeout = '10s';


COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field billingStatusText to meterreadinghistoryrecord
--
ALTER TABLE "MeterReadingHistoryRecord" DROP COLUMN "billingStatusText" CASCADE;
--
-- Add field billingStatus to meterreadinghistoryrecord
--
ALTER TABLE "MeterReadingHistoryRecord" DROP COLUMN "billingStatus" CASCADE;
--
-- Add field billingStatusText to meterreading
--
ALTER TABLE "MeterReading" DROP COLUMN "billingStatusText" CASCADE;
--
-- Add field billingStatus to meterreading
--
ALTER TABLE "MeterReading" DROP COLUMN "billingStatus" CASCADE;
COMMIT;

    `)
}
