// auto generated by kmigrator
// KMIGRATOR:0463_ticket_lastcommentwithorganizationtypeat_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDUuMC43IG9uIDIwMjUtMDQtMDQgMTI6MjkKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzA0NjJfYmlsbGluZ2NhdGVnb3J5X3JlY2VpcHR2YWxpZGl0eW1vbnRoc19hbmRfbW9yZScpLAogICAgXQoKICAgIG9wZXJhdGlvbnMgPSBbCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0JywKICAgICAgICAgICAgbmFtZT0nbGFzdENvbW1lbnRXaXRoT3JnYW5pemF0aW9uVHlwZUF0JywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkRhdGVUaW1lRmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldCcsCiAgICAgICAgICAgIG5hbWU9J2xhc3RPcmdhbml6YXRpb25Db21tZW50QXV0aG9yVHlwZScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5DaGFyRmllbGQoYmxhbms9VHJ1ZSwgbWF4X2xlbmd0aD01MCwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGNoYW5nZScsCiAgICAgICAgICAgIG5hbWU9J2xhc3RDb21tZW50V2l0aE9yZ2FuaXphdGlvblR5cGVBdEZyb20nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRGF0ZVRpbWVGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0nbGFzdENvbW1lbnRXaXRoT3JnYW5pemF0aW9uVHlwZUF0VG8nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRGF0ZVRpbWVGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0nbGFzdE9yZ2FuaXphdGlvbkNvbW1lbnRBdXRob3JUeXBlRnJvbScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5DaGFyRmllbGQoYmxhbms9VHJ1ZSwgbWF4X2xlbmd0aD01MCwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGNoYW5nZScsCiAgICAgICAgICAgIG5hbWU9J2xhc3RPcmdhbml6YXRpb25Db21tZW50QXV0aG9yVHlwZVRvJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkNoYXJGaWVsZChibGFuaz1UcnVlLCBtYXhfbGVuZ3RoPTUwLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J2xhc3RDb21tZW50V2l0aE9yZ2FuaXphdGlvblR5cGVBdCcsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5EYXRlVGltZUZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nbGFzdE9yZ2FuaXphdGlvbkNvbW1lbnRBdXRob3JUeXBlJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndXNlcnRpY2tldGNvbW1lbnRyZWFkdGltZScsCiAgICAgICAgICAgIG5hbWU9J3JlYWRPcmdhbml6YXRpb25Db21tZW50QXQnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRGF0ZVRpbWVGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndXNlcnRpY2tldGNvbW1lbnRyZWFkdGltZWhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdyZWFkT3JnYW5pemF0aW9uQ29tbWVudEF0JywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkRhdGVUaW1lRmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgXQo=

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field lastCommentWithOrganizationTypeAt to ticket
--
ALTER TABLE "Ticket" ADD COLUMN "lastCommentWithOrganizationTypeAt" timestamp with time zone NULL;
--
-- Add field lastOrganizationCommentAuthorType to ticket
--
ALTER TABLE "Ticket" ADD COLUMN "lastOrganizationCommentAuthorType" varchar(50) NULL;
--
-- Add field lastCommentWithOrganizationTypeAtFrom to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "lastCommentWithOrganizationTypeAtFrom" timestamp with time zone NULL;
--
-- Add field lastCommentWithOrganizationTypeAtTo to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "lastCommentWithOrganizationTypeAtTo" timestamp with time zone NULL;
--
-- Add field lastOrganizationCommentAuthorTypeFrom to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "lastOrganizationCommentAuthorTypeFrom" varchar(50) NULL;
--
-- Add field lastOrganizationCommentAuthorTypeTo to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "lastOrganizationCommentAuthorTypeTo" varchar(50) NULL;
--
-- Add field lastCommentWithOrganizationTypeAt to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "lastCommentWithOrganizationTypeAt" timestamp with time zone NULL;
--
-- Add field lastOrganizationCommentAuthorType to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "lastOrganizationCommentAuthorType" text NULL;
--
-- Add field readOrganizationCommentAt to userticketcommentreadtime
--
ALTER TABLE "UserTicketCommentReadTime" ADD COLUMN "readOrganizationCommentAt" timestamp with time zone NULL;
--
-- Add field readOrganizationCommentAt to userticketcommentreadtimehistoryrecord
--
ALTER TABLE "UserTicketCommentReadTimeHistoryRecord" ADD COLUMN "readOrganizationCommentAt" timestamp with time zone NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field readOrganizationCommentAt to userticketcommentreadtimehistoryrecord
--
ALTER TABLE "UserTicketCommentReadTimeHistoryRecord" DROP COLUMN "readOrganizationCommentAt" CASCADE;
--
-- Add field readOrganizationCommentAt to userticketcommentreadtime
--
ALTER TABLE "UserTicketCommentReadTime" DROP COLUMN "readOrganizationCommentAt" CASCADE;
--
-- Add field lastOrganizationCommentAuthorType to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "lastOrganizationCommentAuthorType" CASCADE;
--
-- Add field lastCommentWithOrganizationTypeAt to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "lastCommentWithOrganizationTypeAt" CASCADE;
--
-- Add field lastOrganizationCommentAuthorTypeTo to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "lastOrganizationCommentAuthorTypeTo" CASCADE;
--
-- Add field lastOrganizationCommentAuthorTypeFrom to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "lastOrganizationCommentAuthorTypeFrom" CASCADE;
--
-- Add field lastCommentWithOrganizationTypeAtTo to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "lastCommentWithOrganizationTypeAtTo" CASCADE;
--
-- Add field lastCommentWithOrganizationTypeAtFrom to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "lastCommentWithOrganizationTypeAtFrom" CASCADE;
--
-- Add field lastOrganizationCommentAuthorType to ticket
--
ALTER TABLE "Ticket" DROP COLUMN "lastOrganizationCommentAuthorType" CASCADE;
--
-- Add field lastCommentWithOrganizationTypeAt to ticket
--
ALTER TABLE "Ticket" DROP COLUMN "lastCommentWithOrganizationTypeAt" CASCADE;
COMMIT;

    `)
}
