// auto generated by kmigrator
// KMIGRATOR:0270_auto_20230511_0549:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMSBvbiAyMDIzLTA1LTExIDA1OjQ5Cgpmcm9tIGRqYW5nby5kYiBpbXBvcnQgbWlncmF0aW9ucwoKCmNsYXNzIE1pZ3JhdGlvbihtaWdyYXRpb25zLk1pZ3JhdGlvbik6CgogICAgZGVwZW5kZW5jaWVzID0gWwogICAgICAgICgnX2RqYW5nb19zY2hlbWEnLCAnMDI2OV9yZW1vdmVfYmFua3RyYW5zYWN0aW9uX2JhbmtfdHJhbnNhY3Rpb25fdW5pcXVlX251bWJlcl9kYXRlX29yZ2FuaXphdGlvbl9hbmRfbW9yZScpLAogICAgXQoKICAgIG9wZXJhdGlvbnMgPSBbCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
        BEGIN;
            --
            -- [CUSTOM] Set Statement Timeout to some large amount - 25 min (25 * 60 => 1500 sec)
            --
            SET statement_timeout = '1500s';  
            
            UPDATE "BankTransaction" b
            SET "importId" = CONCAT (b."date", '_', b."number")
            WHERE b."importRemoteSystem" = '1CClientBankExchange';
            
            --
            -- [CUSTOM] Revert Statement Timeout to default amount - 10 secs
            --
            SET statement_timeout = '10s';
        COMMIT;
    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    
    `)
}
