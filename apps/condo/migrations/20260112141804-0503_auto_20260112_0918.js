// auto generated by kmigrator
// KMIGRATOR:0503_auto_20260112_0918:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi41IG9uIDIwMjYtMDEtMTIgMDk6MTgKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzA1MDJfdGlja2V0b2JzZXJ2ZXJoaXN0b3J5cmVjb3JkX2FuZF9tb3JlJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdzdWJzY3JpcHRpb25wbGFuJywKICAgICAgICAgICAgbmFtZT0ncGFzc1RpY2tldHMnLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nc3Vic2NyaXB0aW9ucGxhbmhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdwYXNzVGlja2V0cycsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdzdWJzY3JpcHRpb25wbGFuJywKICAgICAgICAgICAgbmFtZT0nY3VzdG9taXphdGlvbicsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5Cb29sZWFuRmllbGQoZGVmYXVsdD1GYWxzZSksCiAgICAgICAgICAgIHByZXNlcnZlX2RlZmF1bHQ9RmFsc2UsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdzdWJzY3JpcHRpb25wbGFuJywKICAgICAgICAgICAgbmFtZT0nZW5hYmxlZEIyQkFwcHMnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuSlNPTkZpZWxkKGRlZmF1bHQ9W10pLAogICAgICAgICAgICBwcmVzZXJ2ZV9kZWZhdWx0PUZhbHNlLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nc3Vic2NyaXB0aW9ucGxhbicsCiAgICAgICAgICAgIG5hbWU9J2VuYWJsZWRCMkNBcHBzJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkpTT05GaWVsZChkZWZhdWx0PVtdKSwKICAgICAgICAgICAgcHJlc2VydmVfZGVmYXVsdD1GYWxzZSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3N1YnNjcmlwdGlvbnBsYW4nLAogICAgICAgICAgICBuYW1lPSdtZXRlcnMnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuQm9vbGVhbkZpZWxkKGRlZmF1bHQ9RmFsc2UpLAogICAgICAgICAgICBwcmVzZXJ2ZV9kZWZhdWx0PUZhbHNlLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nc3Vic2NyaXB0aW9ucGxhbicsCiAgICAgICAgICAgIG5hbWU9J3BheW1lbnRzJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkJvb2xlYW5GaWVsZChkZWZhdWx0PUZhbHNlKSwKICAgICAgICAgICAgcHJlc2VydmVfZGVmYXVsdD1GYWxzZSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3N1YnNjcmlwdGlvbnBsYW4nLAogICAgICAgICAgICBuYW1lPSd0aWNrZXRzJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkJvb2xlYW5GaWVsZChkZWZhdWx0PUZhbHNlKSwKICAgICAgICAgICAgcHJlc2VydmVfZGVmYXVsdD1GYWxzZSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3N1YnNjcmlwdGlvbnBsYW5oaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nY3VzdG9taXphdGlvbicsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5Cb29sZWFuRmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3N1YnNjcmlwdGlvbnBsYW5oaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nZW5hYmxlZEIyQkFwcHMnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuSlNPTkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdzdWJzY3JpcHRpb25wbGFuaGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J2VuYWJsZWRCMkNBcHBzJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkpTT05GaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nc3Vic2NyaXB0aW9ucGxhbmhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdtZXRlcnMnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuQm9vbGVhbkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdzdWJzY3JpcHRpb25wbGFuaGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J3BheW1lbnRzJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkJvb2xlYW5GaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nc3Vic2NyaXB0aW9ucGxhbmhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSd0aWNrZXRzJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkJvb2xlYW5GaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdzdWJzY3JpcHRpb25jb250ZXh0JywKICAgICAgICAgICAgbmFtZT0nZW5kQXQnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRGF0ZUZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFsdGVyRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3N1YnNjcmlwdGlvbmNvbnRleHQnLAogICAgICAgICAgICBuYW1lPSdzdGFydEF0JywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkRhdGVGaWVsZCgpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdzdWJzY3JpcHRpb25jb250ZXh0aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J2VuZEF0JywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkRhdGVGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdzdWJzY3JpcHRpb25jb250ZXh0aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J3N0YXJ0QXQnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRGF0ZUZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Remove field passTickets from subscriptionplan
--
ALTER TABLE "SubscriptionPlan" DROP COLUMN "passTickets" CASCADE;
--
-- Remove field passTickets from subscriptionplanhistoryrecord
--
ALTER TABLE "SubscriptionPlanHistoryRecord" DROP COLUMN "passTickets" CASCADE;
--
-- Add field customization to subscriptionplan
--
ALTER TABLE "SubscriptionPlan" ADD COLUMN "customization" boolean DEFAULT false NOT NULL;
ALTER TABLE "SubscriptionPlan" ALTER COLUMN "customization" DROP DEFAULT;
--
-- Add field enabledB2BApps to subscriptionplan
--
ALTER TABLE "SubscriptionPlan" ADD COLUMN "enabledB2BApps" jsonb DEFAULT '[]' NOT NULL;
ALTER TABLE "SubscriptionPlan" ALTER COLUMN "enabledB2BApps" DROP DEFAULT;
--
-- Add field enabledB2CApps to subscriptionplan
--
ALTER TABLE "SubscriptionPlan" ADD COLUMN "enabledB2CApps" jsonb DEFAULT '[]' NOT NULL;
ALTER TABLE "SubscriptionPlan" ALTER COLUMN "enabledB2CApps" DROP DEFAULT;
--
-- Add field meters to subscriptionplan
--
ALTER TABLE "SubscriptionPlan" ADD COLUMN "meters" boolean DEFAULT false NOT NULL;
ALTER TABLE "SubscriptionPlan" ALTER COLUMN "meters" DROP DEFAULT;
--
-- Add field payments to subscriptionplan
--
ALTER TABLE "SubscriptionPlan" ADD COLUMN "payments" boolean DEFAULT false NOT NULL;
ALTER TABLE "SubscriptionPlan" ALTER COLUMN "payments" DROP DEFAULT;
--
-- Add field tickets to subscriptionplan
--
ALTER TABLE "SubscriptionPlan" ADD COLUMN "tickets" boolean DEFAULT false NOT NULL;
ALTER TABLE "SubscriptionPlan" ALTER COLUMN "tickets" DROP DEFAULT;
--
-- Add field customization to subscriptionplanhistoryrecord
--
ALTER TABLE "SubscriptionPlanHistoryRecord" ADD COLUMN "customization" boolean NULL;
--
-- Add field enabledB2BApps to subscriptionplanhistoryrecord
--
ALTER TABLE "SubscriptionPlanHistoryRecord" ADD COLUMN "enabledB2BApps" jsonb NULL;
--
-- Add field enabledB2CApps to subscriptionplanhistoryrecord
--
ALTER TABLE "SubscriptionPlanHistoryRecord" ADD COLUMN "enabledB2CApps" jsonb NULL;
--
-- Add field meters to subscriptionplanhistoryrecord
--
ALTER TABLE "SubscriptionPlanHistoryRecord" ADD COLUMN "meters" boolean NULL;
--
-- Add field payments to subscriptionplanhistoryrecord
--
ALTER TABLE "SubscriptionPlanHistoryRecord" ADD COLUMN "payments" boolean NULL;
--
-- Add field tickets to subscriptionplanhistoryrecord
--
ALTER TABLE "SubscriptionPlanHistoryRecord" ADD COLUMN "tickets" boolean NULL;
--
-- Alter field endAt on subscriptioncontext
--
ALTER TABLE "SubscriptionContext" ALTER COLUMN "endAt" TYPE date USING "endAt"::date;
--
-- Alter field startAt on subscriptioncontext
--
ALTER TABLE "SubscriptionContext" ALTER COLUMN "startAt" TYPE date USING "startAt"::date;
--
-- Alter field endAt on subscriptioncontexthistoryrecord
--
ALTER TABLE "SubscriptionContextHistoryRecord" ALTER COLUMN "endAt" TYPE date USING "endAt"::date;
--
-- Alter field startAt on subscriptioncontexthistoryrecord
--
ALTER TABLE "SubscriptionContextHistoryRecord" ALTER COLUMN "startAt" TYPE date USING "startAt"::date;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field startAt on subscriptioncontexthistoryrecord
--
ALTER TABLE "SubscriptionContextHistoryRecord" ALTER COLUMN "startAt" TYPE timestamp with time zone USING "startAt"::timestamp with time zone;
--
-- Alter field endAt on subscriptioncontexthistoryrecord
--
ALTER TABLE "SubscriptionContextHistoryRecord" ALTER COLUMN "endAt" TYPE timestamp with time zone USING "endAt"::timestamp with time zone;
--
-- Alter field startAt on subscriptioncontext
--
ALTER TABLE "SubscriptionContext" ALTER COLUMN "startAt" TYPE timestamp with time zone USING "startAt"::timestamp with time zone;
--
-- Alter field endAt on subscriptioncontext
--
ALTER TABLE "SubscriptionContext" ALTER COLUMN "endAt" TYPE timestamp with time zone USING "endAt"::timestamp with time zone;
--
-- Add field tickets to subscriptionplanhistoryrecord
--
ALTER TABLE "SubscriptionPlanHistoryRecord" DROP COLUMN "tickets" CASCADE;
--
-- Add field payments to subscriptionplanhistoryrecord
--
ALTER TABLE "SubscriptionPlanHistoryRecord" DROP COLUMN "payments" CASCADE;
--
-- Add field meters to subscriptionplanhistoryrecord
--
ALTER TABLE "SubscriptionPlanHistoryRecord" DROP COLUMN "meters" CASCADE;
--
-- Add field enabledB2CApps to subscriptionplanhistoryrecord
--
ALTER TABLE "SubscriptionPlanHistoryRecord" DROP COLUMN "enabledB2CApps" CASCADE;
--
-- Add field enabledB2BApps to subscriptionplanhistoryrecord
--
ALTER TABLE "SubscriptionPlanHistoryRecord" DROP COLUMN "enabledB2BApps" CASCADE;
--
-- Add field customization to subscriptionplanhistoryrecord
--
ALTER TABLE "SubscriptionPlanHistoryRecord" DROP COLUMN "customization" CASCADE;
--
-- Add field tickets to subscriptionplan
--
ALTER TABLE "SubscriptionPlan" DROP COLUMN "tickets" CASCADE;
--
-- Add field payments to subscriptionplan
--
ALTER TABLE "SubscriptionPlan" DROP COLUMN "payments" CASCADE;
--
-- Add field meters to subscriptionplan
--
ALTER TABLE "SubscriptionPlan" DROP COLUMN "meters" CASCADE;
--
-- Add field enabledB2CApps to subscriptionplan
--
ALTER TABLE "SubscriptionPlan" DROP COLUMN "enabledB2CApps" CASCADE;
--
-- Add field enabledB2BApps to subscriptionplan
--
ALTER TABLE "SubscriptionPlan" DROP COLUMN "enabledB2BApps" CASCADE;
--
-- Add field customization to subscriptionplan
--
ALTER TABLE "SubscriptionPlan" DROP COLUMN "customization" CASCADE;
--
-- Remove field passTickets from subscriptionplanhistoryrecord
--
ALTER TABLE "SubscriptionPlanHistoryRecord" ADD COLUMN "passTickets" boolean NULL;
--
-- Remove field passTickets from subscriptionplan
--
ALTER TABLE "SubscriptionPlan" ADD COLUMN "passTickets" boolean NOT NULL;
COMMIT;

    `)
}
