// auto generated by kmigrator
// KMIGRATOR:0219_manual_fix_default_value_pushTypeVoIP:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi43IG9uIDIwMjMtMDItMTMgMDY6MjYKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zCgoKY2xhc3MgTWlncmF0aW9uKG1pZ3JhdGlvbnMuTWlncmF0aW9uKToKCiAgICBkZXBlbmRlbmNpZXMgPSBbCiAgICAgICAgKCdfZGphbmdvX3NjaGVtYScsICcwMjE4X2FsdGVyX2JhbmthY2NvdW50X3Byb3BlcnR5JyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;

    SET statement_timeout = '1500s'; 
    
    -- fixes wrong default value introduced in migration 20230203103827-0216_auto_20230203_0538.js
    
    UPDATE "RemoteClient" SET "pushTypeVoIP" = 'default' WHERE "pushTypeVoIP" NOT IN ('default', 'silent_data'); 

    SET statement_timeout = '10s'; 

    COMMIT;
    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;

    COMMIT;

    `)
}
