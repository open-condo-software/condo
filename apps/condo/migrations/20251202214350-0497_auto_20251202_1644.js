// auto generated by kmigrator
// KMIGRATOR:0497_auto_20251202_1644:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi41IG9uIDIwMjUtMTItMDIgMTY6NDQKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzA0OTZfYXV0b18yMDI1MTIwMV8xMzAwJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdzdWJzY3JpcHRpb25jb250ZXh0JywKICAgICAgICAgICAgbmFtZT0nbWFudWFsUHJpY2UnLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nc3Vic2NyaXB0aW9uY29udGV4dCcsCiAgICAgICAgICAgIG5hbWU9J21hbnVhbFByaWNlUmVhc29uJywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuUmVtb3ZlRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3N1YnNjcmlwdGlvbmNvbnRleHRoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nbWFudWFsUHJpY2UnLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nc3Vic2NyaXB0aW9uY29udGV4dGhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdtYW51YWxQcmljZVJlYXNvbicsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdzdWJzY3JpcHRpb25wbGFucHJpY2luZ3J1bGUnLAogICAgICAgICAgICBuYW1lPSdvcmdhbml6YXRpb25GZWF0dXJlcycsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdzdWJzY3JpcHRpb25wbGFucHJpY2luZ3J1bGVoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nb3JnYW5pemF0aW9uRmVhdHVyZXMnLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nc3Vic2NyaXB0aW9ucGxhbnByaWNpbmdydWxlJywKICAgICAgICAgICAgbmFtZT0nY29uZGl0aW9ucycsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5KU09ORmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3N1YnNjcmlwdGlvbnBsYW5wcmljaW5ncnVsZWhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdjb25kaXRpb25zJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkpTT05GaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Remove field manualPrice from subscriptioncontext
--
ALTER TABLE "SubscriptionContext" DROP COLUMN "manualPrice" CASCADE;
--
-- Remove field manualPriceReason from subscriptioncontext
--
ALTER TABLE "SubscriptionContext" DROP COLUMN "manualPriceReason" CASCADE;
--
-- Remove field manualPrice from subscriptioncontexthistoryrecord
--
ALTER TABLE "SubscriptionContextHistoryRecord" DROP COLUMN "manualPrice" CASCADE;
--
-- Remove field manualPriceReason from subscriptioncontexthistoryrecord
--
ALTER TABLE "SubscriptionContextHistoryRecord" DROP COLUMN "manualPriceReason" CASCADE;
--
-- Remove field organizationFeatures from subscriptionplanpricingrule
--
ALTER TABLE "SubscriptionPlanPricingRule" DROP COLUMN "organizationFeatures" CASCADE;
--
-- Remove field organizationFeatures from subscriptionplanpricingrulehistoryrecord
--
ALTER TABLE "SubscriptionPlanPricingRuleHistoryRecord" DROP COLUMN "organizationFeatures" CASCADE;
--
-- Add field conditions to subscriptionplanpricingrule
--
ALTER TABLE "SubscriptionPlanPricingRule" ADD COLUMN "conditions" jsonb NULL;
--
-- Add field conditions to subscriptionplanpricingrulehistoryrecord
--
ALTER TABLE "SubscriptionPlanPricingRuleHistoryRecord" ADD COLUMN "conditions" jsonb NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field conditions to subscriptionplanpricingrulehistoryrecord
--
ALTER TABLE "SubscriptionPlanPricingRuleHistoryRecord" DROP COLUMN "conditions" CASCADE;
--
-- Add field conditions to subscriptionplanpricingrule
--
ALTER TABLE "SubscriptionPlanPricingRule" DROP COLUMN "conditions" CASCADE;
--
-- Remove field organizationFeatures from subscriptionplanpricingrulehistoryrecord
--
ALTER TABLE "SubscriptionPlanPricingRuleHistoryRecord" ADD COLUMN "organizationFeatures" jsonb NULL;
--
-- Remove field organizationFeatures from subscriptionplanpricingrule
--
ALTER TABLE "SubscriptionPlanPricingRule" ADD COLUMN "organizationFeatures" jsonb NOT NULL;
--
-- Remove field manualPriceReason from subscriptioncontexthistoryrecord
--
ALTER TABLE "SubscriptionContextHistoryRecord" ADD COLUMN "manualPriceReason" text NULL;
--
-- Remove field manualPrice from subscriptioncontexthistoryrecord
--
ALTER TABLE "SubscriptionContextHistoryRecord" ADD COLUMN "manualPrice" numeric(18, 4) NULL;
--
-- Remove field manualPriceReason from subscriptioncontext
--
ALTER TABLE "SubscriptionContext" ADD COLUMN "manualPriceReason" text NULL;
--
-- Remove field manualPrice from subscriptioncontext
--
ALTER TABLE "SubscriptionContext" ADD COLUMN "manualPrice" numeric(18, 8) NULL;
COMMIT;

    `)
}
