// auto generated by kmigrator
// KMIGRATOR:0061_property_property_unique_organization_and_address:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMiBvbiAyMDIxLTA5LTI2IDIyOjIwCgpmcm9tIGRqYW5nby5kYiBpbXBvcnQgbWlncmF0aW9ucywgbW9kZWxzCgoKY2xhc3MgTWlncmF0aW9uKG1pZ3JhdGlvbnMuTWlncmF0aW9uKToKCiAgICBkZXBlbmRlbmNpZXMgPSBbCiAgICAgICAgKCdfZGphbmdvX3NjaGVtYScsICcwMDU5X2F1dG9fMjAyMTA5MjNfMDc0MycpLAogICAgXQoKICAgIG9wZXJhdGlvbnMgPSBbCiAgICAgICAgbWlncmF0aW9ucy5BZGRDb25zdHJhaW50KAogICAgICAgICAgICBtb2RlbF9uYW1lPSdwcm9wZXJ0eScsCiAgICAgICAgICAgIGNvbnN0cmFpbnQ9bW9kZWxzLlVuaXF1ZUNvbnN0cmFpbnQoY29uZGl0aW9uPW1vZGVscy5RKGRlbGV0ZWRBdF9faXNudWxsPVRydWUpLCBmaWVsZHM9KCdvcmdhbml6YXRpb24nLCAnYWRkcmVzcycpLCBuYW1lPSdwcm9wZXJ0eV91bmlxdWVfb3JnYW5pemF0aW9uX2FuZF9hZGRyZXNzJyksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Create constraint property_unique_organization_and_address on model property
--
CREATE UNIQUE INDEX "property_unique_organization_and_address" ON "Property" ("organization", "address") WHERE "deletedAt" IS NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Create constraint property_unique_organization_and_address on model property
--
DROP INDEX IF EXISTS "property_unique_organization_and_address";
COMMIT;

    `)
}
