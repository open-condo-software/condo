// auto generated by kmigrator
// KMIGRATOR:0103_auto_20220218_1243:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi4xMCBvbiAyMDIyLTAyLTE4IDEyOjQzCgpmcm9tIGRqYW5nby5kYiBpbXBvcnQgbWlncmF0aW9ucywgbW9kZWxzCgoKY2xhc3MgTWlncmF0aW9uKG1pZ3JhdGlvbnMuTWlncmF0aW9uKToKCiAgICBkZXBlbmRlbmNpZXMgPSBbCiAgICAgICAgKCdfZGphbmdvX3NjaGVtYScsICcwMTAyX21lc3NhZ2VfZW1haWxmcm9tX21lc3NhZ2VoaXN0b3J5cmVjb3JkX2VtYWlsZnJvbScpLAogICAgXQoKICAgIG9wZXJhdGlvbnMgPSBbCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0JywKICAgICAgICAgICAgbmFtZT0ndW5pdFR5cGUnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGRlZmF1bHQ9J2ZsYXQnKSwKICAgICAgICAgICAgcHJlc2VydmVfZGVmYXVsdD1GYWxzZSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGNoYW5nZScsCiAgICAgICAgICAgIG5hbWU9J3VuaXRUeXBlRnJvbScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5UZXh0RmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGNoYW5nZScsCiAgICAgICAgICAgIG5hbWU9J3VuaXRUeXBlVG8nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0ndW5pdFR5cGUnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field unitType to ticket
--
ALTER TABLE "Ticket" ADD COLUMN "unitType" text DEFAULT 'flat' NOT NULL;
ALTER TABLE "Ticket" ALTER COLUMN "unitType" DROP DEFAULT;
--
-- Add field unitTypeFrom to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "unitTypeFrom" text NULL;
--
-- Add field unitTypeTo to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "unitTypeTo" text NULL;
--
-- Add field unitType to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "unitType" text NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field unitType to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "unitType" CASCADE;
--
-- Add field unitTypeTo to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "unitTypeTo" CASCADE;
--
-- Add field unitTypeFrom to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "unitTypeFrom" CASCADE;
--
-- Add field unitType to ticket
--
ALTER TABLE "Ticket" DROP COLUMN "unitType" CASCADE;
COMMIT;

    `)
}
