// auto generated by kmigrator
// KMIGRATOR:0482_acquiringintegration_type_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDUuMC4zIG9uIDIwMjUtMDktMTYgMDg6MjYKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzA0ODFfdXNlcnJpZ2h0c3NldF9jYW5tYW5hZ2V1c2VyaGFzbWFya2V0aW5nY29uc2VudGZpZWxkX2FuZF9tb3JlJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdhY3F1aXJpbmdpbnRlZ3JhdGlvbicsCiAgICAgICAgICAgIG5hbWU9J3R5cGUnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGRlZmF1bHQ9J09OTElORV9QUk9DRVNTSU5HJyksCiAgICAgICAgICAgIHByZXNlcnZlX2RlZmF1bHQ9RmFsc2UsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdhY3F1aXJpbmdpbnRlZ3JhdGlvbmhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSd0eXBlJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdhY3F1aXJpbmdpbnRlZ3JhdGlvbicsCiAgICAgICAgICAgIG5hbWU9J2hvc3RVcmwnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field type to acquiringintegration
--
ALTER TABLE "AcquiringIntegration" ADD COLUMN "type" text DEFAULT 'ONLINE_PROCESSING' NOT NULL;
ALTER TABLE "AcquiringIntegration" ALTER COLUMN "type" DROP DEFAULT;
--
-- Add field type to acquiringintegrationhistoryrecord
--
ALTER TABLE "AcquiringIntegrationHistoryRecord" ADD COLUMN "type" text NULL;
--
-- Alter field hostUrl on acquiringintegration
--
ALTER TABLE "AcquiringIntegration" ALTER COLUMN "hostUrl" DROP NOT NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field hostUrl on acquiringintegration
--
ALTER TABLE "AcquiringIntegration" ALTER COLUMN "hostUrl" SET NOT NULL;
--
-- Add field type to acquiringintegrationhistoryrecord
--
ALTER TABLE "AcquiringIntegrationHistoryRecord" DROP COLUMN "type" CASCADE;
--
-- Add field type to acquiringintegration
--
ALTER TABLE "AcquiringIntegration" DROP COLUMN "type" CASCADE;
COMMIT;

    `)
}
