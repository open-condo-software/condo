// auto generated by kmigrator
// KMIGRATOR:0055_auto_20210913_0952:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi41IG9uIDIwMjEtMDktMTMgMDk6NTIKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAwNTRfYXV0b18yMDIxMDkxMF8wOTMzJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdtZXRlcicsCiAgICAgICAgICAgIG5hbWU9J25leHRWZXJpZmljYXRpb25EYXRlJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkRhdGVUaW1lRmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J21ldGVyJywKICAgICAgICAgICAgbmFtZT0nc2VhbGluZ0RhdGUnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRGF0ZVRpbWVGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nbWV0ZXJoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nbmV4dFZlcmlmaWNhdGlvbkRhdGUnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRGF0ZVRpbWVGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nbWV0ZXJoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nc2VhbGluZ0RhdGUnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRGF0ZVRpbWVGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdtZXRlcnJlYWRpbmcnLAogICAgICAgICAgICBuYW1lPSd2YWx1ZTEnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRGVjaW1hbEZpZWxkKGRlY2ltYWxfcGxhY2VzPTQsIG1heF9kaWdpdHM9MTgpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdtZXRlcnJlYWRpbmcnLAogICAgICAgICAgICBuYW1lPSd2YWx1ZTInLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRGVjaW1hbEZpZWxkKGJsYW5rPVRydWUsIGRlY2ltYWxfcGxhY2VzPTQsIG1heF9kaWdpdHM9MTgsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFsdGVyRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J21ldGVycmVhZGluZycsCiAgICAgICAgICAgIG5hbWU9J3ZhbHVlMycsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5EZWNpbWFsRmllbGQoYmxhbms9VHJ1ZSwgZGVjaW1hbF9wbGFjZXM9NCwgbWF4X2RpZ2l0cz0xOCwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWx0ZXJGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nbWV0ZXJyZWFkaW5nJywKICAgICAgICAgICAgbmFtZT0ndmFsdWU0JywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkRlY2ltYWxGaWVsZChibGFuaz1UcnVlLCBkZWNpbWFsX3BsYWNlcz00LCBtYXhfZGlnaXRzPTE4LCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdtZXRlcnJlYWRpbmdoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0ndmFsdWUxJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkRlY2ltYWxGaWVsZChibGFuaz1UcnVlLCBkZWNpbWFsX3BsYWNlcz00LCBtYXhfZGlnaXRzPTE4LCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdtZXRlcnJlYWRpbmdoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0ndmFsdWUyJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkRlY2ltYWxGaWVsZChibGFuaz1UcnVlLCBkZWNpbWFsX3BsYWNlcz00LCBtYXhfZGlnaXRzPTE4LCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdtZXRlcnJlYWRpbmdoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0ndmFsdWUzJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkRlY2ltYWxGaWVsZChibGFuaz1UcnVlLCBkZWNpbWFsX3BsYWNlcz00LCBtYXhfZGlnaXRzPTE4LCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdtZXRlcnJlYWRpbmdoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0ndmFsdWU0JywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkRlY2ltYWxGaWVsZChibGFuaz1UcnVlLCBkZWNpbWFsX3BsYWNlcz00LCBtYXhfZGlnaXRzPTE4LCBudWxsPVRydWUpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field nextVerificationDate to meter
--
ALTER TABLE "Meter" ADD COLUMN "nextVerificationDate" timestamp with time zone NULL;
--
-- Add field sealingDate to meter
--
ALTER TABLE "Meter" ADD COLUMN "sealingDate" timestamp with time zone NULL;
--
-- Add field nextVerificationDate to meterhistoryrecord
--
ALTER TABLE "MeterHistoryRecord" ADD COLUMN "nextVerificationDate" timestamp with time zone NULL;
--
-- Add field sealingDate to meterhistoryrecord
--
ALTER TABLE "MeterHistoryRecord" ADD COLUMN "sealingDate" timestamp with time zone NULL;
--
-- Alter field value1 on meterreading
--
ALTER TABLE "MeterReading" ALTER COLUMN "value1" TYPE numeric(18, 4) USING "value1"::numeric(18, 4);
--
-- Alter field value2 on meterreading
--
ALTER TABLE "MeterReading" ALTER COLUMN "value2" TYPE numeric(18, 4) USING "value2"::numeric(18, 4);
--
-- Alter field value3 on meterreading
--
ALTER TABLE "MeterReading" ALTER COLUMN "value3" TYPE numeric(18, 4) USING "value3"::numeric(18, 4);
--
-- Alter field value4 on meterreading
--
ALTER TABLE "MeterReading" ALTER COLUMN "value4" TYPE numeric(18, 4) USING "value4"::numeric(18, 4);
--
-- Alter field value1 on meterreadinghistoryrecord
--
ALTER TABLE "MeterReadingHistoryRecord" ALTER COLUMN "value1" TYPE numeric(18, 4) USING "value1"::numeric(18, 4);
--
-- Alter field value2 on meterreadinghistoryrecord
--
ALTER TABLE "MeterReadingHistoryRecord" ALTER COLUMN "value2" TYPE numeric(18, 4) USING "value2"::numeric(18, 4);
--
-- Alter field value3 on meterreadinghistoryrecord
--
ALTER TABLE "MeterReadingHistoryRecord" ALTER COLUMN "value3" TYPE numeric(18, 4) USING "value3"::numeric(18, 4);
--
-- Alter field value4 on meterreadinghistoryrecord
--
ALTER TABLE "MeterReadingHistoryRecord" ALTER COLUMN "value4" TYPE numeric(18, 4) USING "value4"::numeric(18, 4);
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field value4 on meterreadinghistoryrecord
--
ALTER TABLE "MeterReadingHistoryRecord" ALTER COLUMN "value4" TYPE integer USING "value4"::integer;
--
-- Alter field value3 on meterreadinghistoryrecord
--
ALTER TABLE "MeterReadingHistoryRecord" ALTER COLUMN "value3" TYPE integer USING "value3"::integer;
--
-- Alter field value2 on meterreadinghistoryrecord
--
ALTER TABLE "MeterReadingHistoryRecord" ALTER COLUMN "value2" TYPE integer USING "value2"::integer;
--
-- Alter field value1 on meterreadinghistoryrecord
--
ALTER TABLE "MeterReadingHistoryRecord" ALTER COLUMN "value1" TYPE integer USING "value1"::integer;
--
-- Alter field value4 on meterreading
--
ALTER TABLE "MeterReading" ALTER COLUMN "value4" TYPE integer USING "value4"::integer;
--
-- Alter field value3 on meterreading
--
ALTER TABLE "MeterReading" ALTER COLUMN "value3" TYPE integer USING "value3"::integer;
--
-- Alter field value2 on meterreading
--
ALTER TABLE "MeterReading" ALTER COLUMN "value2" TYPE integer USING "value2"::integer;
--
-- Alter field value1 on meterreading
--
ALTER TABLE "MeterReading" ALTER COLUMN "value1" TYPE integer USING "value1"::integer;
--
-- Add field sealingDate to meterhistoryrecord
--
ALTER TABLE "MeterHistoryRecord" DROP COLUMN "sealingDate" CASCADE;
--
-- Add field nextVerificationDate to meterhistoryrecord
--
ALTER TABLE "MeterHistoryRecord" DROP COLUMN "nextVerificationDate" CASCADE;
--
-- Add field sealingDate to meter
--
ALTER TABLE "Meter" DROP COLUMN "sealingDate" CASCADE;
--
-- Add field nextVerificationDate to meter
--
ALTER TABLE "Meter" DROP COLUMN "nextVerificationDate" CASCADE;
COMMIT;

    `)
}
