// auto generated by kmigrator
// KMIGRATOR:0406_auto_20240629_1609:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMC41IG9uIDIwMjQtMDYtMjkgMTY6MDkKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zCgoKY2xhc3MgTWlncmF0aW9uKG1pZ3JhdGlvbnMuTWlncmF0aW9uKToKCiAgICBkZXBlbmRlbmNpZXMgPSBbCiAgICAgICAgKCdfZGphbmdvX3NjaGVtYScsICcwNDA1X3RpY2tldGRvY3VtZW50Z2VuZXJhdGlvbnRhc2toaXN0b3J5cmVjb3JkX2FuZF9tb3JlJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
--
-- [CUSTOM] Set Statement Timeout to some large amount - 25 min (25 * 60 => 1500 sec)
--
SET statement_timeout = '1500s';

--
-- [CUSTOM] In schemes "BankAccount", "BankContractorAccount" and "BankTransaction" change "currencyCode" from "RUR" to "RUB"
--
UPDATE "BankAccount" SET "currencyCode" = 'RUB' WHERE "currencyCode" = 'RUR';
UPDATE "BankContractorAccount" SET "currencyCode" = 'RUB' WHERE "currencyCode" = 'RUR';
UPDATE "BankTransaction" SET "currencyCode" = 'RUB' WHERE "currencyCode" = 'RUR';

--
-- [CUSTOM] Revert Statement Timeout to default amount - 10 secs
--
SET statement_timeout = '10s';

COMMIT;
    `)
}

exports.down = async (knex) => {
    await knex.raw(`
BEGIN;
COMMIT;
    `)
}
