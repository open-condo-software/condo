// auto generated by kmigrator
// KMIGRATOR:0507_auto_20260202_0802:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDUuMCBvbiAyMDI2LTAyLTAyIDA4OjAyCgpmcm9tIGRqYW5nby5kYiBpbXBvcnQgbWlncmF0aW9ucwoKCmNsYXNzIE1pZ3JhdGlvbihtaWdyYXRpb25zLk1pZ3JhdGlvbik6CgogICAgZGVwZW5kZW5jaWVzID0gWwogICAgICAgICgnX2RqYW5nb19zY2hlbWEnLCAnMDUwNl9iMmJhcHBwb3NpbnRlZ3JhdGlvbmNvbmZpZ2hpc3RvcnlyZWNvcmRfYW5kX21vcmUnKSwKICAgIF0KCiAgICBvcGVyYXRpb25zID0gWwogICAgXQo=
// KMIGRATOR_VIEWS:0507_auto_20260202_0802:eyJkdiI6MSwibGlzdHMiOnsiVXNlciI6eyJmaWVsZHMiOlsibmFtZSIsInBhc3N3b3JkIiwidHlwZSIsImlzQWRtaW4iLCJpc1N1cHBvcnQiLCJlbWFpbCIsImlzRW1haWxWZXJpZmllZCIsInBob25lIiwiaXNQaG9uZVZlcmlmaWVkIiwiZXh0ZXJuYWxQaG9uZSIsImlzRXh0ZXJuYWxQaG9uZVZlcmlmaWVkIiwiZXh0ZXJuYWxFbWFpbCIsImlzRXh0ZXJuYWxFbWFpbFZlcmlmaWVkIiwiZXh0ZXJuYWxTeXN0ZW1OYW1lIiwiaGFzTWFya2V0aW5nQ29uc2VudCIsImF2YXRhciIsIm1ldGEiLCJsb2NhbGUiLCJjdXN0b21BY2Nlc3MiLCJzaG93R2xvYmFsSGludHMiLCJyaWdodHNTZXQiLCJpc1R3b0ZhY3RvckF1dGhlbnRpY2F0aW9uRW5hYmxlZCIsImlkIiwidiIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsImNyZWF0ZWRCeSIsInVwZGF0ZWRCeSIsImRlbGV0ZWRBdCIsIm5ld0lkIiwiZHYiLCJzZW5kZXIiXSwic2Vuc2l0aXZlRmllbGRzIjpbInBhc3N3b3JkIiwiZW1haWwiLCJwaG9uZSJdfX19

exports.up = async (knex) => {
    await knex.raw(`
    
--
-- Create analytics schema
--
CREATE SCHEMA IF NOT EXISTS "analytics";
--
-- Create view for "User" table
--
CREATE OR REPLACE VIEW "analytics"."User" AS SELECT "name", NULL as "password", "type", "isAdmin", "isSupport", NULL as "email", "isEmailVerified", NULL as "phone", "isPhoneVerified", "externalPhone", "isExternalPhoneVerified", "externalEmail", "isExternalEmailVerified", "externalSystemName", "hasMarketingConsent", "avatar", "meta", "locale", "customAccess", "showGlobalHints", "rightsSet", "isTwoFactorAuthenticationEnabled", "id", "v", "createdAt", "updatedAt", "createdBy", "updatedBy", "deletedAt", "newId", "dv", "sender" FROM "public"."User";

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    
--
-- Remove view for "User" table
--
DROP VIEW IF EXISTS "analytics"."User";
--
-- Drop analytics schema
--
DROP SCHEMA IF EXISTS "analytics";

    `)
}
