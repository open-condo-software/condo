// auto generated by kmigrator
// KMIGRATOR:0457_contact_meta_contact_note_contacthistoryrecord_meta_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDUuMS40IG9uIDIwMjUtMDMtMDggMTE6NDkKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzA0NTZfcmVuYW1lX21ldGVydXNlcmRhdGFfbWV0ZXJ1c2Vyc2V0dGluZ19hbmRfbW9yZScpLAogICAgXQoKICAgIG9wZXJhdGlvbnMgPSBbCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nY29udGFjdCcsCiAgICAgICAgICAgIG5hbWU9J21ldGEnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuSlNPTkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdjb250YWN0JywKICAgICAgICAgICAgbmFtZT0nbm90ZScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5UZXh0RmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2NvbnRhY3RoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nbWV0YScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5KU09ORmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2NvbnRhY3RoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nbm90ZScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5UZXh0RmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2RvY3VtZW50JywKICAgICAgICAgICAgbmFtZT0nbWV0YScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5KU09ORmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2RvY3VtZW50aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J21ldGEnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuSlNPTkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field meta to contact
--
ALTER TABLE "Contact" ADD COLUMN "meta" jsonb NULL;
--
-- Add field note to contact
--
ALTER TABLE "Contact" ADD COLUMN "note" text NULL;
--
-- Add field meta to contacthistoryrecord
--
ALTER TABLE "ContactHistoryRecord" ADD COLUMN "meta" jsonb NULL;
--
-- Add field note to contacthistoryrecord
--
ALTER TABLE "ContactHistoryRecord" ADD COLUMN "note" text NULL;
--
-- Add field meta to document
--
ALTER TABLE "Document" ADD COLUMN "meta" jsonb NULL;
--
-- Add field meta to documenthistoryrecord
--
ALTER TABLE "DocumentHistoryRecord" ADD COLUMN "meta" jsonb NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field meta to documenthistoryrecord
--
ALTER TABLE "DocumentHistoryRecord" DROP COLUMN "meta" CASCADE;
--
-- Add field meta to document
--
ALTER TABLE "Document" DROP COLUMN "meta" CASCADE;
--
-- Add field note to contacthistoryrecord
--
ALTER TABLE "ContactHistoryRecord" DROP COLUMN "note" CASCADE;
--
-- Add field meta to contacthistoryrecord
--
ALTER TABLE "ContactHistoryRecord" DROP COLUMN "meta" CASCADE;
--
-- Add field note to contact
--
ALTER TABLE "Contact" DROP COLUMN "note" CASCADE;
--
-- Add field meta to contact
--
ALTER TABLE "Contact" DROP COLUMN "meta" CASCADE;
COMMIT;

    `)
}
