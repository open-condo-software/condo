// auto generated by kmigrator
// KMIGRATOR:0164_ticket_deferreduntil_ticketchange_deferreduntilfrom_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMC41IG9uIDIwMjItMDgtMDkgMDQ6MzYKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAxNjNfcmVtb3ZlX3RpY2tldGNoYW5nZV9jb21wbGV0ZWRhdGZyb21fYW5kX21vcmUnKSwKICAgIF0KCiAgICBvcGVyYXRpb25zID0gWwogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldCcsCiAgICAgICAgICAgIG5hbWU9J2RlZmVycmVkVW50aWwnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRGF0ZVRpbWVGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0nZGVmZXJyZWRVbnRpbEZyb20nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRGF0ZVRpbWVGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0nZGVmZXJyZWRVbnRpbFRvJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkRhdGVUaW1lRmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdkZWZlcnJlZFVudGlsJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkRhdGVUaW1lRmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgXQo=

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field deferredUntil to ticket
--
ALTER TABLE "Ticket" ADD COLUMN "deferredUntil" timestamp with time zone NULL;
--
-- Add field deferredUntilFrom to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "deferredUntilFrom" timestamp with time zone NULL;
--
-- Add field deferredUntilTo to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "deferredUntilTo" timestamp with time zone NULL;
--
-- Add field deferredUntil to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "deferredUntil" timestamp with time zone NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field deferredUntil to tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "deferredUntil" CASCADE;
--
-- Add field deferredUntilTo to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "deferredUntilTo" CASCADE;
--
-- Add field deferredUntilFrom to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "deferredUntilFrom" CASCADE;
--
-- Add field deferredUntil to ticket
--
ALTER TABLE "Ticket" DROP COLUMN "deferredUntil" CASCADE;
COMMIT;

    `)
}
