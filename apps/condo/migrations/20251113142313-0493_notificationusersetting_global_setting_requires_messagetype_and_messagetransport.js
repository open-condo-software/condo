// auto generated by kmigrator
// KMIGRATOR:0493_notificationusersetting_global_setting_requires_messagetype_and_messagetransport:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi41IG9uIDIwMjUtMTEtMTMgMDk6MjMKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzA0OTJfYWx0ZXJfbm90aWZpY2F0aW9udXNlcnNldHRpbmdfdXNlcicpLAogICAgXQoKICAgIG9wZXJhdGlvbnMgPSBbCiAgICAgICAgbWlncmF0aW9ucy5BZGRDb25zdHJhaW50KAogICAgICAgICAgICBtb2RlbF9uYW1lPSdub3RpZmljYXRpb251c2Vyc2V0dGluZycsCiAgICAgICAgICAgIGNvbnN0cmFpbnQ9bW9kZWxzLkNoZWNrQ29uc3RyYWludChjaGVjaz1tb2RlbHMuUSgoJ2RlbGV0ZWRBdF9faXNudWxsJywgRmFsc2UpLCBtb2RlbHMuUSgoJ3VzZXJfX2lzbnVsbCcsIFRydWUpLCBtb2RlbHMuUSgoJ21lc3NhZ2VUeXBlX19pc251bGwnLCBUcnVlKSwgKCdtZXNzYWdlVHJhbnNwb3J0X19pc251bGwnLCBUcnVlKSwgX2Nvbm5lY3Rvcj0nT1InKSwgX25lZ2F0ZWQ9VHJ1ZSksIF9jb25uZWN0b3I9J09SJyksIG5hbWU9J2dsb2JhbF9zZXR0aW5nX3JlcXVpcmVzX21lc3NhZ2VUeXBlX2FuZF9tZXNzYWdlVHJhbnNwb3J0JyksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Create constraint global_setting_requires_messageType_and_messageTransport on model notificationusersetting
--
ALTER TABLE "NotificationUserSetting" ADD CONSTRAINT "global_setting_requires_messageType_and_messageTransport" CHECK (("deletedAt" IS NOT NULL OR NOT ("user" IS NULL AND ("messageType" IS NULL OR "messageTransport" IS NULL))));
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Create constraint global_setting_requires_messageType_and_messageTransport on model notificationusersetting
--
ALTER TABLE "NotificationUserSetting" DROP CONSTRAINT "global_setting_requires_messageType_and_messageTransport";
COMMIT;

    `)
}
