// auto generated by kmigrator
// KMIGRATOR:0153_remove_ticket_placeclassifier_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMC40IG9uIDIwMjItMDctMjEgMTU6MzEKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAxNTFfY29udGFjdHJvbGVoaXN0b3J5cmVjb3JkX2NvbnRhY3RoaXN0b3J5cmVjb3JkX3JvbGVfYW5kX21vcmUnKSwKICAgIF0KCiAgICBvcGVyYXRpb25zID0gWwogICAgICAgIG1pZ3JhdGlvbnMuUmVtb3ZlRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldCcsCiAgICAgICAgICAgIG5hbWU9J3BsYWNlQ2xhc3NpZmllcicsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXQnLAogICAgICAgICAgICBuYW1lPSdwcm9ibGVtQ2xhc3NpZmllcicsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBuYW1lPSdjYXRlZ29yeUNsYXNzaWZpZXJEaXNwbGF5TmFtZUZyb20nLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0nY2F0ZWdvcnlDbGFzc2lmaWVyRGlzcGxheU5hbWVUbycsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBuYW1lPSdjYXRlZ29yeUNsYXNzaWZpZXJJZEZyb20nLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0nY2F0ZWdvcnlDbGFzc2lmaWVySWRUbycsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBuYW1lPSdwbGFjZUNsYXNzaWZpZXJEaXNwbGF5TmFtZUZyb20nLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0ncGxhY2VDbGFzc2lmaWVyRGlzcGxheU5hbWVUbycsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBuYW1lPSdwbGFjZUNsYXNzaWZpZXJJZEZyb20nLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0ncGxhY2VDbGFzc2lmaWVySWRUbycsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBuYW1lPSdwcm9ibGVtQ2xhc3NpZmllckRpc3BsYXlOYW1lRnJvbScsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBuYW1lPSdwcm9ibGVtQ2xhc3NpZmllckRpc3BsYXlOYW1lVG8nLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0ncHJvYmxlbUNsYXNzaWZpZXJJZEZyb20nLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0ncHJvYmxlbUNsYXNzaWZpZXJJZFRvJywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuUmVtb3ZlRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdwbGFjZUNsYXNzaWZpZXInLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J3Byb2JsZW1DbGFzc2lmaWVyJywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGNoYW5nZScsCiAgICAgICAgICAgIG5hbWU9J2NsYXNzaWZpZXJSdWxlRGlzcGxheU5hbWVGcm9tJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0nY2xhc3NpZmllclJ1bGVEaXNwbGF5TmFtZVRvJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0nY2xhc3NpZmllclJ1bGVJZEZyb20nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVVVJREZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBuYW1lPSdjbGFzc2lmaWVyUnVsZUlkVG8nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVVVJREZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Remove field placeClassifier from ticket
--
SET CONSTRAINTS "Ticket_placeClassifier_01e3ec3a_fk_TicketPlaceClassifier_id" IMMEDIATE; ALTER TABLE "Ticket" DROP CONSTRAINT "Ticket_placeClassifier_01e3ec3a_fk_TicketPlaceClassifier_id";
--ALTER TABLE "Ticket" DROP COLUMN "placeClassifier" CASCADE;
ALTER TABLE "Ticket" RENAME COLUMN "placeClassifier" TO "placeClassifier_old";

--
-- Remove field problemClassifier from ticket
--
SET CONSTRAINTS "Ticket_problemClassifier_f1bfcd39_fk_TicketProblemClassifier_id" IMMEDIATE; ALTER TABLE "Ticket" DROP CONSTRAINT "Ticket_problemClassifier_f1bfcd39_fk_TicketProblemClassifier_id";
--ALTER TABLE "Ticket" DROP COLUMN "problemClassifier" CASCADE;
ALTER TABLE "Ticket" RENAME COLUMN "problemClassifier" TO "problemClassifier_old";
--
-- Remove field categoryClassifierDisplayNameFrom from ticketchange
--
--ALTER TABLE "TicketChange" DROP COLUMN "categoryClassifierDisplayNameFrom" CASCADE;
ALTER TABLE "TicketChange" RENAME COLUMN "categoryClassifierDisplayNameFrom" TO "categoryClassifierDisplayNameFrom_old";
--
-- Remove field categoryClassifierDisplayNameTo from ticketchange
--
--ALTER TABLE "TicketChange" DROP COLUMN "categoryClassifierDisplayNameTo" CASCADE;
ALTER TABLE "TicketChange" RENAME COLUMN "categoryClassifierDisplayNameTo" TO "categoryClassifierDisplayNameTo_old";
--
-- Remove field categoryClassifierIdFrom from ticketchange
--
--ALTER TABLE "TicketChange" DROP COLUMN "categoryClassifierIdFrom" CASCADE;
ALTER TABLE "TicketChange" RENAME COLUMN "categoryClassifierIdFrom" TO "categoryClassifierIdFrom_old";
--
-- Remove field categoryClassifierIdTo from ticketchange
--
--ALTER TABLE "TicketChange" DROP COLUMN "categoryClassifierIdTo" CASCADE;
ALTER TABLE "TicketChange" RENAME COLUMN "categoryClassifierIdTo" TO "categoryClassifierIdTo_old";
--
-- Remove field placeClassifierDisplayNameFrom from ticketchange
--
--ALTER TABLE "TicketChange" DROP COLUMN "placeClassifierDisplayNameFrom" CASCADE;
ALTER TABLE "TicketChange" RENAME COLUMN "placeClassifierDisplayNameFrom" TO "placeClassifierDisplayNameFrom_old";
--
-- Remove field placeClassifierDisplayNameTo from ticketchange
--
--ALTER TABLE "TicketChange" DROP COLUMN "placeClassifierDisplayNameTo" CASCADE;
ALTER TABLE "TicketChange" RENAME COLUMN "placeClassifierDisplayNameTo" TO "placeClassifierDisplayNameTo_old";
--
-- Remove field placeClassifierIdFrom from ticketchange
--
--ALTER TABLE "TicketChange" DROP COLUMN "placeClassifierIdFrom" CASCADE;
ALTER TABLE "TicketChange" RENAME COLUMN "placeClassifierIdFrom" TO "placeClassifierIdFrom_old";
--
-- Remove field placeClassifierIdTo from ticketchange
--
--ALTER TABLE "TicketChange" DROP COLUMN "placeClassifierIdTo" CASCADE;
ALTER TABLE "TicketChange" RENAME COLUMN "placeClassifierIdTo" TO "placeClassifierIdTo_old";
--
-- Remove field problemClassifierDisplayNameFrom from ticketchange
--
--ALTER TABLE "TicketChange" DROP COLUMN "problemClassifierDisplayNameFrom" CASCADE;
ALTER TABLE "TicketChange" RENAME COLUMN "problemClassifierDisplayNameFrom" TO "problemClassifierDisplayNameFrom_old";
--
-- Remove field problemClassifierDisplayNameTo from ticketchange
--
--ALTER TABLE "TicketChange" DROP COLUMN "problemClassifierDisplayNameTo" CASCADE;
ALTER TABLE "TicketChange" RENAME COLUMN "problemClassifierDisplayNameTo" TO "problemClassifierDisplayNameTo_old";
--
-- Remove field problemClassifierIdFrom from ticketchange
--
--ALTER TABLE "TicketChange" DROP COLUMN "problemClassifierIdFrom" CASCADE;
ALTER TABLE "TicketChange" RENAME COLUMN "problemClassifierIdFrom" TO "problemClassifierIdFrom_old";
--
-- Remove field problemClassifierIdTo from ticketchange
--
--ALTER TABLE "TicketChange" DROP COLUMN "problemClassifierIdTo" CASCADE;
ALTER TABLE "TicketChange" RENAME COLUMN "problemClassifierIdTo" TO "problemClassifierIdTo_old";
--
-- Remove field placeClassifier from tickethistoryrecord
--
--ALTER TABLE "TicketHistoryRecord" DROP COLUMN "placeClassifier" CASCADE;
ALTER TABLE "TicketHistoryRecord" RENAME COLUMN "placeClassifier" TO "placeClassifier_old";
--
-- Remove field problemClassifier from tickethistoryrecord
--
--ALTER TABLE "TicketHistoryRecord" DROP COLUMN "problemClassifier" CASCADE;
ALTER TABLE "TicketHistoryRecord" RENAME COLUMN "problemClassifier" TO "problemClassifier_old";
--
-- Add field classifierRuleDisplayNameFrom to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "classifierRuleDisplayNameFrom" text NULL;
--
-- Add field classifierRuleDisplayNameTo to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "classifierRuleDisplayNameTo" text NULL;
--
-- Add field classifierRuleIdFrom to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "classifierRuleIdFrom" uuid NULL;
--
-- Add field classifierRuleIdTo to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "classifierRuleIdTo" uuid NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field classifierRuleIdTo to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "classifierRuleIdTo" CASCADE;
--
-- Add field classifierRuleIdFrom to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "classifierRuleIdFrom" CASCADE;
--
-- Add field classifierRuleDisplayNameTo to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "classifierRuleDisplayNameTo" CASCADE;
--
-- Add field classifierRuleDisplayNameFrom to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "classifierRuleDisplayNameFrom" CASCADE;
--
-- Remove field problemClassifier from tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN IF NOT EXISTS "problemClassifier" uuid NULL;
--
-- Remove field placeClassifier from tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN IF NOT EXISTS "placeClassifier" uuid NULL;
--
-- Remove field problemClassifierIdTo from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN IF NOT EXISTS "problemClassifierIdTo" uuid NULL;
--
-- Remove field problemClassifierIdFrom from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN IF NOT EXISTS "problemClassifierIdFrom" uuid NULL;
--
-- Remove field problemClassifierDisplayNameTo from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN IF NOT EXISTS "problemClassifierDisplayNameTo" text NULL;
--
-- Remove field problemClassifierDisplayNameFrom from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN IF NOT EXISTS "problemClassifierDisplayNameFrom" text NULL;
--
-- Remove field placeClassifierIdTo from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN IF NOT EXISTS "placeClassifierIdTo" uuid NULL;
--
-- Remove field placeClassifierIdFrom from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN IF NOT EXISTS "placeClassifierIdFrom" uuid NULL;
--
-- Remove field placeClassifierDisplayNameTo from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN IF NOT EXISTS "placeClassifierDisplayNameTo" text NULL;
--
-- Remove field placeClassifierDisplayNameFrom from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN IF NOT EXISTS "placeClassifierDisplayNameFrom" text NULL;
--
-- Remove field categoryClassifierIdTo from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN IF NOT EXISTS "categoryClassifierIdTo" uuid NULL;
--
-- Remove field categoryClassifierIdFrom from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN IF NOT EXISTS "categoryClassifierIdFrom" uuid NULL;
--
-- Remove field categoryClassifierDisplayNameTo from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN IF NOT EXISTS "categoryClassifierDisplayNameTo" text NULL;
--
-- Remove field categoryClassifierDisplayNameFrom from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN IF NOT EXISTS "categoryClassifierDisplayNameFrom" text NULL;
--
-- Remove field problemClassifier from ticket
--
ALTER TABLE "Ticket" ADD COLUMN IF NOT EXISTS "problemClassifier" uuid NULL CONSTRAINT "Ticket_problemClassifier_f1bfcd39_fk_TicketProblemClassifier_id" REFERENCES "TicketProblemClassifier"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "Ticket_problemClassifier_f1bfcd39_fk_TicketProblemClassifier_id" IMMEDIATE;
--
-- Remove field placeClassifier from ticket
--
ALTER TABLE "Ticket" ADD COLUMN IF NOT EXISTS "placeClassifier" uuid NULL CONSTRAINT "Ticket_placeClassifier_01e3ec3a_fk_TicketPlaceClassifier_id" REFERENCES "TicketPlaceClassifier"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "Ticket_placeClassifier_01e3ec3a_fk_TicketPlaceClassifier_id" IMMEDIATE;
CREATE INDEX IF NOT EXISTS "Ticket_problemClassifier_f1bfcd39" ON "Ticket" ("problemClassifier");
CREATE INDEX IF NOT EXISTS "Ticket_placeClassifier_01e3ec3a" ON "Ticket" ("placeClassifier");
COMMIT;

    `)
}
