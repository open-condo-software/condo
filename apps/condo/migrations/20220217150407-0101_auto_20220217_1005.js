// auto generated by kmigrator
// KMIGRATOR:0101_auto_20220217_1005:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi40IG9uIDIwMjItMDItMTcgMTA6MDUKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAxMDBfYWx0ZXJfdXNlcl90eXBlJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdhY3F1aXJpbmdpbnRlZ3JhdGlvbicsCiAgICAgICAgICAgIG5hbWU9J2RldGFpbHNUZXh0JywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYWNxdWlyaW5naW50ZWdyYXRpb24nLAogICAgICAgICAgICBuYW1lPSdkZXRhaWxzVGl0bGUnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGRlZmF1bHQ9JycpLAogICAgICAgICAgICBwcmVzZXJ2ZV9kZWZhdWx0PUZhbHNlLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYWNxdWlyaW5naW50ZWdyYXRpb24nLAogICAgICAgICAgICBuYW1lPSdpc0hpZGRlbicsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5Cb29sZWFuRmllbGQoZGVmYXVsdD1UcnVlKSwKICAgICAgICAgICAgcHJlc2VydmVfZGVmYXVsdD1GYWxzZSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2FjcXVpcmluZ2ludGVncmF0aW9uJywKICAgICAgICAgICAgbmFtZT0nc2hvcnREZXNjcmlwdGlvbicsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5UZXh0RmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2FjcXVpcmluZ2ludGVncmF0aW9uaGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J2RldGFpbHNUZXh0JywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkpTT05GaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYWNxdWlyaW5naW50ZWdyYXRpb25oaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nZGV0YWlsc1RpdGxlJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYWNxdWlyaW5naW50ZWdyYXRpb25oaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0naXNIaWRkZW4nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuQm9vbGVhbkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdhY3F1aXJpbmdpbnRlZ3JhdGlvbmhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdzaG9ydERlc2NyaXB0aW9uJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiaWxsaW5naW50ZWdyYXRpb25oaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nZGV0YWlsc1RleHQnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuSlNPTkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field detailsText to acquiringintegration
--
ALTER TABLE "AcquiringIntegration" ADD COLUMN "detailsText" text NULL;
--
-- Add field detailsTitle to acquiringintegration
--
ALTER TABLE "AcquiringIntegration" ADD COLUMN "detailsTitle" text DEFAULT '' NOT NULL;
ALTER TABLE "AcquiringIntegration" ALTER COLUMN "detailsTitle" DROP DEFAULT;
--
-- Add field isHidden to acquiringintegration
--
ALTER TABLE "AcquiringIntegration" ADD COLUMN "isHidden" boolean DEFAULT true NOT NULL;
ALTER TABLE "AcquiringIntegration" ALTER COLUMN "isHidden" DROP DEFAULT;
--
-- Add field shortDescription to acquiringintegration
--
ALTER TABLE "AcquiringIntegration" ADD COLUMN "shortDescription" text NULL;
--
-- Add field detailsText to acquiringintegrationhistoryrecord
--
ALTER TABLE "AcquiringIntegrationHistoryRecord" ADD COLUMN "detailsText" jsonb NULL;
--
-- Add field detailsTitle to acquiringintegrationhistoryrecord
--
ALTER TABLE "AcquiringIntegrationHistoryRecord" ADD COLUMN "detailsTitle" text NULL;
--
-- Add field isHidden to acquiringintegrationhistoryrecord
--
ALTER TABLE "AcquiringIntegrationHistoryRecord" ADD COLUMN "isHidden" boolean NULL;
--
-- Add field shortDescription to acquiringintegrationhistoryrecord
--
ALTER TABLE "AcquiringIntegrationHistoryRecord" ADD COLUMN "shortDescription" text NULL;
--
-- Alter field detailsText on billingintegrationhistoryrecord
--
TRUNCATE TABLE "BillingIntegrationHistoryRecord";
ALTER TABLE "BillingIntegrationHistoryRecord" ALTER COLUMN "detailsText" TYPE jsonb USING "detailsText"::jsonb;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field detailsText on billingintegrationhistoryrecord
--
ALTER TABLE "BillingIntegrationHistoryRecord" ALTER COLUMN "detailsText" TYPE text USING "detailsText"::text;
--
-- Add field shortDescription to acquiringintegrationhistoryrecord
--
ALTER TABLE "AcquiringIntegrationHistoryRecord" DROP COLUMN "shortDescription" CASCADE;
--
-- Add field isHidden to acquiringintegrationhistoryrecord
--
ALTER TABLE "AcquiringIntegrationHistoryRecord" DROP COLUMN "isHidden" CASCADE;
--
-- Add field detailsTitle to acquiringintegrationhistoryrecord
--
ALTER TABLE "AcquiringIntegrationHistoryRecord" DROP COLUMN "detailsTitle" CASCADE;
--
-- Add field detailsText to acquiringintegrationhistoryrecord
--
ALTER TABLE "AcquiringIntegrationHistoryRecord" DROP COLUMN "detailsText" CASCADE;
--
-- Add field shortDescription to acquiringintegration
--
ALTER TABLE "AcquiringIntegration" DROP COLUMN "shortDescription" CASCADE;
--
-- Add field isHidden to acquiringintegration
--
ALTER TABLE "AcquiringIntegration" DROP COLUMN "isHidden" CASCADE;
--
-- Add field detailsTitle to acquiringintegration
--
ALTER TABLE "AcquiringIntegration" DROP COLUMN "detailsTitle" CASCADE;
--
-- Add field detailsText to acquiringintegration
--
ALTER TABLE "AcquiringIntegration" DROP COLUMN "detailsText" CASCADE;
COMMIT;

    `)
}
