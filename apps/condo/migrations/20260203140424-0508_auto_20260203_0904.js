// auto generated by kmigrator
// KMIGRATOR:0508_auto_20260203_0904:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDUuMCBvbiAyMDI2LTAyLTAzIDA5OjA0Cgpmcm9tIGRqYW5nby5kYiBpbXBvcnQgbWlncmF0aW9ucwoKCmNsYXNzIE1pZ3JhdGlvbihtaWdyYXRpb25zLk1pZ3JhdGlvbik6CgogICAgZGVwZW5kZW5jaWVzID0gWwogICAgICAgICgnX2RqYW5nb19zY2hlbWEnLCAnMDUwN191c2VycmlnaHRzc2V0X2Nhbm1hbmFnZWJpbGxpbmdpbnRlZ3JhdGlvbm9yZ2FuaXphdGlvbmNvbnRleHRkZWxldGVkYXRmaWVsZF9hbmRfbW9yZScpLAogICAgXQoKICAgIG9wZXJhdGlvbnMgPSBbCiAgICBdCg==
// KMIGRATOR_VIEWS:0508_auto_20260203_0904:eyJkdiI6MSwibGlzdHMiOnsiVXNlciI6eyJmaWVsZHMiOlsiYXZhdGFyIiwiY3JlYXRlZEF0IiwiY3JlYXRlZEJ5IiwiY3VzdG9tQWNjZXNzIiwiZGVsZXRlZEF0IiwiZHYiLCJlbWFpbCIsImV4dGVybmFsRW1haWwiLCJleHRlcm5hbFBob25lIiwiZXh0ZXJuYWxTeXN0ZW1OYW1lIiwiaGFzTWFya2V0aW5nQ29uc2VudCIsImlkIiwiaXNBZG1pbiIsImlzRW1haWxWZXJpZmllZCIsImlzRXh0ZXJuYWxFbWFpbFZlcmlmaWVkIiwiaXNFeHRlcm5hbFBob25lVmVyaWZpZWQiLCJpc1Bob25lVmVyaWZpZWQiLCJpc1N1cHBvcnQiLCJpc1R3b0ZhY3RvckF1dGhlbnRpY2F0aW9uRW5hYmxlZCIsImxvY2FsZSIsIm1ldGEiLCJuYW1lIiwibmV3SWQiLCJwYXNzd29yZCIsInBob25lIiwicmlnaHRzU2V0Iiwic2VuZGVyIiwic2hvd0dsb2JhbEhpbnRzIiwidHlwZSIsInVwZGF0ZWRBdCIsInVwZGF0ZWRCeSIsInYiXSwic2Vuc2l0aXZlRmllbGRzIjpbImVtYWlsIiwiZXh0ZXJuYWxFbWFpbCIsImV4dGVybmFsUGhvbmUiLCJtZXRhIiwibmFtZSIsInBhc3N3b3JkIiwicGhvbmUiXX19fQ==

exports.up = async (knex) => {
    await knex.raw(`
    
--
-- Create analytics schema
--
CREATE SCHEMA IF NOT EXISTS "analytics";
--
-- Create view for "User" table
--
CREATE OR REPLACE VIEW "analytics"."User" AS SELECT "avatar", "createdAt", "createdBy", "customAccess", "deletedAt", "dv", NULL as "email", NULL as "externalEmail", NULL as "externalPhone", "externalSystemName", "hasMarketingConsent", "id", "isAdmin", "isEmailVerified", "isExternalEmailVerified", "isExternalPhoneVerified", "isPhoneVerified", "isSupport", "isTwoFactorAuthenticationEnabled", "locale", NULL as "meta", NULL as "name", "newId", NULL as "password", NULL as "phone", "rightsSet", "sender", "showGlobalHints", "type", "updatedAt", "updatedBy", "v" FROM "public"."User";

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    
--
-- Remove view for "User" table
--
DROP VIEW IF EXISTS "analytics"."User";
--
-- Drop analytics schema
--
DROP SCHEMA IF EXISTS "analytics";

    `)
}
