// auto generated by kmigrator
// KMIGRATOR:0500_auto_20251211_0621:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi41IG9uIDIwMjUtMTItMTEgMDY6MjEKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzA0OTlfYXV0b18yMDI1MTIwOV8xMDI3JyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdzdWJzY3JpcHRpb25wbGFuJywKICAgICAgICAgICAgbmFtZT0nY2FuQmVQcm9tb3RlZCcsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5Cb29sZWFuRmllbGQoZGVmYXVsdD1GYWxzZSksCiAgICAgICAgICAgIHByZXNlcnZlX2RlZmF1bHQ9RmFsc2UsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdzdWJzY3JpcHRpb25wbGFuaGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J2NhbkJlUHJvbW90ZWQnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuQm9vbGVhbkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFsdGVyRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3N1YnNjcmlwdGlvbnBsYW5wcmljaW5ncnVsZScsCiAgICAgICAgICAgIG5hbWU9J2N1cnJlbmN5Q29kZScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5UZXh0RmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWx0ZXJGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nc3Vic2NyaXB0aW9ucGxhbnByaWNpbmdydWxlJywKICAgICAgICAgICAgbmFtZT0ncHJpY2UnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRGVjaW1hbEZpZWxkKGJsYW5rPVRydWUsIGRlY2ltYWxfcGxhY2VzPTgsIG1heF9kaWdpdHM9MTgsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field canBePromoted to subscriptionplan
--
ALTER TABLE "SubscriptionPlan" ADD COLUMN "canBePromoted" boolean DEFAULT false NOT NULL;
ALTER TABLE "SubscriptionPlan" ALTER COLUMN "canBePromoted" DROP DEFAULT;
--
-- Add field canBePromoted to subscriptionplanhistoryrecord
--
ALTER TABLE "SubscriptionPlanHistoryRecord" ADD COLUMN "canBePromoted" boolean NULL;
--
-- Alter field currencyCode on subscriptionplanpricingrule
--
ALTER TABLE "SubscriptionPlanPricingRule" ALTER COLUMN "currencyCode" DROP NOT NULL;
--
-- Alter field price on subscriptionplanpricingrule
--
ALTER TABLE "SubscriptionPlanPricingRule" ALTER COLUMN "price" DROP NOT NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field price on subscriptionplanpricingrule
--
ALTER TABLE "SubscriptionPlanPricingRule" ALTER COLUMN "price" SET NOT NULL;
--
-- Alter field currencyCode on subscriptionplanpricingrule
--
ALTER TABLE "SubscriptionPlanPricingRule" ALTER COLUMN "currencyCode" SET NOT NULL;
--
-- Add field canBePromoted to subscriptionplanhistoryrecord
--
ALTER TABLE "SubscriptionPlanHistoryRecord" DROP COLUMN "canBePromoted" CASCADE;
--
-- Add field canBePromoted to subscriptionplan
--
ALTER TABLE "SubscriptionPlan" DROP COLUMN "canBePromoted" CASCADE;
COMMIT;

    `)
}
