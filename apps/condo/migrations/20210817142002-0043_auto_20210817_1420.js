// auto generated by kmigrator
// KMIGRATOR:0043_auto_20210817_1420:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi41IG9uIDIwMjEtMDgtMTcgMTQ6MjAKCmltcG9ydCBkamFuZ28uY29udHJpYi5wb3N0Z3Jlcy5maWVsZHMuanNvbmIKZnJvbSBkamFuZ28uZGIgaW1wb3J0IG1pZ3JhdGlvbnMsIG1vZGVscwoKCmNsYXNzIE1pZ3JhdGlvbihtaWdyYXRpb25zLk1pZ3JhdGlvbik6CgogICAgZGVwZW5kZW5jaWVzID0gWwogICAgICAgICgnX2RqYW5nb19zY2hlbWEnLCAnMDA0Ml9kaXZpc2lvbl9kaXZpc2lvbl9leGVjdXRvcnNfbWFueV9kaXZpc2lvbl9wcm9wZXJ0aWVzX21hbnlfZGl2aXNpb25oaXN0b3J5cmVjb3JkJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiaWxsaW5naW50ZWdyYXRpb24nLAogICAgICAgICAgICBuYW1lPSdjb250ZXh0RGVmYXVsdFN0YXR1cycsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5UZXh0RmllbGQoZGVmYXVsdD0nSW5Qcm9ncmVzcycpLAogICAgICAgICAgICBwcmVzZXJ2ZV9kZWZhdWx0PUZhbHNlLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYmlsbGluZ2ludGVncmF0aW9uaGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J2NvbnRleHREZWZhdWx0U3RhdHVzJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYmlsbGluZ2ludGVncmF0aW9ub3JnYW5pemF0aW9uY29udGV4dCcsCiAgICAgICAgICAgIG5hbWU9J2xhc3RSZXBvcnQnLAogICAgICAgICAgICBmaWVsZD1kamFuZ28uY29udHJpYi5wb3N0Z3Jlcy5maWVsZHMuanNvbmIuSlNPTkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiaWxsaW5naW50ZWdyYXRpb25vcmdhbml6YXRpb25jb250ZXh0aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J2xhc3RSZXBvcnQnLAogICAgICAgICAgICBmaWVsZD1kamFuZ28uY29udHJpYi5wb3N0Z3Jlcy5maWVsZHMuanNvbmIuSlNPTkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field contextDefaultStatus to billingintegration
--
ALTER TABLE "BillingIntegration" ADD COLUMN "contextDefaultStatus" text DEFAULT 'InProgress' NOT NULL;
ALTER TABLE "BillingIntegration" ALTER COLUMN "contextDefaultStatus" DROP DEFAULT;
--
-- Add field contextDefaultStatus to billingintegrationhistoryrecord
--
ALTER TABLE "BillingIntegrationHistoryRecord" ADD COLUMN "contextDefaultStatus" text NULL;
--
-- Add field lastReport to billingintegrationorganizationcontext
--
ALTER TABLE "BillingIntegrationOrganizationContext" ADD COLUMN "lastReport" jsonb NULL;
--
-- Add field lastReport to billingintegrationorganizationcontexthistoryrecord
--
ALTER TABLE "BillingIntegrationOrganizationContextHistoryRecord" ADD COLUMN "lastReport" jsonb NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field lastReport to billingintegrationorganizationcontexthistoryrecord
--
ALTER TABLE "BillingIntegrationOrganizationContextHistoryRecord" DROP COLUMN "lastReport" CASCADE;
--
-- Add field lastReport to billingintegrationorganizationcontext
--
ALTER TABLE "BillingIntegrationOrganizationContext" DROP COLUMN "lastReport" CASCADE;
--
-- Add field contextDefaultStatus to billingintegrationhistoryrecord
--
ALTER TABLE "BillingIntegrationHistoryRecord" DROP COLUMN "contextDefaultStatus" CASCADE;
--
-- Add field contextDefaultStatus to billingintegration
--
ALTER TABLE "BillingIntegration" DROP COLUMN "contextDefaultStatus" CASCADE;
COMMIT;

    `)
}
