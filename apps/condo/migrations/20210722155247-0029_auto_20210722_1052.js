// auto generated by kmigrator
// KMIGRATOR:0029_auto_20210722_1052:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi40IG9uIDIwMjEtMDctMjIgMTA6NTIKCmltcG9ydCBkamFuZ28uY29udHJpYi5wb3N0Z3Jlcy5maWVsZHMuanNvbmIKZnJvbSBkamFuZ28uZGIgaW1wb3J0IG1pZ3JhdGlvbnMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAwMjhfYXV0b18yMDIxMDcyMl8xMDExJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLlJlbmFtZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiaWxsaW5ncmVjZWlwdGhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBvbGRfbmFtZT0nbWV0YScsCiAgICAgICAgICAgIG5ld19uYW1lPSd0b1BheURldGFpbHMnLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nYmlsbGluZ3JlY2VpcHQnLAogICAgICAgICAgICBuYW1lPSdtZXRhJywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2JpbGxpbmdyZWNlaXB0JywKICAgICAgICAgICAgbmFtZT0ndG9QYXlEZXRhaWxzJywKICAgICAgICAgICAgZmllbGQ9ZGphbmdvLmNvbnRyaWIucG9zdGdyZXMuZmllbGRzLmpzb25iLkpTT05GaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiaWxsaW5ncmVjZWlwdCcsCiAgICAgICAgICAgIG5hbWU9J3NlcnZpY2VzJywKICAgICAgICAgICAgZmllbGQ9ZGphbmdvLmNvbnRyaWIucG9zdGdyZXMuZmllbGRzLmpzb25iLkpTT05GaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Rename field meta on billingreceipthistoryrecord to toPayDetails
--
ALTER TABLE "BillingReceiptHistoryRecord" RENAME COLUMN "meta" TO "toPayDetails";
--
-- Remove field meta from billingreceipt
--
ALTER TABLE "BillingReceipt" DROP COLUMN "meta" CASCADE;
--
-- Add field toPayDetails to billingreceipt
--
ALTER TABLE "BillingReceipt" ADD COLUMN "toPayDetails" jsonb NULL;
--
-- Alter field services on billingreceipt
--
ALTER TABLE "BillingReceipt" ALTER COLUMN "services" DROP NOT NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field services on billingreceipt
--
ALTER TABLE "BillingReceipt" ALTER COLUMN "services" SET NOT NULL;
--
-- Add field toPayDetails to billingreceipt
--
ALTER TABLE "BillingReceipt" DROP COLUMN "toPayDetails" CASCADE;
--
-- Remove field meta from billingreceipt
--
ALTER TABLE "BillingReceipt" ADD COLUMN "meta" jsonb NOT NULL;
--
-- Rename field meta on billingreceipthistoryrecord to toPayDetails
--
ALTER TABLE "BillingReceiptHistoryRecord" RENAME COLUMN "toPayDetails" TO "meta";
COMMIT;

    `)
}
