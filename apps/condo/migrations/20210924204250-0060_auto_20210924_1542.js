// auto generated by kmigrator
// KMIGRATOR:0060_auto_20210924_1542:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi40IG9uIDIwMjEtMDktMjQgMTU6NDIKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAwNTlfYXV0b18yMDIxMDkyM18wNzQzJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLkFsdGVyRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2JpbGxpbmdhY2NvdW50JywKICAgICAgICAgICAgbmFtZT0nZ2xvYmFsSWQnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVGV4dEZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFsdGVyRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2JpbGxpbmdwcm9wZXJ0eScsCiAgICAgICAgICAgIG5hbWU9J2dsb2JhbElkJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZCgpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRDb25zdHJhaW50KAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiaWxsaW5nYWNjb3VudCcsCiAgICAgICAgICAgIGNvbnN0cmFpbnQ9bW9kZWxzLlVuaXF1ZUNvbnN0cmFpbnQoZmllbGRzPSgnY29udGV4dCcsICdnbG9iYWxJZCcpLCBuYW1lPSdiaWxsaW5nQWNjb3VudF91bmlxdWVfY29udGV4dF9nbG9iYWxJZCcpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRDb25zdHJhaW50KAogICAgICAgICAgICBtb2RlbF9uYW1lPSdiaWxsaW5ncHJvcGVydHknLAogICAgICAgICAgICBjb25zdHJhaW50PW1vZGVscy5VbmlxdWVDb25zdHJhaW50KGZpZWxkcz0oJ2NvbnRleHQnLCAnZ2xvYmFsSWQnKSwgbmFtZT0nYmlsbGluZ1Byb3BlcnR5X3VuaXF1ZV9jb250ZXh0X2dsb2JhbElkJyksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field globalId on billingaccount
--
DROP INDEX IF EXISTS "BillingAccount_globalId_e29b5e61_like";
--
-- Alter field globalId on billingproperty
--
DROP INDEX IF EXISTS "BillingProperty_globalId_31075b81_like";
--
-- Create constraint billingAccount_unique_context_globalId on model billingaccount
--
ALTER TABLE "BillingAccount" ADD CONSTRAINT "billingAccount_unique_context_globalId" UNIQUE ("context", "globalId");
--
-- Create constraint billingProperty_unique_context_globalId on model billingproperty
--
ALTER TABLE "BillingProperty" ADD CONSTRAINT "billingProperty_unique_context_globalId" UNIQUE ("context", "globalId");
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Create constraint billingProperty_unique_context_globalId on model billingproperty
--
ALTER TABLE "BillingProperty" DROP CONSTRAINT "billingProperty_unique_context_globalId";
--
-- Create constraint billingAccount_unique_context_globalId on model billingaccount
--
ALTER TABLE "BillingAccount" DROP CONSTRAINT "billingAccount_unique_context_globalId";
--
-- Alter field globalId on billingproperty
--
ALTER TABLE "BillingProperty" ADD CONSTRAINT "BillingProperty_globalId_31075b81_uniq" UNIQUE ("globalId");
CREATE INDEX "BillingProperty_globalId_31075b81_like" ON "BillingProperty" ("globalId" text_pattern_ops);
--
-- Alter field globalId on billingaccount
--
ALTER TABLE "BillingAccount" ADD CONSTRAINT "BillingAccount_globalId_e29b5e61_uniq" UNIQUE ("globalId");
CREATE INDEX "BillingAccount_globalId_e29b5e61_like" ON "BillingAccount" ("globalId" text_pattern_ops);
COMMIT;

    `)
}
