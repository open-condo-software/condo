/**
 * Generated by `createschema notification.Message 'organization?:Relationship:Organization:CASCADE; property?:Relationship:Property:CASCADE; ticket?:Relationship:Ticket:CASCADE; user:Relationship:User:CASCADE; type:Text; meta:Json; channels:Json; status:Select:sending,planned,sent,canceled; deliveredAt:DateTimeUtc;'`
 */

const { get } = require('lodash')

const conf = require('@open-condo/config')

const JSON_NO_REQUIRED_ATTR_ERROR = '[json:noRequiredAttr:'
const JSON_SUSPICIOUS_ATTR_NAME_ERROR = '[json:suspiciousAttrName:'
const JSON_UNKNOWN_ATTR_NAME_ERROR = '[json:unknownAttrName:'

const SMS_TRANSPORT = 'sms'
const EMAIL_TRANSPORT = 'email'
const TELEGRAM_TRANSPORT = 'telegram'
const PUSH_TRANSPORT = 'push'
const MESSAGE_TRANSPORTS = [SMS_TRANSPORT, EMAIL_TRANSPORT, TELEGRAM_TRANSPORT, PUSH_TRANSPORT]
const FAKE_SUCCESS_MESSAGE_PREFIX = 'fake-success-message'
const FAKE_ERROR_MESSAGE_PREFIX = 'fake-error-message'

const TICKET_CREATED_TYPE = 'TICKET_CREATED'
const TICKET_COMMENT_CREATED_TYPE = 'TICKET_COMMENT_CREATED'
const INVITE_NEW_EMPLOYEE_MESSAGE_TYPE = 'INVITE_NEW_EMPLOYEE'
const SHARE_TICKET_MESSAGE_TYPE = 'SHARE_TICKET'
const DIRTY_INVITE_NEW_EMPLOYEE_SMS_MESSAGE_TYPE = 'DIRTY_INVITE_NEW_EMPLOYEE_SMS'
const DIRTY_INVITE_NEW_EMPLOYEE_EMAIL_MESSAGE_TYPE = 'DIRTY_INVITE_NEW_EMPLOYEE_EMAIL'
const SMS_VERIFY_CODE_MESSAGE_TYPE = 'SMS_VERIFY'
const EMAIL_VERIFY_CODE_MESSAGE_TYPE = 'EMAIL_VERIFY'
const VERIFY_USER_EMAIL_MESSAGE_TYPE = 'VERIFY_USER_EMAIL'
const DEVELOPER_IMPORTANT_NOTE_TYPE = 'DEVELOPER_IMPORTANT_NOTE_TYPE'
const CUSTOMER_IMPORTANT_NOTE_TYPE = 'CUSTOMER_IMPORTANT_NOTE_TYPE'
const MESSAGE_FORWARDED_TO_SUPPORT_TYPE = 'MESSAGE_FORWARDED_TO_SUPPORT'
const TICKET_ASSIGNEE_CONNECTED_TYPE = 'TICKET_ASSIGNEE_CONNECTED'
const TICKET_EXECUTOR_CONNECTED_TYPE = 'TICKET_EXECUTOR_CONNECTED'
const TRACK_TICKET_IN_DOMA_APP_TYPE = 'TRACK_TICKET_IN_DOMA_APP'
const TICKET_STATUS_OPENED_TYPE = 'TICKET_STATUS_OPENED'
const TICKET_STATUS_IN_PROGRESS_TYPE = 'TICKET_STATUS_IN_PROGRESS'
const TICKET_STATUS_COMPLETED_TYPE = 'TICKET_STATUS_COMPLETED'
const TICKET_STATUS_RETURNED_TYPE = 'TICKET_STATUS_RETURNED'
const TICKET_STATUS_DECLINED_TYPE = 'TICKET_STATUS_DECLINED'
const TICKET_COMMENT_ADDED_TYPE = 'TICKET_COMMENT_ADDED'
const METER_VERIFICATION_DATE_REMINDER_TYPE = 'METER_VERIFICATION_DATE_REMINDER'
const METER_SUBMIT_READINGS_REMINDER_TYPE = 'METER_SUBMIT_READINGS_REMINDER'
const METER_SUBMIT_READINGS_REMINDER_START_PERIOD_TYPE = 'METER_SUBMIT_READINGS_REMINDER_START_PERIOD'
const METER_SUBMIT_READINGS_REMINDER_END_PERIOD_TYPE = 'METER_SUBMIT_READINGS_REMINDER_END_PERIOD'
const METER_VERIFICATION_DATE_EXPIRED_TYPE = 'METER_VERIFICATION_DATE_EXPIRED'
const RESIDENT_ADD_BILLING_ACCOUNT_TYPE = 'RESIDENT_ADD_BILLING_ACCOUNT'
const BILLING_RECEIPT_AVAILABLE_TYPE = 'BILLING_RECEIPT_AVAILABLE'
const BILLING_RECEIPT_AVAILABLE_NO_ACCOUNT_TYPE = 'BILLING_RECEIPT_AVAILABLE_NO_ACCOUNT'
const BILLING_RECEIPT_CATEGORY_AVAILABLE_TYPE = 'BILLING_RECEIPT_CATEGORY_AVAILABLE'
const BILLING_RECEIPT_ADDED_TYPE = 'BILLING_RECEIPT_ADDED'
const BILLING_RECEIPT_FILE_ADDED_TYPE = 'BILLING_RECEIPT_FILE_ADDED'
const BILLING_RECEIPT_ADDED_WITH_DEBT_TYPE = 'BILLING_RECEIPT_ADDED_WITH_DEBT'
const BILLING_RECEIPT_ADDED_WITH_NO_DEBT_TYPE = 'BILLING_RECEIPT_ADDED_WITH_NO_DEBT'
const RESIDENT_UPGRADE_APP_TYPE = 'RESIDENT_UPGRADE_APP'
const STAFF_UPGRADE_APP_TYPE = 'STAFF_UPGRADE_APP'
const BANK_ACCOUNT_CREATION_REQUEST_TYPE = 'BANK_ACCOUNT_CREATION_REQUEST'
const CUSTOM_CONTENT_MESSAGE_TYPE = 'CUSTOM_CONTENT_MESSAGE'
const CUSTOM_CONTENT_MESSAGE_PUSH_TYPE = 'CUSTOM_CONTENT_MESSAGE_PUSH'
const MOBILE_APP_UPDATE_AVAILABLE_MESSAGE_PUSH_TYPE = 'MOBILE_APP_UPDATE_AVAILABLE_MESSAGE_PUSH'
const CUSTOM_CONTENT_MESSAGE_EMAIL_TYPE = 'CUSTOM_CONTENT_MESSAGE_EMAIL'
const CUSTOM_CONTENT_MESSAGE_SMS_TYPE = 'CUSTOM_CONTENT_MESSAGE_SMS'
const VOIP_INCOMING_CALL_MESSAGE_TYPE = 'VOIP_INCOMING_CALL_MESSAGE'
const CANCELED_CALL_MESSAGE_PUSH_TYPE = 'CANCELED_CALL_MESSAGE_PUSH'
const RECURRENT_PAYMENT_PROCEEDING_SUCCESS_RESULT_MESSAGE_TYPE = 'RECURRENT_PAYMENT_PROCEEDING_SUCCESS_RESULT_MESSAGE'
const RECURRENT_PAYMENT_PROCEEDING_UNKNOWN_ERROR_MESSAGE_TYPE = 'RECURRENT_PAYMENT_PROCEEDING_UNKNOWN_ERROR_MESSAGE'
const RECURRENT_PAYMENT_PROCEEDING_ACQUIRING_PAYMENT_PROCEED_ERROR_MESSAGE_TYPE = 'RECURRENT_PAYMENT_PROCEEDING_ACQUIRING_PAYMENT_PROCEED_ERROR_MESSAGE'
const RECURRENT_PAYMENT_PROCEEDING_SERVICE_CONSUMER_NOT_FOUND_ERROR_MESSAGE_TYPE = 'RECURRENT_PAYMENT_PROCEEDING_SERVICE_CONSUMER_NOT_FOUND_ERROR_MESSAGE'
const RECURRENT_PAYMENT_PROCEEDING_LIMIT_EXCEEDED_ERROR_MESSAGE_TYPE = 'RECURRENT_PAYMENT_PROCEEDING_LIMIT_EXCEEDED_ERROR_MESSAGE'
const RECURRENT_PAYMENT_PROCEEDING_CONTEXT_NOT_FOUND_ERROR_MESSAGE_TYPE = 'RECURRENT_PAYMENT_PROCEEDING_CONTEXT_NOT_FOUND_ERROR_MESSAGE'
const RECURRENT_PAYMENT_PROCEEDING_CONTEXT_DISABLED_ERROR_MESSAGE_TYPE = 'RECURRENT_PAYMENT_PROCEEDING_CONTEXT_DISABLED_ERROR_MESSAGE'
const RECURRENT_PAYMENT_PROCEEDING_CARD_TOKEN_NOT_VALID_ERROR_MESSAGE_TYPE = 'RECURRENT_PAYMENT_PROCEEDING_CARD_TOKEN_NOT_VALID_ERROR_MESSAGE'
const RECURRENT_PAYMENT_PROCEEDING_CAN_NOT_REGISTER_MULTI_PAYMENT_ERROR_MESSAGE_TYPE = 'RECURRENT_PAYMENT_PROCEEDING_CAN_NOT_REGISTER_MULTI_PAYMENT_ERROR_MESSAGE'
const RECURRENT_PAYMENT_PROCEEDING_NO_RECEIPTS_TO_PROCEED_ERROR_MESSAGE_TYPE = 'RECURRENT_PAYMENT_PROCEEDING_NO_RECEIPTS_TO_PROCEED_ERROR_MESSAGE'
const RECURRENT_PAYMENT_TOMORROW_PAYMENT_MESSAGE_TYPE = 'RECURRENT_PAYMENT_TOMORROW_PAYMENT_MESSAGE'
const RECURRENT_PAYMENT_TOMORROW_PAYMENT_NO_RECEIPTS_MESSAGE_TYPE = 'RECURRENT_PAYMENT_TOMORROW_PAYMENT_NO_RECEIPTS_MESSAGE'
const RECURRENT_PAYMENT_TOMORROW_PAYMENT_LIMIT_EXCEED_MESSAGE_TYPE = 'RECURRENT_PAYMENT_TOMORROW_PAYMENT_LIMIT_EXCEED_MESSAGE'
const B2C_APP_MESSAGE_PUSH_TYPE = 'B2C_APP_MESSAGE_PUSH'
const NEWS_ITEM_COMMON_MESSAGE_TYPE = 'NEWS_ITEM_COMMON_MESSAGE_TYPE'
const NEWS_ITEM_EMERGENCY_MESSAGE_TYPE = 'NEWS_ITEM_EMERGENCY_MESSAGE_TYPE'
const DEV_PORTAL_MESSAGE_TYPE = 'DEV_PORTAL_MESSAGE'
const SEND_BILLING_RECEIPTS_ON_PAYDAY_REMINDER_MESSAGE_TYPE = 'SEND_BILLING_RECEIPTS_ON_PAYDAY_REMINDER_MESSAGE'
const MARKETPLACE_INVOICE_PUBLISHED_MESSAGE_TYPE = 'MARKETPLACE_INVOICE_PUBLISHED_MESSAGE'
const MARKETPLACE_INVOICE_WITH_TICKET_PUBLISHED_MESSAGE_TYPE = 'MARKETPLACE_INVOICE_WITH_TICKET_PUBLISHED_MESSAGE'
const MARKETPLACE_INVOICE_CASH_PUBLISHED_MESSAGE_TYPE = 'MARKETPLACE_INVOICE_CASH_PUBLISHED_MESSAGE'
const MARKETPLACE_INVOICE_CASH_WITH_TICKET_PUBLISHED_MESSAGE_TYPE = 'MARKETPLACE_INVOICE_CASH_WITH_TICKET_PUBLISHED_MESSAGE'
const SERVICE_USER_CREATED_MESSAGE_TYPE = 'SERVICE_USER_CREATED'
const TITLE_IS_REQUIRED_FOR_CUSTOM_CONTENT_MESSAGE_TYPE = 'TITLE_IS_REQUIRED_FOR_CUSTOM_CONTENT_MESSAGE_TYPE'
const BODY_IS_REQUIRED_FOR_CUSTOM_CONTENT_MESSAGE_TYPE = 'BODY_IS_REQUIRED_FOR_CUSTOM_CONTENT_MESSAGE_TYPE'
const SEND_DAILY_STATISTICS_MESSAGE_TYPE = 'SEND_DAILY_STATISTICS'
const B2B_APP_MESSAGE_PUSH_TYPE = 'B2B_APP_MESSAGE_PUSH'
const PASS_TICKET_CREATED_MESSAGE_TYPE = 'PASS_TICKET_CREATED'
const PASS_TICKET_COMMENT_CREATED_MESSAGE_TYPE = 'PASS_TICKET_COMMENT_CREATED'


const MESSAGE_SENDING_STATUS = 'sending'
const MESSAGE_RESENDING_STATUS = 'resending'
const MESSAGE_PROCESSING_STATUS = 'processing'
const MESSAGE_ERROR_STATUS = 'error'
const MESSAGE_BLACKLISTED_STATUS = 'blacklisted'
const MESSAGE_DELIVERED_STATUS = 'delivered'
const MESSAGE_CANCELED_STATUS = 'canceled'
const MESSAGE_SENT_STATUS = 'sent'
const MESSAGE_READ_STATUS = 'read'
const MESSAGE_DISABLED_BY_USER_STATUS = 'disabledByUser'
const MESSAGE_THROTTLED_STATUS = 'throttled'
const MESSAGE_STATUSES = [
    MESSAGE_SENDING_STATUS,
    MESSAGE_RESENDING_STATUS,
    MESSAGE_PROCESSING_STATUS,
    MESSAGE_ERROR_STATUS,
    MESSAGE_BLACKLISTED_STATUS,
    MESSAGE_SENT_STATUS,
    MESSAGE_DELIVERED_STATUS,
    MESSAGE_READ_STATUS,
    MESSAGE_CANCELED_STATUS,
    MESSAGE_DISABLED_BY_USER_STATUS,
    MESSAGE_THROTTLED_STATUS,
]

const MESSAGE_BATCH_CREATED_STATUS = 'created'
const MESSAGE_BATCH_PROCESSING_STATUS = 'processing'
const MESSAGE_BATCH_FAILED_STATUS = 'failed'
const MESSAGE_BATCH_DONE_STATUS = 'done'
const MESSAGE_BATCH_STATUSES = [MESSAGE_BATCH_CREATED_STATUS, MESSAGE_BATCH_PROCESSING_STATUS, MESSAGE_BATCH_FAILED_STATUS, MESSAGE_BATCH_DONE_STATUS]
const MESSAGE_BATCH_TYPE_OPTIONS = [CUSTOM_CONTENT_MESSAGE_TYPE, MOBILE_APP_UPDATE_AVAILABLE_MESSAGE_PUSH_TYPE, CUSTOM_CONTENT_MESSAGE_PUSH_TYPE, CUSTOM_CONTENT_MESSAGE_EMAIL_TYPE, CUSTOM_CONTENT_MESSAGE_SMS_TYPE]

const DEVICE_PLATFORM_ANDROID = 'android'
const DEVICE_PLATFORM_IOS = 'ios'
const DEVICE_PLATFORM_WEB = 'web'
const DEVICE_PLATFORM_TYPES = [DEVICE_PLATFORM_ANDROID, DEVICE_PLATFORM_IOS, DEVICE_PLATFORM_WEB]

const PUSH_TYPE_DEFAULT = 'default'
const PUSH_TYPE_SILENT_DATA = 'silent_data'
const PUSH_TYPES = [PUSH_TYPE_DEFAULT, PUSH_TYPE_SILENT_DATA]

const PUSH_TRANSPORT_FIREBASE = 'firebase'
const PUSH_TRANSPORT_REDSTORE = 'redstore'
const PUSH_TRANSPORT_APPLE = 'apple'
const PUSH_TRANSPORT_HUAWEI = 'huawei'
const PUSH_TRANSPORT_TYPES = [PUSH_TRANSPORT_FIREBASE, PUSH_TRANSPORT_APPLE, PUSH_TRANSPORT_HUAWEI, PUSH_TRANSPORT_REDSTORE]
const PUSH_FAKE_TOKEN_SUCCESS = 'PUSH_FAKE_TOKEN_SUCCESS'
const PUSH_FAKE_TOKEN_FAIL = 'PUSH_FAKE_TOKEN_FAIL'

const FIREBASE_CONFIG_ENV = 'FIREBASE_CONFIG_JSON'
const FIREBASE_CONFIG_TEST_PUSHTOKEN_ENV = 'FIREBASE_PUSH_TOKEN_TEST'

const REDSTORE_CONFIG_ENV = 'REDSTORE_CONFIG_JSON'
const REDSTORE_CONFIG_TEST_PUSHTOKEN_ENV = 'REDSTORE_PUSH_TOKEN_TEST'

const HCM_CONFIG_ENV = 'HCM_CONFIG_JSON'
const HCM_CONFIG_TEST_PUSHTOKEN_ENV_RESIDENT = 'HCM_PUSH_TOKEN_TEST_RESIDENT'
const HCM_CONFIG_TEST_PUSHTOKEN_ENV_MASTER = 'HCM_PUSH_TOKEN_TEST_MASTER'

const APPLE_CONFIG_ENV = 'APPLE_CONFIG_JSON'
const APPLE_CONFIG_TEST_PUSHTOKEN_ENV = 'APPLE_PUSH_TOKEN_TEST'
const APPLE_CONFIG_TEST_VOIP_PUSHTOKEN_ENV = 'APPLE_VOIP_PUSH_TOKEN_TEST'

const APPS_WITH_DISABLED_NOTIFICATIONS_ENV = 'APPS_WITH_DISABLED_NOTIFICATIONS'
/**
 * Each account in Huawei is capable to send push-notifications to only one corresponding mobile app
 * These constants represent app type (master/resident) and connect app types to appIds (remoteClient schema)
 */
const APP_MASTER_KEY = 'master'
const APP_RESIDENT_KEY = 'resident'
const APP_CONFIG_KEY_ENV = 'MOBILE_APP_IDS'

const APP_IDS = JSON.parse(get(conf, APP_CONFIG_KEY_ENV, '{}'))
const APP_RESIDENT_ID_ANDROID = get(APP_IDS, [APP_RESIDENT_KEY, DEVICE_PLATFORM_ANDROID]) || 'ai.doma.client'
const APP_RESIDENT_ID_IOS = get(APP_IDS, [APP_RESIDENT_KEY, DEVICE_PLATFORM_IOS]) || 'ai.doma.clients'
const APP_MASTER_ID_ANDROID = get(APP_IDS, [APP_MASTER_KEY, DEVICE_PLATFORM_ANDROID]) || 'ai.doma.master'
const APP_MASTER_ID_IOS = get(APP_IDS, [APP_MASTER_KEY, DEVICE_PLATFORM_IOS]) || 'ai.doma.master'

const HUAWEI_SUPPORTED_APP_NAMES = [APP_RESIDENT_ID_ANDROID, APP_RESIDENT_ID_IOS, APP_MASTER_ID_ANDROID]
const HUAWEI_APP_TYPE_BY_APP_ID = {
    [APP_RESIDENT_ID_ANDROID]: APP_RESIDENT_KEY,
    [APP_RESIDENT_ID_IOS]: APP_RESIDENT_KEY,
    [APP_MASTER_ID_ANDROID]: APP_MASTER_KEY,
}

const DEFAULT_TEMPLATE_FILE_EXTENSION = 'njk'
const DEFAULT_TEMPLATE_FILE_NAME = `default.${DEFAULT_TEMPLATE_FILE_EXTENSION}`

const DIRECTLY_AVAILABLE_TYPES = [
    B2C_APP_MESSAGE_PUSH_TYPE,
    VOIP_INCOMING_CALL_MESSAGE_TYPE,
    CANCELED_CALL_MESSAGE_PUSH_TYPE,
]

const SMS_FORBIDDEN_SYMBOLS_REGEXP = /[&#|«»]+/gim

const newsItemMessageMeta = {
    dv: { required: true },
    title: { required: true },
    body: { required: true },
    data: {
        newsItemId: { required: true },
        organizationId: { required: true },
    },
}

const recurrentPaymentProceedingFailedCommonMessageMeta = {
    dv: { required: true },
    data: {
        recurrentPaymentContextId: { required: true },
        recurrentPaymentId: { required: true },
        serviceConsumerId: { required: true },
        residentId: { required: true },
        userId: { required: true },
        errorCode: { required: true },
        url: { required: true },
        lastTry: { required: false },
    },
}

//TODO: maybe we should gather all data about messages types in the single object
//TODO(DOMA-2778) add recursive validation for internal objects like [TICKET_EXECUTOR_CONNECTED_TYPE].data
const MESSAGE_META = {
    [TICKET_CREATED_TYPE]: {
        dv: { defaultValue: '', required: true },
        data: {
            ticketId: { defaultValue: '', required: true },
            ticketNumber: { defaultValue: '', required: true },
            ticketStatus: { defaultValue: '', required: true },
            ticketAddress: { defaultValue: '', required: true },
            ticketUnit: { defaultValue: '', required: true },
            ticketCreatedAt: { defaultValue: '', required: true },
            ticketDetails: { defaultValue: '', required: true },
            ticketClassifier: { defaultValue: '', required: true },
            userId: { defaultValue: '', required: true },
            url: { defaultValue: '', required: true },
            organizationId: { defaultValue: '', required: true },
            organizationName: { defaultValue: '', required: true },
        },
    },
    [TICKET_COMMENT_CREATED_TYPE]: {
        dv: { defaultValue: '', required: true },
        data: {
            ticketId: { defaultValue: '', required: true },
            ticketNumber: { defaultValue: '', required: true },
            ticketStatus: { defaultValue: '', required: true },
            ticketAddress: { defaultValue: '', required: true },
            ticketUnit: { defaultValue: '', required: true },
            ticketDetails: { defaultValue: '', required: true },
            ticketClassifier: { defaultValue: '', required: true },
            userId: { defaultValue: '', required: true },
            commentId: { defaultValue: '', required: true },
            commentContent: { defaultValue: '', required: true },
            commentCreatedAt: { defaultValue: '', required: true },
            commentType: { defaultValue: '', required: true },
            commentTypeMessage: { defaultValue: '', required: true },
            url: { defaultValue: '', required: true },
            organizationId: { defaultValue: '', required: true },
            organizationName: { defaultValue: '', required: true },
            authorType: { defaultValue: '', required: true },
            authorName: { defaultValue: '', required: true },
        },
    },
    [INVITE_NEW_EMPLOYEE_MESSAGE_TYPE]: {
        dv: { defaultValue: '', required: true },
        inviteCode: { defaultValue: '', required: true },
        userName: { defaultValue: 'USERNAME', required: false },
        userEmail: { defaultValue: '', required: false },
        userPhone: { defaultValue: '', required: false },
        organizationName: { defaultValue: 'ORGANIZATION', required: false },
    },
    [SHARE_TICKET_MESSAGE_TYPE]: {
        dv: { defaultValue: '', required: true },
        ticketNumber: { defaultValue: '', required: true },
        date: { defaultValue: '', required: true },
        id: { defaultValue: '', required: true },
        details: { defaultValue: '', required: true },
    },
    [BANK_ACCOUNT_CREATION_REQUEST_TYPE]: {
        dv: { defaultValue: '', required: true },
        bankAccountClient: { defaultValue: {}, required: true },
        tin: { required: true },
        name: { required: true },
        propertyAddress: { defaultValue: '', required: true },
    },
    [DIRTY_INVITE_NEW_EMPLOYEE_SMS_MESSAGE_TYPE]: {
        dv: { defaultValue: '', required: true },
        organizationName: { defaultValue: 'ORGANIZATION', required: false },
        serverUrl: { defaultValue: '', required: false },
        isRegistration: { defaultValue: false, required: false },
    },
    [DIRTY_INVITE_NEW_EMPLOYEE_EMAIL_MESSAGE_TYPE]: {
        dv: { defaultValue: '', required: true },
        organizationName: { defaultValue: 'ORGANIZATION', required: false },
        serverUrl: { defaultValue: '', required: false },
        isRegistration: { defaultValue: false, required: false },
    },
    [SMS_VERIFY_CODE_MESSAGE_TYPE]: {
        dv: { defaultValue: '', required: true },
        smsCode: { defaultValue: '', required: true },
        appId: { required: false },
    },
    [EMAIL_VERIFY_CODE_MESSAGE_TYPE]: {
        dv: { defaultValue: '', required: true },
        secretCode: { defaultValue: '', required: true },
    },
    [VERIFY_USER_EMAIL_MESSAGE_TYPE]: {
        dv: { defaultValue: '', required: true },
        link: { defaultValue: '', required: true },
        withMarketingConsent: { defaultValue: false, required: false },
        userEmail: { defaultValue: '', required: true },
    },
    [DEVELOPER_IMPORTANT_NOTE_TYPE]: {
        dv: { defaultValue: '', required: true },
        type: { defaultValue: 'UNKNOWN', required: true },
        data: { defaultValue: null, required: true },
    },
    [CUSTOMER_IMPORTANT_NOTE_TYPE]: {
        dv: { defaultValue: '', required: true },
        type: { defaultValue: 'UNKNOWN', required: true },
        data: { defaultValue: null, required: true },
    },
    [MESSAGE_FORWARDED_TO_SUPPORT_TYPE]: {
        dv: { defaultValue: '', required: true },
        text: { defaultValue: null, required: true },
        residentsExtraInfo: { defaultValue: null, required: true },
        os: { defaultValue: null, required: true },
        app: { defaultValue: null, required: false },
        appVersion: { defaultValue: null, required: true },
        platform: { defaultValue: null, required: false },
        userAgent: { defaultValue: null, required: false },
        attachments: { defaultValue: [], isRequired: false },
        appealNumber: { defaultValue: 1, isRequired: true },
    },
    [TICKET_ASSIGNEE_CONNECTED_TYPE]: {
        dv: { defaultValue: '', required: true },
        data: {
            ticketId: { defaultValue: '', required: true },
            ticketNumber: { defaultValue: '', required: true },
            userId: { defaultValue: '', required: true },
            url: { defaultValue: '', required: true },
            organizationId: { defaultValue: '', required: true },
        },
    },
    [TICKET_EXECUTOR_CONNECTED_TYPE]: {
        dv: { defaultValue: '', required: true },
        data: {
            ticketId: { defaultValue: '', required: true },
            ticketNumber: { defaultValue: '', required: true },
            userId: { defaultValue: '', required: true },
            url: { defaultValue: '', required: true },
            organizationId: { defaultValue: '', required: true },
        },
    },
    [TRACK_TICKET_IN_DOMA_APP_TYPE]: {
        dv: { defaultValue: '', required: true },
        data: {
            organization: { defaultValue: '', required: true },
        },
    },
    [TICKET_STATUS_OPENED_TYPE]: {
        dv: { defaultValue: '', required: true },
        data: {
            ticketId: { defaultValue: '', required: true },
            ticketNumber: { defaultValue: '', required: true },
            userId: { defaultValue: '', required: true },
            url: { defaultValue: '', required: true },
            residentId: { defaultValue: '', required: true },
        },
    },
    [TICKET_STATUS_IN_PROGRESS_TYPE]: {
        dv: { defaultValue: '', required: true },
        data: {
            ticketId: { defaultValue: '', required: true },
            ticketNumber: { defaultValue: '', required: true },
            userId: { defaultValue: '', required: true },
            url: { defaultValue: '', required: true },
            residentId: { defaultValue: '', required: true },
        },
    },
    [TICKET_STATUS_COMPLETED_TYPE]: {
        dv: { defaultValue: '', required: true },
        data: {
            ticketId: { defaultValue: '', required: true },
            ticketNumber: { defaultValue: '', required: true },
            userId: { defaultValue: '', required: true },
            url: { defaultValue: '', required: true },
            residentId: { defaultValue: '', required: true },
        },
    },
    [TICKET_STATUS_RETURNED_TYPE]: {
        dv: { defaultValue: '', required: true },
        data: {
            ticketId: { defaultValue: '', required: true },
            ticketNumber: { defaultValue: '', required: true },
            userId: { defaultValue: '', required: true },
            url: { defaultValue: '', required: true },
            residentId: { defaultValue: '', required: true },
        },
    },
    [TICKET_STATUS_DECLINED_TYPE]: {
        dv: { defaultValue: '', required: true },
        data: {
            ticketId: { defaultValue: '', required: true },
            ticketNumber: { defaultValue: '', required: true },
            userId: { defaultValue: '', required: true },
            url: { defaultValue: '', required: true },
            residentId: { defaultValue: '', required: true },
        },
    },
    [TICKET_COMMENT_ADDED_TYPE]: {
        dv: { defaultValue: '', required: true },
        data: {
            ticketId: { defaultValue: '', required: true },
            ticketNumber: { defaultValue: '', required: true },
            userId: { defaultValue: '', required: true },
            commentId: { defaultValue: '', required: true },
            url: { defaultValue: '', required: true },
            residentId: { defaultValue: '', required: true },
            organizationId: { defaultValue: '', required: true },
        },
    },
    [METER_VERIFICATION_DATE_REMINDER_TYPE]: {
        dv: { required: true },
        data: {
            reminderDate: { required: true },
            meterId: { required: true },
            userId: { required: true },
            residentId: { required: true },
            url: { required: true },
        },
    },
    [RESIDENT_ADD_BILLING_ACCOUNT_TYPE]: {
        dv: { required: true },
        data: {
            userId: { required: true },
            url: { required: true },
            residentId: { required: true },
            residentIds: { required: true },
        },
    },
    [BILLING_RECEIPT_AVAILABLE_TYPE]: {
        dv: { required: true },
        data: {
            receiptId: { required: true },
            userId: { required: true },
            accountId: { required: true },
            url: { required: true },
            residentId: { required: true },
            period: { required: true },
        },
    },
    [BILLING_RECEIPT_AVAILABLE_NO_ACCOUNT_TYPE]: {
        dv: { required: true },
        data: {
            userId: { required: true },
            url: { required: true },
            residentId: { required: true },
            residentIds: { required: true },
            propertyId: { required: true },
            period: { required: true },
        },
    },
    [BILLING_RECEIPT_CATEGORY_AVAILABLE_TYPE]: {
        dv: { required: true },
        data: {
            userId: { required: true },
            url: { required: true },
            residentId: { required: true },
            propertyId: { required: true },
            period: { required: true },
            categoryId: { required: true },
        },
        categoryName: { required: true },
    },
    [BILLING_RECEIPT_ADDED_TYPE]: {
        dv: { defaultValue: '', required: true },
        data: {
            residentId: { defaultValue: '', required: true },
            userId: { defaultValue: '', required: true },
            url: { defaultValue: '', required: true },
            billingReceiptId: { defaultValue: '', required: true },
            billingAccountId: { defaultValue: '', required: true },
            billingPropertyId: { defaultValue: '', required: true },
            period: { required: true },
        },
    },
    [BILLING_RECEIPT_FILE_ADDED_TYPE]: {
        dv: { defaultValue: '', required: true },
        data: {
            organization: { required: true },
            year: { required: true },
            month: { required: true },
        },
        attachments: { defaultValue: [], isRequired: false },
    },
    [BILLING_RECEIPT_ADDED_WITH_DEBT_TYPE]: {
        dv: { defaultValue: '', required: true },
        data: {
            residentId: { defaultValue: '', required: true },
            userId: { defaultValue: '', required: true },
            url: { defaultValue: '', required: true },
            billingReceiptId: { defaultValue: '', required: true },
            billingAccountId: { defaultValue: '', required: true },
            billingPropertyId: { defaultValue: '', required: true },
            period: { required: true },
            category: { required: true },
            toPay: { required: true },
            currencyCode: { required: true },
        },
    },
    [BILLING_RECEIPT_ADDED_WITH_NO_DEBT_TYPE]: {
        dv: { defaultValue: '', required: true },
        data: {
            residentId: { defaultValue: '', required: true },
            userId: { defaultValue: '', required: true },
            url: { defaultValue: '', required: true },
            billingReceiptId: { defaultValue: '', required: true },
            billingAccountId: { defaultValue: '', required: true },
            billingPropertyId: { defaultValue: '', required: true },
            period: { required: true },
        },
    },
    [METER_SUBMIT_READINGS_REMINDER_TYPE]: {
        dv: { required: true },
        data: {
            meterId: { required: true },
            userId: { required: true },
            residentId: { required: true },
            url: { defaultValue: '', required: true },
        },
    },
    [METER_SUBMIT_READINGS_REMINDER_START_PERIOD_TYPE]: {
        dv: { required: true },
        data: {
            monthName: { defaultValue: '', required: true },
            meterId: { required: true },
            userId: { required: true },
            residentId: { required: true },
            url: { defaultValue: '', required: true },
        },
    },
    [METER_SUBMIT_READINGS_REMINDER_END_PERIOD_TYPE]: {
        dv: { required: true },
        data: {
            monthName: { defaultValue: '', required: true },
            meterId: { required: true },
            userId: { required: true },
            residentId: { required: true },
            url: { defaultValue: '', required: true },
        },
    },
    [METER_VERIFICATION_DATE_EXPIRED_TYPE]: {
        dv: { required: true },
        data: {
            meterId: { required: true },
            resource: { required: true },
            userId: { required: true },
            residentId: { required: true },
            url: { defaultValue: '', required: true },
        },
    },
    [RESIDENT_UPGRADE_APP_TYPE]: {
        dv: { required: true },
        data: {
            userId: { required: true },
            userType: { required: true },
            url: { defaultValue: '', required: true },
        },
    },
    [STAFF_UPGRADE_APP_TYPE]: {
        dv: { required: true },
        data: {
            userId: { required: true },
            userType: { required: true },
            url: { defaultValue: '', required: true },
        },
    },
    [CUSTOM_CONTENT_MESSAGE_PUSH_TYPE]: {
        dv: { required: true },
        title: { required: false },
        body: { required: true },
        data: {
            userId: { required: false },
            remoteClient: { required: false },
            url: { defaultValue: '', required: false },
            messageBatchId: { required: false },
        },
    },
    [MOBILE_APP_UPDATE_AVAILABLE_MESSAGE_PUSH_TYPE]: {
        dv: { required: true },
        title: { required: false },
        body: { required: false },
    },
    [CUSTOM_CONTENT_MESSAGE_EMAIL_TYPE]: {
        dv: { required: true },
        title: { required: false },
        subject: { required: false },
        body: { required: true },
        data: {
            email: { required: false },
            messageBatchId: { required: false },
        },
    },
    [CUSTOM_CONTENT_MESSAGE_SMS_TYPE]: {
        dv: { required: true },
        title: { required: false },
        body: { required: true },
        data: {
            phone: { required: false },
            messageBatchId: { required: false },
        },
    },
    [VOIP_INCOMING_CALL_MESSAGE_TYPE]: {
        dv: { required: true },
        title: { required: false },
        body: { required: true },
        data: {
            B2CAppId: { required: true },
            B2CAppContext: { required: false },
            B2CAppName: { required: true },
            residentId: { required: true },
            callId: { required: false },
            voipType: { required: false },
            voipAddress: { required: false },
            voipLogin: { required: false },
            voipPassword: { required: false },
            voipDtfmCommand: { required: false },
            stun: { required: false },
            codec: { required: false },
        },
    },
    [CANCELED_CALL_MESSAGE_PUSH_TYPE]: {
        dv: { required: true },
        title: { required: false },
        body: { required: true },
        data: {
            B2CAppId: { required: true },
            B2CAppContext: { required: false },
            B2CAppName: { required: true },
            residentId: { required: true },
            voipIncomingCallId: { required: true },
        },
    },
    [B2C_APP_MESSAGE_PUSH_TYPE]: {
        dv: { required: true },
        title: { required: false },
        body: { required: true },
        data: {
            B2CAppId: { required: true },
            B2CAppContext: { required: false },
            B2CAppName: { required: true },
            residentId: { required: true },
        },
    },
    [RECURRENT_PAYMENT_PROCEEDING_SUCCESS_RESULT_MESSAGE_TYPE]: {
        dv: { required: true },
        data: {
            recurrentPaymentContextId: { required: true },
            recurrentPaymentId: { required: true },
            serviceConsumerId: { required: true },
            residentId: { required: true },
            userId: { required: true },
            url: { required: true },
        },
    },
    [RECURRENT_PAYMENT_PROCEEDING_UNKNOWN_ERROR_MESSAGE_TYPE]: { ...recurrentPaymentProceedingFailedCommonMessageMeta },
    [RECURRENT_PAYMENT_PROCEEDING_ACQUIRING_PAYMENT_PROCEED_ERROR_MESSAGE_TYPE]: { ...recurrentPaymentProceedingFailedCommonMessageMeta },
    [RECURRENT_PAYMENT_PROCEEDING_SERVICE_CONSUMER_NOT_FOUND_ERROR_MESSAGE_TYPE]: { ...recurrentPaymentProceedingFailedCommonMessageMeta },
    [RECURRENT_PAYMENT_PROCEEDING_LIMIT_EXCEEDED_ERROR_MESSAGE_TYPE]: { ...recurrentPaymentProceedingFailedCommonMessageMeta },
    [RECURRENT_PAYMENT_PROCEEDING_CONTEXT_NOT_FOUND_ERROR_MESSAGE_TYPE]: { ...recurrentPaymentProceedingFailedCommonMessageMeta },
    [RECURRENT_PAYMENT_PROCEEDING_CONTEXT_DISABLED_ERROR_MESSAGE_TYPE]: { ...recurrentPaymentProceedingFailedCommonMessageMeta },
    [RECURRENT_PAYMENT_PROCEEDING_CARD_TOKEN_NOT_VALID_ERROR_MESSAGE_TYPE]: { ...recurrentPaymentProceedingFailedCommonMessageMeta },
    [RECURRENT_PAYMENT_PROCEEDING_CAN_NOT_REGISTER_MULTI_PAYMENT_ERROR_MESSAGE_TYPE]: { ...recurrentPaymentProceedingFailedCommonMessageMeta },
    [RECURRENT_PAYMENT_PROCEEDING_NO_RECEIPTS_TO_PROCEED_ERROR_MESSAGE_TYPE]: {
        dv: { required: true },
        data: {
            recurrentPaymentContextId: { required: true },
            serviceConsumerId: { required: true },
            residentId: { required: true },
            userId: { required: true },
            url: { required: true },
        },
    },
    [RECURRENT_PAYMENT_TOMORROW_PAYMENT_MESSAGE_TYPE]: {
        dv: { required: true },
        data: {
            recurrentPaymentContextId: { required: true },
            serviceConsumerId: { required: true },
            residentId: { required: true },
            userId: { required: true },
            url: { required: true },
        },
    },
    [RECURRENT_PAYMENT_TOMORROW_PAYMENT_NO_RECEIPTS_MESSAGE_TYPE]: {
        dv: { required: true },
        data: {
            recurrentPaymentContextId: { required: true },
            serviceConsumerId: { required: true },
            residentId: { required: true },
            userId: { required: true },
            url: { required: true },
        },
    },
    [RECURRENT_PAYMENT_TOMORROW_PAYMENT_LIMIT_EXCEED_MESSAGE_TYPE]: {
        dv: { required: true },
        data: {
            recurrentPaymentContextId: { required: true },
            serviceConsumerId: { required: true },
            residentId: { required: true },
            userId: { required: true },
            url: { required: true },
            toPayAmount: { required: true },
        },
    },
    [NEWS_ITEM_COMMON_MESSAGE_TYPE]: { ...newsItemMessageMeta },
    [NEWS_ITEM_EMERGENCY_MESSAGE_TYPE]: { ...newsItemMessageMeta },
    [DEV_PORTAL_MESSAGE_TYPE]: {
        dv: { required: true },
        body: { required: true },
        subject: { required: false },
    },
    [SEND_BILLING_RECEIPTS_ON_PAYDAY_REMINDER_MESSAGE_TYPE]: {
        dv: { required: true },
        data: {
            monthName:  { required: true },
            serviceConsumerId: { required: true },
            residentId: { required: true },
            userId: { required: true },
        },
    },
    [MARKETPLACE_INVOICE_PUBLISHED_MESSAGE_TYPE]: {
        dv: { required: true },
        data: {
            invoiceId: { required: true },
            residentId: { required: true },
            userId: { required: true },
            url: { required: true },
        },
    },
    [MARKETPLACE_INVOICE_WITH_TICKET_PUBLISHED_MESSAGE_TYPE]: {
        dv: { required: true },
        data: {
            invoiceId: { required: true },
            ticketId: { required: true },
            ticketNumber: { required: true },
            residentId: { required: true },
            userId: { required: true },
            url: { required: true },
        },
    },
    [MARKETPLACE_INVOICE_CASH_PUBLISHED_MESSAGE_TYPE]: {
        dv: { required: true },
        data: {
            invoiceId: { required: true },
            residentId: { required: true },
            userId: { required: true },
            url: { required: true },
        },
    },
    [MARKETPLACE_INVOICE_CASH_WITH_TICKET_PUBLISHED_MESSAGE_TYPE]: {
        dv: { required: true },
        data: {
            invoiceId: { required: true },
            ticketId: { required: true },
            ticketNumber: { required: true },
            residentId: { required: true },
            userId: { required: true },
            url: { required: true },
        },
    },
    [SERVICE_USER_CREATED_MESSAGE_TYPE]: {
        dv: { required: true },
        data: {
            serverUrl: { required: true },
            email: { required: true },
            password: { required: true },
        },
    },
    [SEND_DAILY_STATISTICS_MESSAGE_TYPE]: {
        dv: { required: true },
        attachingData: { required: false },
        data: {
            date: { required: true },
            tickets: { required: true },
            incidents: { required: true },
        },
    },
    [B2B_APP_MESSAGE_PUSH_TYPE]: {
        dv: { required: true },
        title: { required: true },
        body: { required: true },
    },
    [PASS_TICKET_CREATED_MESSAGE_TYPE]: {
        dv: { required: true },
        data: {
            userId: { required: true },
            organizationId: { required: true },
            organizationName: { required: true },
            b2bAppId: { required: true },
            passTicketId: { required: true },
            number: { required: true },
            propertyAddress: { required: true },
            unit: { required: true },
            client: { required: true },
            openAt: { required: true },
            url: { required: true },
            comment: { required: true },
            passTicketType: { required: true },
            guest: { required: true },
            guestName: { required: true },
            vehicle: { required: true },
            vehicleBrand: { required: true },
            stateVehicleNumber: { required: true },
        },
    },
    [PASS_TICKET_COMMENT_CREATED_MESSAGE_TYPE]: {
        dv: { required: true },
        data: {
            b2bAppId: { required: true },
            passTicketNumber: { required: true },
            userId: { required: true },
            senderName: { required: true },
            commentId: { required: true },
            organizationId: { required: true },
            passTicketId: { required: true },
            organizationName: { required: true },
            commentCreatedAt: { required: true },
            passTicketStatus: { required: true },
            passTicketAddress: { required: true },
            comment: { required: true },
            url: { required: true },
        },
    },
}

/** Used to validate type field for sendMessage mutation payload */
const MESSAGE_TYPES = Object.keys(MESSAGE_META)
const B2B_APP_MESSAGE_TYPES = [B2B_APP_MESSAGE_PUSH_TYPE, PASS_TICKET_CREATED_MESSAGE_TYPE, PASS_TICKET_COMMENT_CREATED_MESSAGE_TYPE]

const MESSAGE_DELIVERY_STRATEGY_AT_LEAST_ONE_TRANSPORT = 'atLeastOneTransport'
const MESSAGE_DELIVERY_STRATEGY_ALL_TRANSPORTS = 'allTransports'

const MESSAGE_DELIVERY_DEFAULT_PRIORITY = 'default'
const MESSAGE_DELIVERY_SLOW_PRIORITY = 'slow'
const MESSAGE_DELIVERY_FAST_PRIORITY = 'fast'
const MESSAGE_DELIVERY_PRIORITY_TO_TASK_QUEUE_MAP = {
    [MESSAGE_DELIVERY_FAST_PRIORITY]: 'high',
    [MESSAGE_DELIVERY_DEFAULT_PRIORITY]: 'medium',
    [MESSAGE_DELIVERY_SLOW_PRIORITY]: 'low',
}

/**
 * NOTE: Please never change these default options.
 * And if you still do, be careful and make sure your changes don't break MESSAGE_DELIVERY_OPTIONS,
 * because they inherit from here.
 */
const DEFAULT_MESSAGE_DELIVERY_OPTIONS = {
    priority: MESSAGE_DELIVERY_DEFAULT_PRIORITY,
    strategy: MESSAGE_DELIVERY_STRATEGY_AT_LEAST_ONE_TRANSPORT,
    allowedTransports: [PUSH_TRANSPORT, EMAIL_TRANSPORT],
    defaultTransports: [PUSH_TRANSPORT],
    isAllowedToChangeDefaultTransport: true,
    isVoIP: false,
    throttlePeriodForUser: null,
}

/**
 * If some message types have limited variety of transports, please set it here.
 * The rest of types must have templates for all transports or at least default template.
 *
 * Note: these options extend DEFAULT_MESSAGE_DELIVERY_OPTIONS within deliverMessage.js
 *
 * TODO: add MESSAGE_DELIVERY_OPTIONS structure and values validator
 */
const MESSAGE_DELIVERY_OPTIONS = {
    [TICKET_CREATED_TYPE]: {
        ...DEFAULT_MESSAGE_DELIVERY_OPTIONS,
        strategy: MESSAGE_DELIVERY_STRATEGY_ALL_TRANSPORTS,
        allowedTransports: [TELEGRAM_TRANSPORT],
        defaultTransports: [TELEGRAM_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
    },
    [TICKET_COMMENT_CREATED_TYPE]: {
        ...DEFAULT_MESSAGE_DELIVERY_OPTIONS,
        strategy: MESSAGE_DELIVERY_STRATEGY_ALL_TRANSPORTS,
        allowedTransports: [TELEGRAM_TRANSPORT],
        defaultTransports: [TELEGRAM_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
    },
    [DIRTY_INVITE_NEW_EMPLOYEE_SMS_MESSAGE_TYPE]: {
        allowedTransports: [SMS_TRANSPORT, EMAIL_TRANSPORT],
        defaultTransports: [SMS_TRANSPORT, EMAIL_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
    },
    [DIRTY_INVITE_NEW_EMPLOYEE_EMAIL_MESSAGE_TYPE]: {
        allowedTransports: [EMAIL_TRANSPORT, SMS_TRANSPORT],
        defaultTransports: [EMAIL_TRANSPORT, SMS_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
    },
    [INVITE_NEW_EMPLOYEE_MESSAGE_TYPE]: {
        allowedTransports: [EMAIL_TRANSPORT],
        defaultTransports: [EMAIL_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
    },
    [MESSAGE_FORWARDED_TO_SUPPORT_TYPE]: {
        // NOTE: It's important to get performance / bug report fast, when the server experiences a performance degradation
        priority: MESSAGE_DELIVERY_FAST_PRIORITY,
        allowedTransports: [EMAIL_TRANSPORT],
        defaultTransports: [EMAIL_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
    },
    [SHARE_TICKET_MESSAGE_TYPE]: {
        allowedTransports: [EMAIL_TRANSPORT],
        defaultTransports: [EMAIL_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
    },
    [CUSTOM_CONTENT_MESSAGE_PUSH_TYPE]: {
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
    },
    [MOBILE_APP_UPDATE_AVAILABLE_MESSAGE_PUSH_TYPE]: {
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
    },
    [CUSTOM_CONTENT_MESSAGE_EMAIL_TYPE]: {
        allowedTransports: [EMAIL_TRANSPORT],
        defaultTransports: [EMAIL_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
    },
    [CUSTOM_CONTENT_MESSAGE_SMS_TYPE]: {
        allowedTransports: [SMS_TRANSPORT],
        defaultTransports: [SMS_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
    },
    [TRACK_TICKET_IN_DOMA_APP_TYPE]: {
        allowedTransports: [SMS_TRANSPORT],
        defaultTransports: [SMS_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
    },
    [SMS_VERIFY_CODE_MESSAGE_TYPE]: {
        priority: MESSAGE_DELIVERY_FAST_PRIORITY,
        allowedTransports: [SMS_TRANSPORT],
        defaultTransports: [SMS_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
    },
    [EMAIL_VERIFY_CODE_MESSAGE_TYPE]: {
        priority: MESSAGE_DELIVERY_FAST_PRIORITY,
        allowedTransports: [EMAIL_TRANSPORT],
        defaultTransports: [EMAIL_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
    },
    [VERIFY_USER_EMAIL_MESSAGE_TYPE]: {
        priority: MESSAGE_DELIVERY_FAST_PRIORITY,
        allowedTransports: [EMAIL_TRANSPORT],
        defaultTransports: [EMAIL_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
    },
    [BANK_ACCOUNT_CREATION_REQUEST_TYPE]: {
        allowedTransports: [EMAIL_TRANSPORT],
        defaultTransports: [EMAIL_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
    },
    [VOIP_INCOMING_CALL_MESSAGE_TYPE]: {
        // NOTE: Any realtime calls must be prioritized
        priority: MESSAGE_DELIVERY_FAST_PRIORITY,
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
        isVoIP: true,
    },
    [CANCELED_CALL_MESSAGE_PUSH_TYPE]: {
        priority: MESSAGE_DELIVERY_FAST_PRIORITY,
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
        preferredPushType: PUSH_TYPE_SILENT_DATA,
    },
    [B2C_APP_MESSAGE_PUSH_TYPE]: {
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
    },
    [NEWS_ITEM_COMMON_MESSAGE_TYPE]: {
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
        throttlePeriodForUser: 3600,
    },
    [NEWS_ITEM_EMERGENCY_MESSAGE_TYPE]: {
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
    },
    [RECURRENT_PAYMENT_PROCEEDING_SUCCESS_RESULT_MESSAGE_TYPE]: {
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
    },
    [RECURRENT_PAYMENT_PROCEEDING_UNKNOWN_ERROR_MESSAGE_TYPE]: {
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
    },
    [RECURRENT_PAYMENT_PROCEEDING_ACQUIRING_PAYMENT_PROCEED_ERROR_MESSAGE_TYPE]: {
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
    },
    [RECURRENT_PAYMENT_PROCEEDING_SERVICE_CONSUMER_NOT_FOUND_ERROR_MESSAGE_TYPE]: {
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
    },
    [RECURRENT_PAYMENT_PROCEEDING_LIMIT_EXCEEDED_ERROR_MESSAGE_TYPE]: {
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
    },
    [RECURRENT_PAYMENT_PROCEEDING_CONTEXT_NOT_FOUND_ERROR_MESSAGE_TYPE]: {
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
    },
    [RECURRENT_PAYMENT_PROCEEDING_CONTEXT_DISABLED_ERROR_MESSAGE_TYPE]: {
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
    },
    [RECURRENT_PAYMENT_PROCEEDING_CARD_TOKEN_NOT_VALID_ERROR_MESSAGE_TYPE]: {
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
    },
    [RECURRENT_PAYMENT_PROCEEDING_CAN_NOT_REGISTER_MULTI_PAYMENT_ERROR_MESSAGE_TYPE]: {
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
    },
    [RECURRENT_PAYMENT_PROCEEDING_NO_RECEIPTS_TO_PROCEED_ERROR_MESSAGE_TYPE]: {
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
    },
    [RECURRENT_PAYMENT_TOMORROW_PAYMENT_MESSAGE_TYPE]: {
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
    },
    [RECURRENT_PAYMENT_TOMORROW_PAYMENT_NO_RECEIPTS_MESSAGE_TYPE]: {
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
    },
    [RECURRENT_PAYMENT_TOMORROW_PAYMENT_LIMIT_EXCEED_MESSAGE_TYPE]: {
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
    },
    [DEV_PORTAL_MESSAGE_TYPE]: {
        // NOTE: Email and phone codes from dev-portal are sent via this type
        priority: MESSAGE_DELIVERY_FAST_PRIORITY,
        allowedTransports: [SMS_TRANSPORT, EMAIL_TRANSPORT],
        defaultTransports: [SMS_TRANSPORT, EMAIL_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
    },
    [SEND_BILLING_RECEIPTS_ON_PAYDAY_REMINDER_MESSAGE_TYPE]: {
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
    },
    [MARKETPLACE_INVOICE_PUBLISHED_MESSAGE_TYPE]: {
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
    },
    [MARKETPLACE_INVOICE_WITH_TICKET_PUBLISHED_MESSAGE_TYPE]: {
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
        throttlePeriodForUser: 60,
    },
    [MARKETPLACE_INVOICE_CASH_PUBLISHED_MESSAGE_TYPE]: {
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
    },
    [MARKETPLACE_INVOICE_CASH_WITH_TICKET_PUBLISHED_MESSAGE_TYPE]: {
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
        throttlePeriodForUser: 60,
    },
    [BILLING_RECEIPT_FILE_ADDED_TYPE]: {
        allowedTransports: [EMAIL_TRANSPORT],
        defaultTransports: [EMAIL_TRANSPORT],
    },
    [SERVICE_USER_CREATED_MESSAGE_TYPE]: {
        priority: MESSAGE_DELIVERY_FAST_PRIORITY,
        allowedTransports: [EMAIL_TRANSPORT],
        defaultTransports: [EMAIL_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
    },
    [CUSTOM_CONTENT_MESSAGE_TYPE]: {
        // NOTE: Used for mass distribution by MessageBatch
        priority: MESSAGE_DELIVERY_SLOW_PRIORITY,
    },
    [SEND_DAILY_STATISTICS_MESSAGE_TYPE]: {
        allowedTransports: [EMAIL_TRANSPORT],
        defaultTransports: [EMAIL_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
    },
    [B2B_APP_MESSAGE_PUSH_TYPE]: {
        allowedTransports: [PUSH_TRANSPORT],
        defaultTransports: [PUSH_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
    },
    [PASS_TICKET_CREATED_MESSAGE_TYPE]: {
        allowedTransports: [TELEGRAM_TRANSPORT],
        defaultTransports: [TELEGRAM_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
    },
    [PASS_TICKET_COMMENT_CREATED_MESSAGE_TYPE]: {
        // TODO DOMA-12361 Add push transport
        allowedTransports: [TELEGRAM_TRANSPORT],
        defaultTransports: [TELEGRAM_TRANSPORT],
        isAllowedToChangeDefaultTransport: false,
    },
}


module.exports = {
    JSON_NO_REQUIRED_ATTR_ERROR,
    JSON_SUSPICIOUS_ATTR_NAME_ERROR,
    JSON_UNKNOWN_ATTR_NAME_ERROR,
    SMS_TRANSPORT,
    EMAIL_TRANSPORT,
    TELEGRAM_TRANSPORT,
    PUSH_TRANSPORT,
    MESSAGE_TRANSPORTS,
    TICKET_CREATED_TYPE,
    TICKET_COMMENT_CREATED_TYPE,
    SMS_VERIFY_CODE_MESSAGE_TYPE,
    EMAIL_VERIFY_CODE_MESSAGE_TYPE,
    INVITE_NEW_EMPLOYEE_MESSAGE_TYPE,
    DEVELOPER_IMPORTANT_NOTE_TYPE,
    MESSAGE_TYPES,
    MESSAGE_META,
    MESSAGE_SENDING_STATUS,
    MESSAGE_RESENDING_STATUS,
    MESSAGE_PROCESSING_STATUS,
    MESSAGE_ERROR_STATUS,
    MESSAGE_BLACKLISTED_STATUS,
    MESSAGE_SENT_STATUS,
    MESSAGE_DELIVERED_STATUS,
    MESSAGE_READ_STATUS,
    MESSAGE_CANCELED_STATUS,
    MESSAGE_DISABLED_BY_USER_STATUS,
    MESSAGE_THROTTLED_STATUS,
    DIRTY_INVITE_NEW_EMPLOYEE_SMS_MESSAGE_TYPE,
    DIRTY_INVITE_NEW_EMPLOYEE_EMAIL_MESSAGE_TYPE,
    MESSAGE_STATUSES,
    SHARE_TICKET_MESSAGE_TYPE,
    CUSTOMER_IMPORTANT_NOTE_TYPE,
    PUSH_TRANSPORT_TYPES,
    MESSAGE_FORWARDED_TO_SUPPORT_TYPE,
    TICKET_ASSIGNEE_CONNECTED_TYPE,
    TICKET_EXECUTOR_CONNECTED_TYPE,
    TRACK_TICKET_IN_DOMA_APP_TYPE,
    TICKET_STATUS_OPENED_TYPE,
    TICKET_STATUS_IN_PROGRESS_TYPE,
    TICKET_STATUS_COMPLETED_TYPE,
    TICKET_STATUS_RETURNED_TYPE,
    TICKET_STATUS_DECLINED_TYPE,
    TICKET_COMMENT_ADDED_TYPE,
    BANK_ACCOUNT_CREATION_REQUEST_TYPE,
    PUSH_TRANSPORT_FIREBASE,
    PUSH_TRANSPORT_APPLE,
    PUSH_TRANSPORT_HUAWEI,
    PUSH_FAKE_TOKEN_SUCCESS,
    PUSH_FAKE_TOKEN_FAIL,
    FIREBASE_CONFIG_ENV,
    FIREBASE_CONFIG_TEST_PUSHTOKEN_ENV,
    HCM_CONFIG_ENV,
    HCM_CONFIG_TEST_PUSHTOKEN_ENV_RESIDENT,
    HCM_CONFIG_TEST_PUSHTOKEN_ENV_MASTER,
    HUAWEI_SUPPORTED_APP_NAMES,
    APP_RESIDENT_ID_ANDROID,
    APP_RESIDENT_ID_IOS,
    APP_MASTER_ID_ANDROID,
    APP_MASTER_ID_IOS,
    HUAWEI_APP_TYPE_BY_APP_ID,
    APP_MASTER_KEY,
    APP_RESIDENT_KEY,
    DEFAULT_TEMPLATE_FILE_EXTENSION,
    DEFAULT_TEMPLATE_FILE_NAME,
    SMS_FORBIDDEN_SYMBOLS_REGEXP,
    METER_VERIFICATION_DATE_REMINDER_TYPE,
    METER_SUBMIT_READINGS_REMINDER_TYPE,
    METER_SUBMIT_READINGS_REMINDER_START_PERIOD_TYPE,
    METER_SUBMIT_READINGS_REMINDER_END_PERIOD_TYPE,
    METER_VERIFICATION_DATE_EXPIRED_TYPE,
    BILLING_RECEIPT_AVAILABLE_TYPE,
    BILLING_RECEIPT_AVAILABLE_NO_ACCOUNT_TYPE,
    RESIDENT_ADD_BILLING_ACCOUNT_TYPE,
    BILLING_RECEIPT_ADDED_TYPE,
    BILLING_RECEIPT_FILE_ADDED_TYPE,
    BILLING_RECEIPT_ADDED_WITH_DEBT_TYPE,
    BILLING_RECEIPT_ADDED_WITH_NO_DEBT_TYPE,
    BILLING_RECEIPT_CATEGORY_AVAILABLE_TYPE,
    DEVICE_PLATFORM_TYPES,
    DEVICE_PLATFORM_ANDROID,
    DEVICE_PLATFORM_IOS,
    DEVICE_PLATFORM_WEB,
    RESIDENT_UPGRADE_APP_TYPE,
    STAFF_UPGRADE_APP_TYPE,
    CUSTOM_CONTENT_MESSAGE_TYPE,
    CUSTOM_CONTENT_MESSAGE_PUSH_TYPE,
    CUSTOM_CONTENT_MESSAGE_EMAIL_TYPE,
    CUSTOM_CONTENT_MESSAGE_SMS_TYPE,
    MESSAGE_BATCH_STATUSES,
    MESSAGE_BATCH_CREATED_STATUS,
    MESSAGE_BATCH_PROCESSING_STATUS,
    MESSAGE_BATCH_FAILED_STATUS,
    MESSAGE_BATCH_DONE_STATUS,
    MESSAGE_BATCH_TYPE_OPTIONS,
    PUSH_TYPES,
    PUSH_TYPE_DEFAULT,
    PUSH_TYPE_SILENT_DATA,
    FAKE_SUCCESS_MESSAGE_PREFIX,
    DEFAULT_MESSAGE_DELIVERY_OPTIONS,
    MESSAGE_DELIVERY_OPTIONS,
    MESSAGE_DELIVERY_STRATEGY_AT_LEAST_ONE_TRANSPORT,
    MESSAGE_DELIVERY_STRATEGY_ALL_TRANSPORTS,
    MESSAGE_DELIVERY_DEFAULT_PRIORITY,
    MESSAGE_DELIVERY_SLOW_PRIORITY,
    MESSAGE_DELIVERY_FAST_PRIORITY,
    MESSAGE_DELIVERY_PRIORITY_TO_TASK_QUEUE_MAP,
    VOIP_INCOMING_CALL_MESSAGE_TYPE,
    CANCELED_CALL_MESSAGE_PUSH_TYPE,
    B2C_APP_MESSAGE_PUSH_TYPE,
    APPLE_CONFIG_ENV,
    APPLE_CONFIG_TEST_PUSHTOKEN_ENV,
    APPLE_CONFIG_TEST_VOIP_PUSHTOKEN_ENV,
    FAKE_ERROR_MESSAGE_PREFIX,
    RECURRENT_PAYMENT_PROCEEDING_SUCCESS_RESULT_MESSAGE_TYPE,
    RECURRENT_PAYMENT_PROCEEDING_UNKNOWN_ERROR_MESSAGE_TYPE,
    RECURRENT_PAYMENT_PROCEEDING_ACQUIRING_PAYMENT_PROCEED_ERROR_MESSAGE_TYPE,
    RECURRENT_PAYMENT_PROCEEDING_SERVICE_CONSUMER_NOT_FOUND_ERROR_MESSAGE_TYPE,
    RECURRENT_PAYMENT_PROCEEDING_LIMIT_EXCEEDED_ERROR_MESSAGE_TYPE,
    RECURRENT_PAYMENT_PROCEEDING_CONTEXT_NOT_FOUND_ERROR_MESSAGE_TYPE,
    RECURRENT_PAYMENT_PROCEEDING_CONTEXT_DISABLED_ERROR_MESSAGE_TYPE,
    RECURRENT_PAYMENT_PROCEEDING_CARD_TOKEN_NOT_VALID_ERROR_MESSAGE_TYPE,
    RECURRENT_PAYMENT_PROCEEDING_CAN_NOT_REGISTER_MULTI_PAYMENT_ERROR_MESSAGE_TYPE,
    RECURRENT_PAYMENT_PROCEEDING_NO_RECEIPTS_TO_PROCEED_ERROR_MESSAGE_TYPE,
    RECURRENT_PAYMENT_TOMORROW_PAYMENT_MESSAGE_TYPE,
    RECURRENT_PAYMENT_TOMORROW_PAYMENT_NO_RECEIPTS_MESSAGE_TYPE,
    RECURRENT_PAYMENT_TOMORROW_PAYMENT_LIMIT_EXCEED_MESSAGE_TYPE,
    NEWS_ITEM_COMMON_MESSAGE_TYPE,
    NEWS_ITEM_EMERGENCY_MESSAGE_TYPE,
    DEV_PORTAL_MESSAGE_TYPE,
    SEND_BILLING_RECEIPTS_ON_PAYDAY_REMINDER_MESSAGE_TYPE,
    MARKETPLACE_INVOICE_PUBLISHED_MESSAGE_TYPE,
    MARKETPLACE_INVOICE_WITH_TICKET_PUBLISHED_MESSAGE_TYPE,
    MARKETPLACE_INVOICE_CASH_WITH_TICKET_PUBLISHED_MESSAGE_TYPE,
    MARKETPLACE_INVOICE_CASH_PUBLISHED_MESSAGE_TYPE,
    SERVICE_USER_CREATED_MESSAGE_TYPE,
    MOBILE_APP_UPDATE_AVAILABLE_MESSAGE_PUSH_TYPE,
    BODY_IS_REQUIRED_FOR_CUSTOM_CONTENT_MESSAGE_TYPE,
    TITLE_IS_REQUIRED_FOR_CUSTOM_CONTENT_MESSAGE_TYPE,
    SEND_DAILY_STATISTICS_MESSAGE_TYPE,
    APPS_WITH_DISABLED_NOTIFICATIONS_ENV,
    DIRECTLY_AVAILABLE_TYPES,
    REDSTORE_CONFIG_ENV,
    REDSTORE_CONFIG_TEST_PUSHTOKEN_ENV,
    PUSH_TRANSPORT_REDSTORE,
    B2B_APP_MESSAGE_PUSH_TYPE,
    PASS_TICKET_CREATED_MESSAGE_TYPE,
    PASS_TICKET_COMMENT_CREATED_MESSAGE_TYPE,
    B2B_APP_MESSAGE_TYPES,
    VERIFY_USER_EMAIL_MESSAGE_TYPE,
}

