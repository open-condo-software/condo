/**
 * Generated by `createschema meter.MeterResource 'name:Text;'`
 * In most cases you should not change it by hands
 * Please, don't remove `AUTOGENERATE MARKER`s
 */
const { gql } = require('graphql-tag')

const { generateGqlQueries } = require('@open-condo/codegen/generate.gql')

const { ADDRESS_META_SUBFIELDS_QUERY_LIST } = require('@condo/domains/property/schema/fields/AddressMetaField')

const COMMON_FIELDS = 'id dv sender { dv fingerprint } v deletedAt newId createdBy { id name } updatedBy { id name } createdAt updatedAt'

const METER_RESOURCE_FIELDS = 'id name nameNonLocalized measure measureNonLocalized'
const METER_RESOURCE_FIELDS_ALL = `{ ${METER_RESOURCE_FIELDS} ${COMMON_FIELDS} }`
const MeterResource = generateGqlQueries('MeterResource', METER_RESOURCE_FIELDS_ALL)

const METER_READING_SOURCE_FIELDS = `{ type name nameNonLocalized ${COMMON_FIELDS} }`
const MeterReadingSource = generateGqlQueries('MeterReadingSource', METER_READING_SOURCE_FIELDS)

const METER_FIELDS = `id number numberOfTariffs installationDate commissioningDate verificationDate nextVerificationDate controlReadingsDate sealingDate archiveDate accountNumber organization { id } property { id address addressKey addressMeta { ${ADDRESS_META_SUBFIELDS_QUERY_LIST} } } unitName unitType place resource { ${METER_RESOURCE_FIELDS} } isAutomatic b2bApp { id name } b2cApp { id name }`
const METER_FIELDS_ALL = `{ ${METER_FIELDS} ${COMMON_FIELDS} }`
const Meter = generateGqlQueries('Meter', METER_FIELDS_ALL)

const MeterForOrganization = generateGqlQueries('Meter', `{ ${METER_FIELDS} }`)

const METER_READING_FIELDS = `{ value1 value2 value3 value4 date meter ${METER_FIELDS_ALL} organization { id name } client { id } clientName clientEmail clientPhone contact { id name } source { id name type } billingStatus billingStatusText accountNumber ${COMMON_FIELDS} }`
const MeterReading = generateGqlQueries('MeterReading', METER_READING_FIELDS)

const MeterReadingForOrganization = generateGqlQueries('MeterReading', `{
        id value1 value2 value3 value4 date clientName clientEmail clientPhone accountNumber
        meter { id number numberOfTariffs installationDate commissioningDate verificationDate nextVerificationDate controlReadingsDate sealingDate archiveDate accountNumber organization { id } property { id addressKey addressMeta { ${ADDRESS_META_SUBFIELDS_QUERY_LIST} } } unitName unitType place resource { ${METER_RESOURCE_FIELDS} } isAutomatic b2bApp { id name } b2cApp { id name } }
        organization { id name }
        client { id }
        contact { id name }
        source { id name type } 
    }`
)

const METER_READING_FILTERS_FIELDS = '{ organization address accountNumber place number unitName resource clientName createdAt date verificationDate installationDate commissioningDate sealingDate controlReadingsDate }'
const METER_READING_FILTER_TEMPLATE_FIELDS = `{ name employee { id } fields ${METER_READING_FILTERS_FIELDS} ${COMMON_FIELDS} }`
const MeterReadingFilterTemplate = generateGqlQueries('MeterReadingFilterTemplate', METER_READING_FILTER_TEMPLATE_FIELDS)

const PROPERTY_METER_FIELDS = `{ number numberOfTariffs installationDate commissioningDate verificationDate nextVerificationDate controlReadingsDate sealingDate archiveDate isAutomatic organization { id name } property { id address addressMeta { ${ADDRESS_META_SUBFIELDS_QUERY_LIST} } } resource { ${METER_RESOURCE_FIELDS} } b2bApp { id } meta ${COMMON_FIELDS} }`
const PropertyMeter = generateGqlQueries('PropertyMeter', PROPERTY_METER_FIELDS)

const PROPERTY_METER_READING_FIELDS = `{ organization { id name } date meter ${PROPERTY_METER_FIELDS} value1 value2 value3 value4 source { id name type } ${COMMON_FIELDS} }`
const PropertyMeterReading = generateGqlQueries('PropertyMeterReading', PROPERTY_METER_READING_FIELDS)

const METER_REPORTING_PERIOD_FIELDS = `{ organization { id } property { id address addressMeta { ${ADDRESS_META_SUBFIELDS_QUERY_LIST} } } notifyStartDay notifyEndDay restrictionEndDay ${COMMON_FIELDS} }`
const MeterReportingPeriod = generateGqlQueries('MeterReportingPeriod', METER_REPORTING_PERIOD_FIELDS)

const DELETE_METER_AND_METER_READINGS_MUTATION = gql`
    mutation _internalDeleteMeterAndMeterReadings ($data: _internalDeleteMeterAndMeterReadingsInput!) {
        result: _internalDeleteMeterAndMeterReadings(data: $data) { status metersToDelete deletedMeters }
    }
`

const METER_RESOURCE_OWNER_FIELDS = `{ organization { id } resource { id } address addressKey ${COMMON_FIELDS} }`
const MeterResourceOwner = generateGqlQueries('MeterResourceOwner', METER_RESOURCE_OWNER_FIELDS)

const INTERNAL_DELETE_METER_READINGS_MUTATION = gql`
    mutation _internalDeleteMeterReadings ($data: _internalDeleteMeterReadingsInput!) {
        result: _internalDeleteMeterReadings(data: $data) { status toDelete deleted }
    }
`

const EXPORT_PROPERTY_METER_READINGS_QUERY = gql`
    query exportPropertyMeterReadings ($data: ExportPropertyMeterReadingsInput!) {
        result: exportPropertyMeterReadings (data: $data) { status, linkToFile }
    }
`

const REGISTER_METERS_READINGS_MUTATION = gql`
    mutation registerMetersReadings ($data: RegisterMetersReadingsInput!) {
        result: registerMetersReadings(data: $data) { id meter { id property { id address addressKey } unitType unitName accountNumber number } }
    }
`

const REGISTER_PROPERTY_METERS_READINGS_MUTATION = gql`
    mutation registerPropertyMetersReadings ($data: RegisterPropertyMetersReadingsInput!) {
        result: registerPropertyMetersReadings(data: $data) { id meter { id property { id address addressKey } number } }
    }
`

const METER_READINGS_IMPORT_TASK_FIELDS = `{ status format processedRecordsCount importedRecordsCount totalRecordsCount file { id filename originalFilename publicUrl mimetype } errorFile { id filename originalFilename publicUrl mimetype } errorMessage user { id } organization { id } locale meta ${COMMON_FIELDS} }`
const MeterReadingsImportTask = generateGqlQueries('MeterReadingsImportTask', METER_READINGS_IMPORT_TASK_FIELDS)

const METER_READING_EXPORT_TASK_FIELDS = `{ status format exportedRecordsCount totalRecordsCount file { id originalFilename publicUrl mimetype } meta where sortBy locale timeZone user { id } ${COMMON_FIELDS} }`
const MeterReadingExportTask = generateGqlQueries('MeterReadingExportTask', METER_READING_EXPORT_TASK_FIELDS)

const METER_USER_SETTING_FIELDS = `{ user { id } meter { id } name ${COMMON_FIELDS} }`
const MeterUserSetting = generateGqlQueries('MeterUserSetting', METER_USER_SETTING_FIELDS)

/* AUTOGENERATE MARKER <CONST> */

module.exports = {
    MeterResource,
    MeterReadingSource,
    Meter,
    MeterForOrganization,
    MeterReading,
    MeterReadingForOrganization,
    MeterReadingFilterTemplate,
    PropertyMeter,
    PropertyMeterReading,
    MeterReportingPeriod,
    DELETE_METER_AND_METER_READINGS_MUTATION,
    MeterResourceOwner,
    INTERNAL_DELETE_METER_READINGS_MUTATION,
    EXPORT_PROPERTY_METER_READINGS_QUERY,
    REGISTER_METERS_READINGS_MUTATION,
    REGISTER_PROPERTY_METERS_READINGS_MUTATION,
    MeterReadingsImportTask,
    MeterReadingExportTask,
    MeterUserSetting,
/* AUTOGENERATE MARKER <EXPORTS> */
}

