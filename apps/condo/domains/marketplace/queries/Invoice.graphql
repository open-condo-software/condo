query getTicketInvoices ($ticketId: ID!) {
    invoices: allInvoices (
        where: {
            ticket: { id: $ticketId }
        },
        sortBy: [createdAt_DESC]
    ) {
        id
        status
        number
        paymentType
        status
        currencyCode
        rows {
            name
            toPay
            isMin
            count
            sku
        }
        organization {
            id
        }
        createdBy {
            id
            name
            type
        }
        ticket {
            id
        }
    }
}

query getPublishTicketInvoices ($ticketId: ID!, $first: Int) {
    publishInvoices: allInvoices (
        where: {
            ticket: { id: $ticketId },
            status: published,
        },
        first: $first,
    ) {
        id
    }
}

query getTicketInvoicesCount ($ticketId: ID!, $first: Int) {
    invoiceCount: _allInvoicesMeta (
        where: {
            ticket: {
                id: $ticketId
            }
        },
        first: $first,
    ) {
        count
    }
}

query getInvoicesByIds ($ids: [ID!]!) {
    invoices: allInvoices (
        where: { id_in: $ids },
        sortBy: [createdAt_DESC]
    ) {
        id
        status
        number
        paymentType
        status
        currencyCode
        rows {
            name
            toPay
            isMin
            count
            sku
        }
        organization {
            id
        }
        createdBy {
            id
            name
            type
        }
        ticket {
            id
        }
    }
}

mutation createInvoice ($data: InvoiceCreateInput!) {
    invoice: createInvoice (data: $data) {
        id
    }
}