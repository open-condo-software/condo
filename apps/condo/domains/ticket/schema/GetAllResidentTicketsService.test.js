/**
 * Generated by `createservice ticket.GetAllResidentTicketsService --type queries`
 */

const { makeLoggedInClient } = require('@condo/domains/user/utils/testSchema')
const { makeLoggedInAdminClient, makeClient } = require('@core/keystone/test.utils')
const { getAllResidentTicketsByTestClient } = require('@condo/domains/ticket/utils/testSchema')
 
describe('GetAllResidentTicketsService', () => {
    test('user: get resident ticket', async () => {
        const client = await makeLoggedInClient()
        const [data] = await getAllResidentTicketsByTestClient(client, {}, 0, 100)
        expect(data.length).toBeGreaterThan(0)
    })
 
    test('anonymous: didn\'t get resident ticket', async () => {
        const client = await makeClient()

        try {
            await getAllResidentTicketsByTestClient(client, {}, 0, 100)
        } catch (error) {
            expect(error.errors).toHaveLength(1)
            expect(error.errors[0].name).toEqual('AuthenticationError')
        }
    })
 
    test('admin: get resident tickets', async () => {
        const admin = await makeLoggedInAdminClient()
        const [data] = await getAllResidentTicketsByTestClient(admin, {}, 0, 100)
        expect(data.length).toBeGreaterThan(0)
    })
})