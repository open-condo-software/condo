// auto generated by kmigrator
// KMIGRATOR:0013_auto_20260209_0700:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDUuMCBvbiAyMDI2LTAyLTA5IDA3OjAwCgpmcm9tIGRqYW5nby5kYiBpbXBvcnQgbWlncmF0aW9ucwoKCmNsYXNzIE1pZ3JhdGlvbihtaWdyYXRpb25zLk1pZ3JhdGlvbik6CgogICAgZGVwZW5kZW5jaWVzID0gWwogICAgICAgICgnX2RqYW5nb19zY2hlbWEnLCAnMDAxMl9iMmJhcHBwdWJsaXNocmVxdWVzdGhpc3RvcnlyZWNvcmRfYW5kX21vcmUnKSwKICAgIF0KCiAgICBvcGVyYXRpb25zID0gWwogICAgXQo=
// KMIGRATOR_VIEWS:0013_auto_20260209_0700:eyJkdiI6MSwibGlzdHMiOnsiVXNlciI6eyJmaWVsZHMiOlsiY3JlYXRlZEF0IiwiY3JlYXRlZEJ5IiwiZGVsZXRlZEF0IiwiZHYiLCJlbWFpbCIsImlkIiwiaXNBZG1pbiIsImlzU3VwcG9ydCIsIm5hbWUiLCJuZXdJZCIsInBhc3N3b3JkIiwicGhvbmUiLCJzZW5kZXIiLCJ1cGRhdGVkQXQiLCJ1cGRhdGVkQnkiLCJ2Il0sInNlbnNpdGl2ZUZpZWxkcyI6WyJlbWFpbCIsIm5hbWUiLCJwYXNzd29yZCIsInBob25lIl19LCJCMkJBcHAiOnsiZmllbGRzIjpbImNhdGVnb3J5IiwiY3JlYXRlZEF0IiwiY3JlYXRlZEJ5IiwiZGVsZXRlZEF0IiwiZGV0YWlsZWREZXNjcmlwdGlvbiIsImRldmVsb3BlciIsImRldmVsb3BlclVybCIsImRldmVsb3BtZW50QXBwVXJsIiwiZGV2ZWxvcG1lbnRFeHBvcnRJZCIsImR2IiwiaWQiLCJsb2dvIiwibmFtZSIsIm5ld0lkIiwicHJvZHVjdGlvbkFwcFVybCIsInByb2R1Y3Rpb25FeHBvcnRJZCIsInNlbmRlciIsInNob3J0RGVzY3JpcHRpb24iLCJ1cGRhdGVkQXQiLCJ1cGRhdGVkQnkiLCJ2Il0sInNlbnNpdGl2ZUZpZWxkcyI6W119LCJCMkJBcHBQdWJsaXNoUmVxdWVzdCI6eyJmaWVsZHMiOlsiYXBwIiwiY3JlYXRlZEF0IiwiY3JlYXRlZEJ5IiwiZGVsZXRlZEF0IiwiZHYiLCJpZCIsImlzQXBwVGVzdGVkIiwiaXNDb250cmFjdFNpZ25lZCIsImlzSW5mb0FwcHJvdmVkIiwibmV3SWQiLCJzZW5kZXIiLCJzdGF0dXMiLCJ1cGRhdGVkQXQiLCJ1cGRhdGVkQnkiLCJ2Il0sInNlbnNpdGl2ZUZpZWxkcyI6W119LCJCMkNBcHAiOnsiZmllbGRzIjpbImNyZWF0ZWRBdCIsImNyZWF0ZWRCeSIsImRlbGV0ZWRBdCIsImRldmVsb3BlciIsImRldmVsb3BtZW50RXhwb3J0SWQiLCJkdiIsImlkIiwibG9nbyIsIm5hbWUiLCJuZXdJZCIsInByb2R1Y3Rpb25FeHBvcnRJZCIsInNlbmRlciIsInVwZGF0ZWRBdCIsInVwZGF0ZWRCeSIsInYiXSwic2Vuc2l0aXZlRmllbGRzIjpbXX0sIkIyQ0FwcEFjY2Vzc1JpZ2h0Ijp7ImZpZWxkcyI6WyJhcHAiLCJjb25kb1VzZXJJZCIsImNyZWF0ZWRBdCIsImNyZWF0ZWRCeSIsImRlbGV0ZWRBdCIsImRldmVsb3BtZW50RXhwb3J0SWQiLCJkdiIsImVudmlyb25tZW50IiwiaWQiLCJuZXdJZCIsInByb2R1Y3Rpb25FeHBvcnRJZCIsInNlbmRlciIsInVwZGF0ZWRBdCIsInVwZGF0ZWRCeSIsInYiXSwic2Vuc2l0aXZlRmllbGRzIjpbXX0sIkIyQ0FwcEJ1aWxkIjp7ImZpZWxkcyI6WyJhcHAiLCJjcmVhdGVkQXQiLCJjcmVhdGVkQnkiLCJkYXRhIiwiZGVsZXRlZEF0IiwiZGV2ZWxvcG1lbnRFeHBvcnRJZCIsImR2IiwiaWQiLCJuZXdJZCIsInByb2R1Y3Rpb25FeHBvcnRJZCIsInNlbmRlciIsInVwZGF0ZWRBdCIsInVwZGF0ZWRCeSIsInYiLCJ2ZXJzaW9uIl0sInNlbnNpdGl2ZUZpZWxkcyI6W119LCJCMkNBcHBQdWJsaXNoUmVxdWVzdCI6eyJmaWVsZHMiOlsiYXBwIiwiY3JlYXRlZEF0IiwiY3JlYXRlZEJ5IiwiZGVsZXRlZEF0IiwiZHYiLCJpZCIsImlzQXBwVGVzdGVkIiwiaXNDb250cmFjdFNpZ25lZCIsImlzSW5mb0FwcHJvdmVkIiwibmV3SWQiLCJzZW5kZXIiLCJzdGF0dXMiLCJ1cGRhdGVkQXQiLCJ1cGRhdGVkQnkiLCJ2Il0sInNlbnNpdGl2ZUZpZWxkcyI6W119fX0=

exports.up = async (knex) => {
    await knex.raw(`
    
--
-- Create analytics schema
--
CREATE SCHEMA IF NOT EXISTS "analytics";
--
-- Create view for "User" table
--
CREATE OR REPLACE VIEW "analytics"."User" AS (SELECT NULL AS "email", NULL AS "name", NULL AS "password", NULL AS "phone", "createdAt", "createdBy", "deletedAt", "dv", "id", "isAdmin", "isSupport", "newId", "sender", "updatedAt", "updatedBy", "v" FROM "public"."User");
--
-- Create view for "B2BApp" table
--
CREATE OR REPLACE VIEW "analytics"."B2BApp" AS (SELECT "category", "createdAt", "createdBy", "deletedAt", "detailedDescription", "developer", "developerUrl", "developmentAppUrl", "developmentExportId", "dv", "id", "logo", "name", "newId", "productionAppUrl", "productionExportId", "sender", "shortDescription", "updatedAt", "updatedBy", "v" FROM "public"."B2BApp");
--
-- Create view for "B2BAppPublishRequest" table
--
CREATE OR REPLACE VIEW "analytics"."B2BAppPublishRequest" AS (SELECT "app", "createdAt", "createdBy", "deletedAt", "dv", "id", "isAppTested", "isContractSigned", "isInfoApproved", "newId", "sender", "status", "updatedAt", "updatedBy", "v" FROM "public"."B2BAppPublishRequest");
--
-- Create view for "B2CApp" table
--
CREATE OR REPLACE VIEW "analytics"."B2CApp" AS (SELECT "createdAt", "createdBy", "deletedAt", "developer", "developmentExportId", "dv", "id", "logo", "name", "newId", "productionExportId", "sender", "updatedAt", "updatedBy", "v" FROM "public"."B2CApp");
--
-- Create view for "B2CAppAccessRight" table
--
CREATE OR REPLACE VIEW "analytics"."B2CAppAccessRight" AS (SELECT "app", "condoUserId", "createdAt", "createdBy", "deletedAt", "developmentExportId", "dv", "environment", "id", "newId", "productionExportId", "sender", "updatedAt", "updatedBy", "v" FROM "public"."B2CAppAccessRight");
--
-- Create view for "B2CAppBuild" table
--
CREATE OR REPLACE VIEW "analytics"."B2CAppBuild" AS (SELECT "app", "createdAt", "createdBy", "data", "deletedAt", "developmentExportId", "dv", "id", "newId", "productionExportId", "sender", "updatedAt", "updatedBy", "v", "version" FROM "public"."B2CAppBuild");
--
-- Create view for "B2CAppPublishRequest" table
--
CREATE OR REPLACE VIEW "analytics"."B2CAppPublishRequest" AS (SELECT "app", "createdAt", "createdBy", "deletedAt", "dv", "id", "isAppTested", "isContractSigned", "isInfoApproved", "newId", "sender", "status", "updatedAt", "updatedBy", "v" FROM "public"."B2CAppPublishRequest");

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    
--
-- Remove view for "User" table
--
DROP VIEW IF EXISTS "analytics"."User";
--
-- Remove view for "B2BApp" table
--
DROP VIEW IF EXISTS "analytics"."B2BApp";
--
-- Remove view for "B2BAppPublishRequest" table
--
DROP VIEW IF EXISTS "analytics"."B2BAppPublishRequest";
--
-- Remove view for "B2CApp" table
--
DROP VIEW IF EXISTS "analytics"."B2CApp";
--
-- Remove view for "B2CAppAccessRight" table
--
DROP VIEW IF EXISTS "analytics"."B2CAppAccessRight";
--
-- Remove view for "B2CAppBuild" table
--
DROP VIEW IF EXISTS "analytics"."B2CAppBuild";
--
-- Remove view for "B2CAppPublishRequest" table
--
DROP VIEW IF EXISTS "analytics"."B2CAppPublishRequest";
--
-- Drop analytics schema
--
DROP SCHEMA IF EXISTS "analytics";

    `)
}
