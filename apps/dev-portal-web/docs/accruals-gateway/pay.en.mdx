`POST /api/pay`

Registers a payment for an accrual.

## üîêAuthentication

[View authentication documentation ‚Üí](/docs/accruals-gateway/auth)

## Body parameters

| Parameter  | Type/Format                     | Required | Description                        | Example                                |
|------------|---------------------------------|----------|------------------------------------|----------------------------------------|
| id         | string\<uuid\>                  | ‚úÖ        | Accrual identifier                 | `a1b2c3d4-e5f6-7890-g1h2-i3j4k5l6m7n8` |
| txnId      | string\<1 to 100 characters\>   | ‚úÖ        | Client-side transaction identifier | `1`                                    |
| txnDate    | string\<ISO 8601\>              | ‚úÖ        | Client-side transaction date       | `2024-01-01T12:00:00Z`                 |
| amount     | string\<^\d{1,9}(\.\d{1,2})?$\> | ‚úÖ        | Payment amount                     | `1500.75`                              |
| receiptUrl | string\<URL\>                   | ‚ùå        | Link to receipt                    | `https://example.com/receipt.pdf`      |

## Request example

```bash
curl -X POST "https://accruals-gateway.doma.ai/api/pay" \
  -H "Content-Type: application/json" \
  -H "Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=" \
  -d '{
    "uid": "b6118eed-9ff2-4632-a663-7e6eb4e8b5d6",
    "id": "a1b2c3d4-e5f6-7890-g1h2-i3j4k5l6m7n8",
    "txnId": "1234567891111",
    "txnDate": "2024-01-01T12:00:00Z",
    "amount": "1500.75",
    "receiptUrl": "https://example.com/receipt.pdf"
  }'
```

## –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞
```json
{
  "uid": "b6118eed-9ff2-4632-a663-7e6eb4e8b5d6",
  "id": "a1b2c3d4-e5f6-7890-g1h2-i3j4k5l6m7n8",
  "txnId": "1234567891111",
  "txnDate": "2024-01-01T12:00:00Z",
  "amount": "1500.75",
  "receiptUrl": "https://example.com/receipt.pdf"
}
```

## –û—Ç–≤–µ—Ç

| Parameter | Type/Format	                   | Required | Description                                     | Example                    |
|-----------|--------------------------------|----------|-------------------------------------------------|----------------------------|
| txnId     | string\<–æ—Ç 1 –¥–æ 100 —Å–∏–º–≤–æ–ª–æ–≤\> | ‚úÖ        | Transaction identifier (as provided in request) | `1234567891111`            |
| txnDate   | string\<datetime\>             | ‚úÖ        | 	Transaction date in ISO 8601 format            | `2025-12-04T22:25:01.243Z` |
| regDate   | string\<datetime\>             | ‚úÖ        | Payment registration date in system (ISO 8601)  | `2025-12-09T12:59:34.887Z` |

## –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞

```json
{
  "data": {
    "txnId": "1234567891111",
    "txnDate": "2025-12-04T22:25:01.243Z",
    "regDate": "2025-12-09T12:59:34.887Z"
  }
}
```

## –ö–æ–¥—ã –æ—à–∏–±–æ–∫

| Error Code              | HTTP Status | Message                 | Cause                               | Solution                           |
|-------------------------|-------------|-------------------------|-------------------------------------|------------------------------------|
| `VALIDATION_FAILED`     | 400         | Invalid format of input | Parameter validation error          | 	Check parameter formats           |
| `RECEIPT_NOT_FOUND`     | 404         | Receipt is not found    | Accrual with specified id not found | 	Verify the accrual id             |
| `INTERNAL_SERVER_ERROR` | 500         | Internal server error   | 	Internal server error              | Try again later or contact support |

<Alert type={'warning'}>
Important! An agent can register only one payment with the same txnId.
Submitting another payment with the same txnId will result in an INTERNAL_SERVER_ERROR.
</Alert>