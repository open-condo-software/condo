## Basic Authentication
Все запросы к API требуют Basic Authentication и должны выполняться **только с IP-адресов, зарегистрированных в агенте**.


<Alert type={'warning'}>
- Ваши IP-адреса зарегистрированы в системе
- У вас есть корректные учетные данные `username` и `password`
- Вы знаете ваш уникальный `uid`
</Alert>

## Обязательные требования

### 1. IP-адреса
Запросы должны поступать только с предварительно зарегистрированных IP-адресов. В противном случае доступ будет заблокирован.

### 2. Basic Authentication
Необходимо передавать учетные данные клиента в заголовке `Authorization`:
```
Authorization: Basic <base64_encoded_credentials>
```

### Пример
```bash
curl -X GET "https://accruals-gateway.doma.ai/api/search?uid=b6118eed-9ff2-4632-a663-7e6eb4e8b5d6&search=Utilities" \
  -H "Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ="
```

### 3. Идентификатор пользователя (uid)
В каждом запросе необходимо передавать уникальный идентификатор пользователя одним из способов:

#### Для GET-запросов (query-параметры):
```
GET /api/search?uid=b6118eed-9ff2-4632-a663-7e6eb4e8b5d6&search=Utilities
```

#### Для POST-запросов (body-параметры):
```json
{
  "uid": "b6118eed-9ff2-4632-a663-7e6eb4e8b5d6",
  "id": "a1b2c3d4-e5f6-7890-g1h2-i3j4k5l6m7n8",
  "txnId": "12345",
  "txnDate": "2024-01-01T12:00:00Z",
  "amount": "1500.75"
}
```
## Ошибки авторизации

| Код ошибки             | 	HTTP статус | 	Сообщение               | 	Причина                                                               |
|------------------------|--------------|--------------------------|------------------------------------------------------------------------|
| AGENT_NOT_FOUND        | 404          | Agent is not found       | Переданный `uid` не соответствует ни одному зарегистрированному агенту |
| AGENT_DISABLED         | 403          | Agent is disabled        | Агент существует, но отключен в системе                                |
| IP_NOT_ALLOWED         | 403          | IP address not allowed   | 	Запрос выполнен с незарегистрированного IP-адреса                     |
| INVALID_HEADERS        | 403          | Invalid headers provided | Присутствуют некоректные загловки                                      |
| AUTHORIZATION_REQUIRED | 403          | Authorization required   | Отсутствует заголовок `Authorization` или неверные учетные данные      |