@import "antd/lib/button/style/index.less";
@import (reference) "@open-condo/ui/src/tokens/variables.less";
@import (reference) "@open-condo/ui/src/components/style/mixins/typography";
@import (reference) "@open-condo/ui/src/components/style/mixins/button";

@condo-button-padding-vert-l: @condo-global-spacing-12;
@condo-button-padding-hor-l: @condo-global-spacing-20;
@condo-button-padding-vert-m: @condo-global-spacing-4 + 1px;
@condo-button-padding-hor-m: @condo-global-spacing-12;

@condo-button-padding-vert-compact: @condo-global-spacing-4;
@condo-button-padding-hor-compact: @condo-global-spacing-4;

@condo-button-border-width: @condo-global-border-width-default;
@condo-button-line-height-l: @condo-global-typography-h4-line-height;
@condo-button-line-height-m: @condo-global-typography-h5-line-height;

@condo-button-focus-outline-width: @condo-global-border-width-default * 4;
@condo-button-border-radius: @condo-global-border-radius-medium;
@condo-button-gap-m: @condo-global-spacing-4;
@condo-button-gap-l: @condo-global-spacing-8;

.condo-btn {
  .condo-typography-h4();

  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  text-shadow: none;
  border-radius: @condo-button-border-radius;
  box-shadow: none;
  transition: none;

  span {
    position: relative;
    z-index: 1;
  }

  &-M {
    min-width: @condo-global-spacing-32;
    .condo-typography-h5();

    span + span {
      margin-left: @condo-button-gap-m;
    }
  }

  &-L {
    min-width: @condo-global-spacing-48;
    .condo-typography-h4();

    span + span {
      margin-left: @condo-button-gap-l;
    }
  }

  &-M.condo-btn-primary {
    .condo-btn(@condo-button-line-height-m, @condo-button-padding-vert-m, @condo-button-padding-hor-m, 0);
  }

  &-M.condo-btn-secondary,
  &-M.condo-btn-accent {
    .condo-btn(@condo-button-line-height-m, @condo-button-padding-vert-m,
    @condo-button-padding-hor-m, @condo-button-border-width);
  }

  &-L.condo-btn-primary {
    .condo-btn(@condo-button-line-height-l, @condo-button-padding-vert-l, @condo-button-padding-hor-l, 0);
  }

  &-L.condo-btn-secondary,
  &-L.condo-btn-accent {
    .condo-btn(@condo-button-line-height-l, @condo-button-padding-vert-l,
    @condo-button-padding-hor-l, @condo-button-border-width);
  }

  &-M.condo-btn-compact.condo-btn-primary {
    min-width: 0;
    .condo-btn(@condo-button-line-height-m, @condo-button-padding-vert-compact, @condo-button-padding-hor-compact, 0);
  }

  &-M.condo-btn-compact.condo-btn-secondary,
  &-M.condo-btn-compact.condo-btn-accent {
    min-width: 0;
    .condo-btn(@condo-button-line-height-m, @condo-button-padding-vert-compact,
    @condo-button-padding-hor-compact, @condo-button-border-width);
  }

  &-L.condo-btn-compact.condo-btn-primary {
    min-width: 0;
    .condo-btn(@condo-button-line-height-l, @condo-button-padding-vert-compact, @condo-button-padding-hor-compact, 0);
  }

  &-L.condo-btn-compact.condo-btn-secondary,
  &-L.condo-btn-compact.condo-btn-accent {
    min-width: 0;
    .condo-btn(@condo-button-line-height-l, @condo-button-padding-vert-compact,
    @condo-button-padding-hor-compact, @condo-button-border-width);
  }

  &-minimal.condo-btn-primary,
  &-minimal.condo-btn-secondary,
  &-minimal.condo-btn-accent,
  &-minimal.condo-btn-primary.condo-btn-dangerous,
  &-minimal.condo-btn-secondary.condo-btn-dangerous,
  &-minimal.condo-btn-accent.condo-btn-dangerous {
    text-shadow: none;
    background: none;
    border-color: transparent;
    box-shadow: none;

    &::before {
      display: none;
    }

    &:hover {
      text-shadow: none;
      background: none;
      border-color: transparent;
      box-shadow: none;

      .condo-btn-static-text-color(@condo-global-color-green-5);
      .condo-btn-content-color(@condo-global-color-green-5);

      &::before {
        display: none;
      }
    }

    &:active {
      .condo-btn-static-text-color(@condo-global-color-green-7);
      .condo-btn-content-color(@condo-global-color-green-7);
    }
  }

  &-minimal.condo-btn-compact {
    padding: 0;
  }

  // After layer is used to show gradient outline on tab-focusing
  &:focus-visible::after,
  &-focus::after {
    box-sizing: border-box;
    background: @condo-global-color-brand-gradient-5 border-box;
    border: @condo-button-focus-outline-width solid transparent;
    opacity: 1;
    mask: linear-gradient(#111 0 0) padding-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
  }

  &-primary:focus::after,
  &-primary.condo-btn-focus::after {
    .condo-btn-layer(-@condo-button-focus-outline-width);

    border-radius: @condo-button-border-radius + @condo-button-focus-outline-width;
  }

  &-secondary:focus::after,
  &-secondary.condo-btn-focus::after {
    .condo-btn-layer(-(@condo-button-focus-outline-width + @condo-button-border-width));

    border-radius: @condo-button-border-radius + @condo-button-focus-outline-width;
  }

  &-primary {
    color: @condo-global-color-white;
    background: @condo-global-color-black;
    transition-property: background-color;

    & > .condo-btn-text {
      color: @condo-global-color-white;
      background: transparent;
    }

    &::before {
      .condo-btn-layer(0);

      background: @condo-global-color-brand-gradient-5;
      opacity: 0;
      transition: opacity @condo-global-transition-duration-default ease-in-out;
    }

    &:focus,
    &-focus {
      background: @condo-global-color-black;
    }

    &:hover {
      background: @condo-global-color-black;

      &::before {
        opacity: 1;
      }
    }

    &:active {
      background: @condo-global-color-black;

      &::before {
        opacity: 0.9;
      }
    }

    &.condo-btn-minimal {
      .condo-btn-content-color(@condo-global-color-black);
    }

    &.condo-btn-stateless {
      &:focus,
      &:hover,
      &:active,
      &-focus {
        background: @condo-global-color-black;

        &::before {
          opacity: 0;
        }
      }
    }

    &.condo-btn-dangerous {
      background: @condo-global-color-red-5;
      transition: background @condo-global-transition-duration-default ease-in-out;

      &:focus,
      &-focus {
        background: @condo-global-color-red-5;
      }

      &:hover {
        background: @condo-global-color-red-7;
      }

      &:active {
        background: @condo-global-color-red-5;
      }

      &.condo-btn-minimal {
        .condo-btn-content-color(@condo-global-color-red-5);
        .condo-btn-static-text-color(@condo-global-color-red-5);

        &:hover {
          .condo-btn-content-color(@condo-global-color-red-7);
          .condo-btn-static-text-color(@condo-global-color-red-7);
        }

        &.condo-btn-stateless {
          &:focus,
          &-focus,
          &:hover,
          &:active {
            .condo-btn-content-color(@condo-global-color-red-5);
            .condo-btn-static-text-color(@condo-global-color-red-5);
          }
        }
      }

      &.condo-btn-stateless {
        &:focus,
        &-focus,
        &:hover,
        &:active {
          background: @condo-global-color-red-5;
        }
      }

      &::before {
        opacity: 0;
      }
    }

    &:disabled,
    &:disabled:hover,
    &:disabled:active,
    &:disabled:focus,
    &.condo-btn-dangerous:disabled,
    &.condo-btn-dangerous:disabled:hover,
    &.condo-btn-dangerous:disabled:active,
    &.condo-btn-dangerous:disabled:focus,
    &-focus:disabled {
      color: @condo-global-color-white;
      background: @condo-global-color-black;
      opacity: @condo-global-opacity-disabled;

      &::before {
        opacity: 0;
      }
    }
  }

  &-secondary {
    color: @condo-global-color-black;
    border: @condo-button-border-width solid @condo-global-color-gray-7;
    transition: background-color @condo-global-transition-duration-default ease-in-out;
    .condo-btn-content-color(@condo-global-color-black);

    &.condo-btn-minimal {
      .condo-btn-content-color(@condo-global-color-gray-7);
    }

    & > .condo-btn-text {
      background: transparent;
    }

    &,
    &:focus,
    &-focus {
      background: transparent;
      border: @condo-button-border-width solid @condo-global-color-gray-7;
    }

    &:hover {
      background: @condo-global-color-brand-gradient-1;
      .condo-btn-content-color(@condo-global-color-green-5);
    }

    &:active {
      background: @condo-global-color-brand-gradient-1;
      .condo-btn-content-color(@condo-global-color-green-7);
    }

    &.condo-btn-dangerous {
      .condo-btn-content-color(@condo-global-color-red-5);
      .condo-btn-static-text-color(@condo-global-color-red-5);

      border: @condo-button-border-width solid @condo-global-color-red-5;

      &:hover {
        background: @condo-global-color-red-1;
        .condo-btn-content-color(@condo-global-color-red-7);
        .condo-btn-static-text-color(@condo-global-color-red-7);
      }

      &:active {
        background: @condo-global-color-red-1;
        .condo-btn-content-color(@condo-global-color-red-5);
        .condo-btn-static-text-color(@condo-global-color-red-5);
      }

      &::before,
      &:focus::before,
      &-focus::before {
        background: @condo-global-color-red-5 border-box;
      }

      &:hover::before {
        background: @condo-global-color-red-7 border-box;
      }

      &:active::before {
        background: @condo-global-color-red-5 border-box;
      }

      &.condo-btn-stateless {
        &:hover,
        &:active,
        &:focus,
        &-focus {
          .condo-btn-content-color(@condo-global-color-red-5);
          .condo-btn-static-text-color(@condo-global-color-red-5);
        }

        &::before,
        &:focus::before,
        &-focus::before,
        &:hover::before,
        &:active::before {
          background: @condo-global-color-red-5 border-box;
        }
      }
    }

    // Used button before element for gradient border with radius
    &::before {
      .condo-btn-layer(-@condo-button-border-width);

      box-sizing: border-box;
      background: @condo-global-color-brand-gradient-5 border-box;
      border: @condo-button-border-width solid transparent;
      opacity: 0;
      transition: opacity @condo-global-transition-duration-default ease-out;
      mask: linear-gradient(#111 0 0) padding-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
    }

    &::before,
    &:focus::before,
    &-focus::before {
      background: @condo-global-color-brand-gradient-5 border-box;
    }

    &:hover::before {
      background: @condo-global-color-brand-gradient-5 border-box;
      opacity: 1;
    }

    &:active::before {
      background: @condo-global-color-brand-gradient-5 border-box;
      opacity: 0.9;
    }

    &:disabled {
      background: transparent;
      border: @condo-button-border-width solid @condo-global-color-gray-7;
      opacity: @condo-global-opacity-disabled;

      .condo-btn-content-color(@condo-global-color-black);
      .condo-btn-static-text-color(@condo-global-color-black);

      &::before {
        opacity: 0;
      }
    }

    &.condo-btn-stateless {
      &:not(.condo-btn-dangerous) {
        .condo-btn-content-color(@condo-global-color-black);
      }

      &.condo-btn-minimal:not(.condo-btn-dangerous) {
        .condo-btn-content-color(@condo-global-color-gray-7);
      }

      &.condo-btn-minimal:not(.condo-btn-dangerous):hover {
        .condo-btn-content-color(@condo-global-color-gray-7);
      }

      &:hover,
      &:active {
        background: transparent;
      }

      &:not(.condo-btn-dangerous):hover {
        border: @condo-button-border-width solid @condo-global-color-gray-7;
      }

      &:hover::before,
      &:active::before {
        opacity: 0;
      }
    }

    //&:disabled,
    &:disabled:hover,
    &:disabled:active,
    &:disabled:focus,
    &.condo-btn-dangerous:disabled,
    &.condo-btn-dangerous:disabled:hover,
    &.condo-btn-dangerous:disabled:active,
    &.condo-btn-dangerous:disabled:focus,
    &.condo-btn-focus:disabled {
      background: transparent;
      border: @condo-button-border-width solid @condo-global-color-gray-7;
      opacity: @condo-global-opacity-disabled;

      .condo-btn-content-color(@condo-global-color-black);
      .condo-btn-static-text-color(@condo-global-color-black);

      &::before {
        opacity: 0;
      }
    }
  }

  &-accent {
    .condo-btn-static-text-color(@condo-global-color-green-5);
    .condo-btn-content-color(@condo-global-color-green-5);

    & > .condo-btn-text {
      background: transparent;
    }

    &::before {
      .condo-btn-layer(-@condo-button-border-width);

      background: @condo-global-color-brand-gradient-5;
      opacity: 0;
      transition: opacity @condo-global-transition-duration-default ease-in-out;
    }

    &,
    &:focus,
    &-focus {
      background: transparent;
    }

    &:hover {
      .condo-btn-static-text-color(@condo-global-color-white);
      .condo-btn-content-color(@condo-global-color-white);

      &::before {
        opacity: 1;
      }
    }

    &:active {
      .condo-btn-static-text-color(@condo-global-color-white);
      .condo-btn-content-color(@condo-global-color-white);

      &::before {
        opacity: 0.9;
      }
    }

    &.condo-btn-minimal {
      .condo-btn-static-text-color(@condo-global-color-green-5);
      .condo-btn-content-color(@condo-global-color-green-5);

      &::before {
        opacity: 0;
      }

      &::after {
        opacity: 0;
      }
    }

    &::after {
      .condo-btn-layer(-@condo-button-border-width);

      box-sizing: border-box;
      background: @condo-global-color-brand-gradient-5 border-box;
      border: @condo-button-border-width solid transparent;
      opacity: 1;
      transition: opacity @condo-global-transition-duration-default ease-out;
      mask: linear-gradient(#111 0 0) padding-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
    }

    &:focus-visible {
      &::after {
        .condo-btn-layer(-(@condo-button-focus-outline-width + @condo-button-border-width));

        opacity: 1;
      }
    }

    &.condo-btn-dangerous {
      .condo-btn-content-color(@condo-global-color-red-5);
      .condo-btn-static-text-color(@condo-global-color-red-5);

      &::before {
        display: none;
      }

      &::after {
        opacity: 0;
      }

      &:focus-visible::after,
      &-focus::after {
        opacity: 1;
      }

      border: @condo-button-border-width solid @condo-global-color-red-5;

      &:hover {
        background: @condo-global-color-red-1;
        .condo-btn-content-color(@condo-global-color-red-7);
        .condo-btn-static-text-color(@condo-global-color-red-7);
      }

      &:active {
        background: @condo-global-color-red-1;
        .condo-btn-content-color(@condo-global-color-red-5);
        .condo-btn-static-text-color(@condo-global-color-red-5);
      }

      &::before,
      &:focus::before,
      &-focus::before {
        background: @condo-global-color-red-5 border-box;
      }

      &:hover::before {
        background: @condo-global-color-red-7 border-box;
      }

      &:active::before {
        background: @condo-global-color-red-5 border-box;
      }

      &.condo-btn-stateless {
        &:hover,
        &:active,
        &:focus,
        &-focus {
          .condo-btn-content-color(@condo-global-color-red-5);
          .condo-btn-static-text-color(@condo-global-color-red-5);
        }

        &::before,
        &:focus::before,
        &-focus::before,
        &:hover::before,
        &:active::before {
          background: @condo-global-color-red-5 border-box;
        }
      }
    }

    &:disabled {
      background: transparent;
      border: @condo-button-border-width solid @condo-global-color-gray-7;
      opacity: @condo-global-opacity-disabled;

      .condo-btn-content-color(@condo-global-color-black);
      .condo-btn-static-text-color(@condo-global-color-black);

      &::after {
        opacity: 0;
      }
    }

    &.condo-btn-stateless {
      &:not(.condo-btn-dangerous) {
        .condo-btn-content-color(@condo-global-color-green-5);
      }

      &:hover,
      &:active {
        background: transparent;
      }

      &:hover::before,
      &:active::before {
        opacity: 0;
      }
    }

    //&:disabled,
    &:disabled:hover,
    &:disabled:active,
    &:disabled:focus,
    &.condo-btn-dangerous:disabled,
    &.condo-btn-dangerous:disabled:hover,
    &.condo-btn-dangerous:disabled:active,
    &.condo-btn-dangerous:disabled:focus,
    &.condo-btn-focus:disabled {
      background: transparent;
      border: @condo-button-border-width solid @condo-global-color-gray-7;
      opacity: @condo-global-opacity-disabled;

      .condo-btn-content-color(@condo-global-color-black);
      .condo-btn-static-text-color(@condo-global-color-black);

      &::before {
        opacity: 0;
      }
    }
  }

  & > &-icon {
    display: inline-flex;
  }
}

a.condo-btn {
  &-primary {
    .condo-btn-href(@condo-button-line-height-l, @condo-button-padding-vert-l, @condo-button-padding-hor-l, 0);
  }

  &-secondary {
    .condo-btn-href(@condo-button-line-height-l, @condo-button-padding-vert-l, @condo-button-padding-hor-l,
    @condo-button-border-width);
  }
}
