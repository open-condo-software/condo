import type { CodegenConfig } from '@graphql-codegen/cli'

const codegenCommentPlugin = () => ({
    add: {
        content: [
            '// This file is autogenerated by @graphql-codegen/cli',
            '// Do not edit / add anything manually, since it will be overridden by codegen\n',
        ],
    },
})

// TODO: Maybe parse schema manually to cut off extra kilo-lines of types later:
// https://github.com/dotansimha/graphql-code-generator/issues/6959#issuecomment-2021571398
const config: CodegenConfig = {
    overwrite: true,
    schema: '../condo/schema.graphql',
    documents: 'domains/**/queries/*.graphql',
    require: 'ts-node/register',
    generates: {
        'gql/index.ts': {
            config: {
                preResolveTypes: true,
                onlyOperationTypes: true,
            },
            plugins: [
                codegenCommentPlugin(),
                'typescript',
                'typescript-operations',
                'typescript-react-apollo',
            ],
        },
    },
}

export default config
